{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/typescript-eslint-handling-intentionally-ignored-variables/",
    "result": {"data":{"cur":{"id":"ee4fa349-0d3c-533a-9bcf-38d5b6c48497","html":"<h2 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR;</h2>\n<p>TypeScript와 ESLint는 “의도적으로 무시”하는 코드에 대해 다른 접근 방식을 가집니다. TypeScript는 언더스코어(<code>_</code>) 접두사로 시작하는 변수를 자동으로 무시하지만, ESLint의 <code>no-unused-vars</code> 규칙은 기본적으로 더 엄격하므로, 언더스코어로 시작하는 변수도 사용되지 않은 것으로 간주하여 오류를 발생시킵니다. 개발자는 <strong>ESLint 설정을 통해  “의도적으로 무시”하는 코드에 대해 TypeScript와 유사한 동작을 구현하거나 더 세밀한 제어</strong>를 할 수 있습니다.</p>\n<h2 id=\"의도적으로-무시하는-코드\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EB%8F%84%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%AC%B4%EC%8B%9C%ED%95%98%EB%8A%94-%EC%BD%94%EB%93%9C\" aria-label=\"의도적으로 무시하는 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“의도적으로 무시”하는 코드</h2>\n<p>아래 예시와 같은 코드를 작성해본 경험이 있으신가요? 우리는 가끔 “의도적으로 무시” 하는 것으로 간주하는 코드를 작성해야 할 때가 있습니다.</p>\n<ol>\n<li>루프 인덱스 무시: <code>_index</code>는 사용되지 않지만, <code>entries()</code> 메서드의 반환 값을 구조 분해하기 위해 필요</li>\n</ol>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">items</span><span class=\"mtk1\"> = [</span><span class=\"mtk8\">&quot;apple&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;banana&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;orange&quot;</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">_index</span><span class=\"mtk1\">, </span><span class=\"mtk12\">value</span><span class=\"mtk1\">] </span><span class=\"mtk4\">of</span><span class=\"mtk1\"> </span><span class=\"mtk12\">items</span><span class=\"mtk1\">.</span><span class=\"mtk11\">entries</span><span class=\"mtk1\">()) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk12\">value</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ol start=\"2\">\n<li>콜백 함수에서 매개변수 무시: <code>_item</code>은 사용되지 않지만, <code>index</code>에 접근하기 위해 선언</li>\n</ol>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">items</span><span class=\"mtk1\"> = [</span><span class=\"mtk8\">&quot;apple&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;banana&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;orange&quot;</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">items</span><span class=\"mtk1\">.</span><span class=\"mtk11\">forEach</span><span class=\"mtk1\">((</span><span class=\"mtk12\">_item</span><span class=\"mtk1\">, </span><span class=\"mtk12\">index</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`Index: </span><span class=\"mtk4\">${</span><span class=\"mtk12\">index</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span></code></pre>\n<ol start=\"3\">\n<li>구조 분해 할당에서 특정 속성 무시: <code>_age</code>는 추출되지만 사용되지 않음을 명시</li>\n</ol>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">person</span><span class=\"mtk1\"> = { </span><span class=\"mtk12\">name:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;John&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">age:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">30</span><span class=\"mtk1\">, </span><span class=\"mtk12\">email:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;john@example.com&quot;</span><span class=\"mtk1\"> };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">name</span><span class=\"mtk1\">, </span><span class=\"mtk12\">_age</span><span class=\"mtk1\">, </span><span class=\"mtk12\">email</span><span class=\"mtk1\"> } = </span><span class=\"mtk12\">person</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk12\">name</span><span class=\"mtk1\">, </span><span class=\"mtk12\">email</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<h2 id=\"typescript-vs-eslint의-다른-견해\" style=\"position:relative;\"><a href=\"#typescript-vs-eslint%EC%9D%98-%EB%8B%A4%EB%A5%B8-%EA%B2%AC%ED%95%B4\" aria-label=\"typescript vs eslint의 다른 견해 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TypeScript vs ESLint의 다른 견해</h2>\n<p>TypeScript 에서는 위의 예시와 같이 “의도적으로 무시”하는 코드를 작성하고 싶은 경우에  언더스코어(<code>_</code>) 접두사를 통해 변수를 선언하면 “이 변수는 의도적으로 사용되지 않음”을 나타냅니다. 따라서, <strong>TypeScript 컴파일러</strong>는 이에 대한 <strong>미사용 변수 경고를 생성하지 않습니다</strong>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABe0lEQVQoz4WS2Y7cIBBF/f8fOUo/ZNyLAQNmB58IenpLupWSrhA2dbhF1XQ6zszzb4J37K2yKolYLmxWczmfsEajpCCn+I9KTtSukkkxjPOTlJJ11RhjUEph7cayLMSUiDFSSyHnzL7vlFKGWmt471m1fslNKTHFlPEho7UcbkJoOFcIcaeWyr63Aetra5Va+zcGtNRK/rmkq8cUc2GRlu/5m5OYMV6jvUZZgXZ2wKAB+1AHfYp+doq5otbAIleEXPDR42PAbJrNO1q7Ah8u2z35naaQEsYohDiy6gUpz8Ton25tL3oGvovJp4QQF86X0yhzEQtucx9KatR6faudV2f3kl1M+FAwRqLUMpzqTbA5i/PbWE3UuGxJJY2mvHN420/WBb6Pil+HA/M8D7dq7XCJsQa1KrbQYZFS8xX4k1yVIhwONK0fDvvslBzHSHx6l9Hhp6bczhUhsF9ftHV9AK/jwH0s/m7CTbd/n5pyL/kT4H/A++g8Oe4O/wAXqqvGbrUpfQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"미사용 변수 경고를 생성하지 않는 TypeScript\"\n        title=\"미사용 변수 경고를 생성하지 않는 TypeScript\"\n        src=\"/static/e2ff0b9a55e3bfb8e20eda34d3f8cf81/37523/1_ts_no_error.png\"\n        srcset=\"/static/e2ff0b9a55e3bfb8e20eda34d3f8cf81/e9ff0/1_ts_no_error.png 180w,\n/static/e2ff0b9a55e3bfb8e20eda34d3f8cf81/f21e7/1_ts_no_error.png 360w,\n/static/e2ff0b9a55e3bfb8e20eda34d3f8cf81/37523/1_ts_no_error.png 720w,\n/static/e2ff0b9a55e3bfb8e20eda34d3f8cf81/302a4/1_ts_no_error.png 1080w,\n/static/e2ff0b9a55e3bfb8e20eda34d3f8cf81/07a9c/1_ts_no_error.png 1440w,\n/static/e2ff0b9a55e3bfb8e20eda34d3f8cf81/7970d/1_ts_no_error.png 1908w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그러나 우리의 코드 린팅 도구인 ESLint의  <code>no-unused-vars</code>의 <a href=\"https://eslint.org/docs/latest/rules/no-unused-vars#options\">기본 옵션</a>을 살펴보면, TypeScript와는 다르게 경고를 생성하고 있습니다. ESLint는 <strong>모든 변수</strong>의 사용 여부를 철저히 검사하고, 함수 매개변수에 대해서는 <strong>마지막으로 사용된 매개변수</strong>의 미사용에 대한 경고를 발생시키는 등 타입스크립트와는 다르게 조금 더 엄격하고, 세밀한 옵션을 가지고 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB30lEQVQ4y42TbXOjIBSF8///4n7YbZsYUSCi8q48O5jUNts22TvzzHUYORw4cPj9OnJqOrpO0HU967pQq5TylFpKX2hFj+g1ZrQcjLEMw8Q4ThgzkvO6sywL67p+K7beel4WUs7knLf/D9YlptmijcIGh/cQQsF5iDFTNsePXH5QysphnDNCTgjZcukanBmwlwt20Exak5f1OqHU/pUqsnH73hwqaVG9QneCEALBR6ydcc6S81IP9GPiD+wOfQy4OGK8YYozLllKuQZzrXJbveyOPm/zXWgXvBjDsTlybk/ovuXUNBhjtrS/c3FlvTu/e4cpkJdIyI6YPWEJpCXeOdyd7uL/hvPZ4ZgRveEo3mhEw8vLL4YaUN8htURfajgKryR5HkkhbofwNaCboBkdUg50ncROM2GeiTUYZ/HOkVLGe3+78M8u+8phOp/x1uJjZHYO5wMhJkLKhBjvNv4/r+cgzi2y7+mEQEmJ7DqGYeYyJJacKctypb6YZ1TB+HYkiQ5/PBGb8044NcRzS2oFay9Ba4p6gFQUa6+CsW1JQhCqWCt2qlhdrAqvSlF+En0fr4Lhz+vmzr8d76ljN6rjzcEjekmZLYfU9SStCbUrRZLqvivNOhjKOFLMIwzFe/4CEiXdUQuDuYcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"미사용에 대한 경고를 발생시키는 ESLint\"\n        title=\"미사용에 대한 경고를 발생시키는 ESLint\"\n        src=\"/static/221c836943e3ee0497600cb4d5b0cf09/37523/2_eslint_error.png\"\n        srcset=\"/static/221c836943e3ee0497600cb4d5b0cf09/e9ff0/2_eslint_error.png 180w,\n/static/221c836943e3ee0497600cb4d5b0cf09/f21e7/2_eslint_error.png 360w,\n/static/221c836943e3ee0497600cb4d5b0cf09/37523/2_eslint_error.png 720w,\n/static/221c836943e3ee0497600cb4d5b0cf09/302a4/2_eslint_error.png 1080w,\n/static/221c836943e3ee0497600cb4d5b0cf09/07a9c/2_eslint_error.png 1440w,\n/static/221c836943e3ee0497600cb4d5b0cf09/6c68b/2_eslint_error.png 1888w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"typescript-eslint인데-왜-typescript를-안따라가지\" style=\"position:relative;\"><a href=\"#typescript-eslint%EC%9D%B8%EB%8D%B0-%EC%99%9C-typescript%EB%A5%BC-%EC%95%88%EB%94%B0%EB%9D%BC%EA%B0%80%EC%A7%80\" aria-label=\"typescript eslint인데 왜 typescript를 안따라가지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>typescript-eslint인데 왜 typescript를 안따라가지??</h2>\n<p>ESlint와 TypeScript의 “의도적으로 무시”하는 코드에 대한 다른 견해로 인해 개발자들은 조금 혼동이 오기도 합니다. 관련해서 검색하던 중 재미있는 <a href=\"https://github.com/typescript-eslint/typescript-eslint/issues/8464\">discussion</a>이 있어 이 내용을 소개합니다. 이 글을 통해 <strong>TypeScript와 ESLint의 처리방식이 어떻게 다른지, 여러분의 의견은 어떤지, 어떻게 내가 원하는데로 ESLint 규칙을 설정 하면 될지</strong> 소개하려고 합니다.</p>\n<h3 id=\"no-unused-vars-ignoring_prefixed-variables-이슈-소개\" style=\"position:relative;\"><a href=\"#no-unused-vars-ignoring_prefixed-variables-%EC%9D%B4%EC%8A%88-%EC%86%8C%EA%B0%9C\" aria-label=\"no unused vars ignoring_prefixed variables 이슈 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>no-unused-vars</code> ignoring <code>_</code> prefixed variables 이슈 소개</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC8klEQVQ4y31Ua2/bOBD0//9H/XYf2rsUaHttDmka17nUsizrQZEURZHiQ57Drh8XJG0JDNbUGsNZ7ixXrVB42pZohEQrJPaHBr0aYN0MYx3GyV9BeyEHSD1yfvIBxnqYyYN4vv7zFSvrJxir0XcCSg8QUkHqAdpY9EpDDyP/5jgY/jZadyacMYcEHyL8HGAnh9XuUeHLTYlOCFTVAYe6xr6qsN9X11g3DQ51g7Kq0bYtfxe9xGBGvFyrcmOx/mThZjplhvMnzCEwQowcPeXjgpwzcl5wPB6ZgOJzrHbFEzrZoO0EeqkhpIaxE6zzGO0EM1reUyRyKtNOHjEmRBevyq6EtDHGoixL7MsSRVGgLPfY7UoopTASoRkxDIbVXZadJ9xV99BaIhl/IqSSKZlSRC0G/FtP2NYGVdOjaRpW5ZznEk8qgOVcqnYj3tzd4PZ+A9cZTl4JScVTcUArLZackGLAMVM5xzNerxQTks8/L7kZEj48eawPM566hB8iYdNEfKsCHg4B6/ocD6dI+clHjHZ8dSATHlTC27XDn98d3q0d/to4fPzh8Xk743Mx47aY8aWYeX+7m/HYRlgfIJXiRqWUEGPEsiznpowTdlUH4wJcWOBCPtviVwBiiBBCou8llNIwxjAxE+aU4OwEPQxsFXJ+iImnYI4vkeHmgBASG5v/z971rPLUFGuxr2qeVxKWl+W3SDkjpsSeJFI1GPZtuBBSclv12LcayjjIYeKBp+mhB+Al6P5IWdd1bHAqlXDtMvlsWwk8Fi06NWKcZh5+InwJIqSyRzOi79rXs8yeyhllo7CrJYS2DFL5S4UuXA3+apbpI9VOdxBTRiDEdGrKb0AWOZH8T3pVSE0RvWISuk9SnM6vCiGlzIcRaH+Jz5VdDlhdap/mzIj5yHf0HHk5nU4THdLCU3L8+URipbXG+vsGb9+9x837j7i7f0DdtPygEpq2xd8PW/zx4R43n275wW1aASF6yL6HlBJtXWNX7Ljr/wFehgd+QHXfmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"no-unused-vars ignoring _ prefixed variables 이슈\"\n        title=\"no-unused-vars ignoring _ prefixed variables 이슈\"\n        src=\"/static/a5016f4b1031f9c21369e6a333366422/37523/3_issue.png\"\n        srcset=\"/static/a5016f4b1031f9c21369e6a333366422/e9ff0/3_issue.png 180w,\n/static/a5016f4b1031f9c21369e6a333366422/f21e7/3_issue.png 360w,\n/static/a5016f4b1031f9c21369e6a333366422/37523/3_issue.png 720w,\n/static/a5016f4b1031f9c21369e6a333366422/302a4/3_issue.png 1080w,\n/static/a5016f4b1031f9c21369e6a333366422/07a9c/3_issue.png 1440w,\n/static/a5016f4b1031f9c21369e6a333366422/ec09f/3_issue.png 1916w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이 이슈는 <code>typescript-eslint</code>의 <code>no-unused-vars</code> 규칙이 TypeScript의 기본 설정과 다르게 <code>_</code>로 시작하는 변수를 자동으로 무시하지 않는다는 점을 다룹니다. <strong>Johnny Reilly</strong>는 TypeScript에서는 <code>_</code>로 시작하는 변수가 의도적으로 사용되지 않는 것으로 간주되어 경고가 발생하지 않는데, <code>typescript-eslint</code>에서는 그렇지 않다는 점을 지적하고 있습니다.</p>\n<p>이에 대해 메인테이너인 <strong>Brad Zacher는</strong> typescript-eslint가 기본 ESLint 규칙과 일치하도록 설정되어 있으며, 모든 불필요한 변수를 자동으로 잡아내도록 설계되어 있음을 이야기하면서 아래와 같은 이유로 ESLint의 기본 설정 그대로 제공해야하는 이유를 이야기했습니다.</p>\n<ul>\n<li>기본 설정은 코드베이스의 표준에 대한 가정을 하지 않으며, 언더스코어를 사용한 변수 허용을 기본으로 제공하지 않음.</li>\n<li>규칙이 엄격하게 설정되어 있어 잘못된 긍정(false positives)을 피할 수 있음.</li>\n<li>사용자 정의 설정을 통해 필요한 경우 규칙을 완화할 수 있음.</li>\n<li>TypeScript의 관습을 이해하지만, 단일 문자로 예외를 만드는 것이 항상 좋은 것은 아님.</li>\n</ul>\n<p>이에 대해 <strong>ohnny Reilly</strong>가 typescript의 기본값을 선호하는 사람들이 있을 수 있으며, 때로는 의도적으로 무시하는 코드를 작성해야 하는 경우가 있음을 이야기 합니다. 위에서 제가 예시로 든 “(3번) 구조 분해 할당에서 특정 속성 무시”에 관해 조금 더 구체적으로 이야기를 하는데, 여기에 대해 메인테이너는  <a href=\"https://eslint.org/docs/latest/rules/no-unused-vars#ignorerestsiblings\"><code>ignoreRestSiblings</code>옵션</a>에을 제공하고 있다고  안내하며 <a href=\"https://github.com/typescript-eslint/typescript-eslint/pull/8526\">typescript의 기본값대로 eslint를 설정하는 방법을 문서화</a>하는 형태로 이 이슈는 종료가 됩니다.</p>\n<h3 id=\"관련-내용\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EB%A0%A8-%EB%82%B4%EC%9A%A9\" aria-label=\"관련 내용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관련 내용</h3>\n<ul>\n<li>Discussion: <a href=\"https://github.com/typescript-eslint/typescript-eslint/issues/8464\">https://github.com/typescript-eslint/typescript-eslint/issues/8464</a></li>\n<li>PR: <a href=\"https://github.com/typescript-eslint/typescript-eslint/pull/8526\">https://github.com/typescript-eslint/typescript-eslint/pull/8526</a></li>\n<li><a href=\"https://johnnyreilly.com/typescript-eslint-no-unused-vars\">https://johnnyreilly.com/typescript-eslint-no-unused-vars</a></li>\n</ul>\n<h2 id=\"eslint의-no-unused-vars-규칙\" style=\"position:relative;\"><a href=\"#eslint%EC%9D%98-no-unused-vars-%EA%B7%9C%EC%B9%99\" aria-label=\"eslint의 no unused vars 규칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ESLint의 no-unused-vars 규칙</h2>\n<p>ESLint의 <code>no-unused-vars</code> 은 사용하지 않는 변수에 대해 많은 옵션을 제공합니다. 이 규칙의 <a href=\"https://eslint.org/docs/latest/rules/no-unused-vars#options\">기본 설정</a> 을 파악해 보면 “의도적으로 무시”하는 코드에 대해서 TypeScript의 컴파일러 옵션보다 더 세밀하게 옵션을 설정할 수 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;rules&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;no-unused-vars&quot;</span><span class=\"mtk1\">: [</span><span class=\"mtk8\">&quot;error&quot;</span><span class=\"mtk1\">, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">&quot;vars&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;all&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">&quot;args&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;after-used&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">&quot;caughtErrors&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;all&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">&quot;ignoreRestSiblings&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk4\">false</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">&quot;reportUsedIgnorePattern&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk4\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li><code>\"vars\": \"all\"</code>: 모든 변수의 사용 여부를 검사합니다. 전역 변수를 포함한 모든 변수가 대상이 됩니다.</li>\n<li><code>\"args\": \"after-used\"</code>: 함수 매개변수에 대해서는 마지막으로 사용된 매개변수 이후의 미사용 매개변수만 경고합니다. 예를 들어, 첫 번째 매개변수가 사용되지 않더라도 두 번째 매개변수가 사용된다면 첫 번째 매개변수에 대해서는 경고하지 않습니다.</li>\n<li><code>\"caughtErrors\": \"all\"</code>: catch 문의 에러 객체가 사용되지 않을 경우 경고합니다.</li>\n<li><code>\"ignoreRestSiblings\": false</code>: 객체 구조 분해에서 나머지 연산자(…)로 할당된 속성을 무시하지 않습니다.</li>\n<li><code>\"reportUsedIgnorePattern\": false</code>: <code>varsIgnorePattern</code>, <code>argsIgnorePattern</code> 등으로 무시되도록 설정된 변수가 실제로 사용되었을 때 이를 보고하지 않습니다.</li>\n</ul>\n<h2 id=\"의도적으로-무시하는-코드-린트-통과하도록-설정하기\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EB%8F%84%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%AC%B4%EC%8B%9C%ED%95%98%EB%8A%94-%EC%BD%94%EB%93%9C-%EB%A6%B0%ED%8A%B8-%ED%86%B5%EA%B3%BC%ED%95%98%EB%8F%84%EB%A1%9D-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"의도적으로 무시하는 코드 린트 통과하도록 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“의도적으로 무시”하는 코드, 린트 통과하도록 설정하기</h2>\n<p>일반적으로 사용되지 않는 지역 변수와 매개변수를 표시하기 위해서는, TypeScript 보다 더 엄격한 규칙을 적용하는 <strong>ESLint <code>@typescript-eslint/no-unused-vars</code>를 사용하는 것을 권장</strong>합니다.</p>\n<p>하지만 개발자의 취향에 따라 “의도적으로 무시”하는 코드에 대해서는 린트를 통과하도록 설정하고 싶을 수 있습니다. 이런 경우 세부적인 규칙 설정이 가능한 ESLint를 활용하여, TypeScript의 컴파일러 옵션보다 더 구체적인 설정이 가능합니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;rules&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;@typescript-eslint/no-unused-vars&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">&quot;error&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;args&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;all&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;argsIgnorePattern&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;^_&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;caughtErrors&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;all&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;caughtErrorsIgnorePattern&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;^_&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;destructuredArrayIgnorePattern&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;^_&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;varsIgnorePattern&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;^_&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;ignoreRestSiblings&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<ul>\n<li><code>\"error\"</code>: 이 규칙을 위반하면 오류로 처리합니다.</li>\n<li><code>\"args\": \"all\"</code>: 모든 함수 매개변수를 검사합니다.</li>\n<li><code>\"argsIgnorePattern\": \"^_\":</code> 언더스코어로 시작하는 함수 매개변수는 무시합니다.</li>\n<li><code>\"caughtErrors\": \"all\"</code>: 모든 catch 문의 에러 변수를 검사합니다. (기존대로 유지)</li>\n<li><code>\"caughtErrorsIgnorePattern\": \"^_\"</code>: 언더스코어로 시작하는 catch 문의 에러 변수는 무시합니다.</li>\n<li><code>\"destructuredArrayIgnorePattern\": \"^_\"</code>: 배열 구조 분해에서 언더스코어로 시작하는 변수는 무시합니다.</li>\n<li><code>\"varsIgnorePattern\": \"^_\"</code>: 언더스코어로 시작하는 일반 변수는 무시합니다.</li>\n<li><code>\"ignoreRestSiblings\": true</code>: 객체 구조 분해에서 나머지 연산자(…)를 사용한 후의 속성들은 무시합니다.</li>\n</ul>\n<h2 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h2>\n<p>TypeScript와 ESLint는 “의도적으로 무시”하는 코드를 다르게 처리합니다. TypeScript는 언더스코어(<code>_</code>) 접두사로 시작하는 변수를 자동으로 무시하지만, ESLint의 <code>no-unused-vars</code> 규칙은 기본적으로 더 엄격합니다.</p>\n<p>ESLint는 다양한 옵션을 통해 세밀한 제어가 가능하며, 개발자는 이를 활용하여 TypeScript와 유사한 동작을 구현하거나 자신의 선호도에 맞게 설정할 수 있습니다.</p>\n<p>일반적으로 코드 품질 관리를 위해 ESLint의 <code>@typescript-eslint/no-unused-vars</code>를 사용하되, 필요에 따라 설정을 조정하여 개발 편의성과 코드 품질 사이의 균형을 유지하는 것을 추천합니다.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","excerpt":"TL;DR; TypeScript와 ESLint는 “의도적으로 무시”하는 코드에 대해 다른 접근 방식을 가집니다. TypeScript는 언더스코어(_) 접두사로 시작하는 변수를 자동으로 무시하지만, ESLint의 no-unused-vars 규칙은 기본적으로 더 엄격하므로, 언더스코어로 시작하는 변수도 사용되지 않은 것으로 간주하여 오류를 발생시킵니다. 개발자는 ESLint 설정을 통해  “의도적으로 무시”하는 코드에 대해 TypeScript와 유사한 동작을 구현하거나 더 세밀한 제어를 할 수 있습니다. “의도적으로 무시”하는 코드 아래 예시와 같은 코드를 작성해본 경험이 있으신가요? 우리는 가끔 “의도적으로 무시” 하는 것으로 간주하는 코드를 작성해야 할 때가 있습니다. 루프 인덱스 무시: _index는 사용되지 않지만, entries() 메서드의 반환 값을 구조 분해하기 위해 필요 콜백 함수에서 매개변수 무시: _item은 사용되지 않지만, index에 접근하기 위해 선언 구조 분…","frontmatter":{"date":"October 26, 2024","title":"‘의도적으로 무시’하는 코드에 대한 TypeScript와 ESLint의 다른 처리 방식","categories":"framework","author":"soobing"},"fields":{"slug":"/typescript-eslint-handling-intentionally-ignored-variables/"}},"next":{"id":"87e0c0f2-6c03-513a-99a6-ef53d6389653","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEeUlEQVQ4yx3S2VKTBwBA4TxAgeRf8xOykQgRkCKLEjAEZJd1CJvsAkpYJIBsElmkgKKgLCK4sDhUFhHUasdpLzudaWfa3rW39aIPcjr4At/NObpzrnoy3H7cideIEAvQQrIxh+ZjCy3mjN6Hy1DPOaGV84KfZLGHC2KAi1IfKYYeMq39FMYPkun0kxJRhyM0C120rZkYRzPRtjpMhlJMocVYQ0pxhFXiMjQQJ7STIHaRLAZIlQZxS8OkSSO4hSE8xkGybANcMneSpDbgMhSiM+m70cLa0UKbMRuasOubcYY2ExXSRGxYB/FhfaQId/BK82SLj8iVlsmXl8mTF8kS5/Dox0kNGyAp1E9cWCU6i9SHRe7CIrZjEVqxhjVjD2klyTRLpnWJYtsGheGPSNWG8JrH8WhBPNIk2eI8WdIMXnGcNGGQC/puzoVWozNLAcxSNxbhBhZDG065nWjZT4L9ARmup1w5u0m+bYl06zCXnRN4LGN4wyfI0x6QKU2TIY6TLgyRqg+QqG9EZxYDWKQeLKIfU0gbRd5pulvWaalYZLBjk67a5/Q37BJse8ftpndMtH0k2PieidYTyl2LeMLG8YpjZOiHSTXcOAV7v4JWoROb4Kc0a44bV9fprH9Bu+85ft8W/Vf3uFV/QFfJ90x1/ECw6YRgwzHXszbx6qfJke6SK0yRYehDFyH2YhVvYhd6cBh6cOh7OCv1k+a4w4WIIG5tCm/ELJet8+RaFiiwPqI8aoUc8SG50gIF8gKF8kOKpEVyxDunYACLGMAuBHAK/ZwRbhGrjOKJnsFfsUNn2S5dJfv0lhwyVHVMd/4+pfY1CtUVCuUVipVVypQ1fPIGxdK90ygDWKRb2MVBzogjxMhjRH4zSmHKMn/99i9//PqFXz5/4fefvvD3n//x89E/lJifUSitU6I+o1x9SZVxi3r5FdXKyuk2I9jFUZzCGC5xnBhpkjhlhlh5grNaBynWXi5abpLu6MdtC+AOH6RAWadU26bM+AqfcZda4y4t8gG18ho6qxzEIY0TJUwSI939isXJc3wr3ydRncctLeIRH5MprZItPSVP3qDIeIrtUmHco8q4T53xgHb5LfXyM3Q2ZQqHPE2U9B2x0izxyn3OGx+QHL5AmmWJrIhVcsLXyDNtcMX0khLzDmURu/hMp9ghtdoRDdoR15X3NCmb6OzqDE5llmh5jjj1PrHCPdyRj/G6VvA4l8hzPqEkaoPS6JeUR+1Q5dqlKeGQGus+PsMBdeoxjdoJ7eonGtTtU3AOhzqLU5wmK2GF6twtitzreKIX8WU8pyb9BUVRT2jx7uLPf0uZY5uBoo90pr6n/9JnWu0faFBPuKb9SK26g86uzBKp3sWhTOBSJ0myzpKX/JiitGV8mWv4UlcpT1iiMmmN3vI3+HOO6C/+SI/3EzURb6g3vaFRO6RF+0Ct9gqdTZ3CpgSxy6M4pBGcwjAudYS48BHitWESlREuKre5pE2Sa3/IFdsaFZHbVFpfU6a8plrboz58jybtmJrwLf4HT0WLM7HVHLwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Astro Framework 소개\"\n        title=\"Astro Framework 소개\"\n        src=\"/static/a755f310ab957e31b72ccc1aa26c1275/37523/astro-introduction.png\"\n        srcset=\"/static/a755f310ab957e31b72ccc1aa26c1275/e9ff0/astro-introduction.png 180w,\n/static/a755f310ab957e31b72ccc1aa26c1275/f21e7/astro-introduction.png 360w,\n/static/a755f310ab957e31b72ccc1aa26c1275/37523/astro-introduction.png 720w,\n/static/a755f310ab957e31b72ccc1aa26c1275/4c42d/astro-introduction.png 896w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><a href=\"https://astro.build/\">Astro</a>는 애플리케이션을 구축이 아닌 <a href=\"https://docs.astro.build/ko/concepts/why-astro/#%EC%BD%98%ED%85%90%EC%B8%A0-%EC%A4%91%EC%8B%AC\">콘텐츠에 중점</a>을 두고 설계된 <strong>정적 사이트 빌더</strong>입니다. 따라서 블로그, 포트폴리오, 이벤트용 마케팅 성격의 사이트 개발에 매우 적합한 프레임워크 입니다.</p>\n<p>Astro 컴포넌트에 대해 먼저 간략히 알아보고, 어떻게 여러 프레임워크(React, Preact,Svelte, Vue, SolidJS)를 하나의 프로젝트에서 혼합해서 사용할 수 있는지 알아보도록 하겠습니다.</p>\n<h2 id=\"astro-컴포넌트\" style=\"position:relative;\"><a href=\"#astro-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8\" aria-label=\"astro 컴포넌트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Astro 컴포넌트</h2>\n<p><a href=\"https://docs.astro.build/ko/basics/astro-components/\">Astro 컴포넌트</a>는 모든 Astro 프로젝트의 기본 구성 요소입니다. 이는 클라이언트 측 런타임이 없는 HTML 전용 템플릿 컴포넌트로 <code>.astro</code> 파일 확장자 사용합니다.</p>\n<p>Astro 컴포넌트에 대해 알아야 할 가장 중요한 점은 <strong>클라이언트에서 렌더링되지 않는다</strong>는 것입니다. HTML로 렌더링되며, <strong>컴포넌트 스크립트는 브라우저로 전송되는 최종 페이지에서 모두 제거</strong>됩니다.</p>\n<h3 id=\"구성스크립트--템플릿\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%EC%84%B1%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8--%ED%85%9C%ED%94%8C%EB%A6%BF\" aria-label=\"구성스크립트  템플릿 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구성(스크립트 + 템플릿)</h3>\n<p><code>.astro</code> 파일은 <strong>스크립트와 템플릿</strong>으로 구성됩니다.</p>\n<ul>\n<li>\n<p>src/components/Pokemon.astro</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"md\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">---</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">// 컴포넌트 스크립트 (JavaScript)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import Banner from &#39;../components/Banner.astro&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import ReactPokemonComponent from &#39;../components/ReactPokemonComponent.jsx&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">const myFavoritePokemon = [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">/* ... */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">]</span><span class=\"mtk8\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">const { title } = Astro.props;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">---</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- 컴포넌트 템플릿 (HTML + JS 표현식) --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- HTML 주석 지원 --&gt;</span><span class=\"mtk1\">{/* JS 주석 또한 지원 */}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">Banner</span><span class=\"mtk17\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">h1</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">안녕하세요!</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">h1</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- 컴포넌트 스크립트의 props 및 기타 변수를 사용합니다. --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">p</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">{title}</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">p</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- `client:` 지시어를 사용하여 다른 UI 프레임워크 컴포넌트 렌더링 --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">ReactPokemonComponent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">client:visible</span><span class=\"mtk17\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- JSX와 유사하게 HTML과 JavaScript 표현식을 혼합 --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">ul</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  {myFavoritePokemon.map((data) =&gt; </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">{data.name}</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">)}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">ul</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- 템플릿 지시어를 사용하여 여러 문자열이나 객체로부터 클래스 이름을 만들기 --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">p</span><span class=\"mtk1\"> </span><span class=\"mtk12\">class:list</span><span class=\"mtk1\">=</span><span class=\"mtk8\">{[</span><span class=\"mtk14\">&#39;add&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk14\">&#39;dynamic&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk12\">{</span><span class=\"mtk1\"> </span><span class=\"mtk12\">classNames:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">true</span><span class=\"mtk1\"> </span><span class=\"mtk12\">}]}</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">p</span><span class=\"mtk17\">&gt;</span></span></span></code></pre>\n</li>\n</ul>\n<h2 id=\"서버-우선-렌더링\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-%EC%9A%B0%EC%84%A0-%EB%A0%8C%EB%8D%94%EB%A7%81\" aria-label=\"서버 우선 렌더링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버 우선 렌더링</h2>\n<p>Astro는 <strong>클라이언트 측 렌더링보다 <a href=\"https://docs.astro.build/ko/basics/rendering-modes/\">서버 렌더링</a>을 최대한 활용</strong>합니다. 기본값인 <a href=\"https://docs.astro.build/ko/basics/rendering-modes/#%EC%82%AC%EC%A0%84-%EB%A0%8C%EB%8D%94%EB%A7%81\">정적 사이트 생성(SSG)</a>방식을 통해 빌드 시 HTML을 생성하며, <a href=\"https://docs.astro.build/ko/guides/server-side-rendering/\">서버 사이드 렌더링(SSR)</a>을 사용하는 경우에도 사용자 요청마다 서버에서 HTML을 동적으로 생성합니다.</p>\n<p>서버 렌더링을 최대한 활용한다면, 클릭 이벤트 핸들러 연결 등 <strong>interactive한 기능</strong>은 사용하지 못하는 것일까요? 그렇지 않습니다. 이러한 기능은 HTML의 <strong><code>&#x3C;script></code></strong> 태그 내부에 포함되기 때문에 렌더링 이후 클라이언트 측에서 실행되어 hydration 됩니다.</p>\n<blockquote>\n<p><a href=\"https://astro.build/blog/hybrid-rendering/\">https://astro.build/blog/hybrid-rendering/</a></p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.55555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACmUlEQVQoz1WS224bNxRF9Q9FLuJlOOQMh5qrqJFG0micxEbqpn7xg5zEQBAUvQRokNh12wcDLpoEbYHC7YckyKfxJ7iLkRKleVg4BySwuM8BB6E00CaFjCPcZgyEKVAegXK1hSkQKj8jCBOEarQlSnc1kAYDwgSkWuGevcJ+8R04j0H4BylT4EIj1BlEnG7o+/6M8v8/HO36AWES8/k/eHz/PS4O3+FutsYNQsEDjSERUGaCycNLtD++Qnf5Bsvff4M0JQgJPwnZB3rhkIaYNdc4uf8eZ4dvcSdb4yahYDxGf6eSMcZHLzA9vUDz7Gc0L84hkwKUSrBdsgg02NbNyEG4QGsvscq/AWWfxiB0m7A+fYU7P/2Ne6+v0f75B4Qp8MWQ4hYTIESA3OYY3uQgQ4EB680sgIwUWChAA7l7lfQJdYmqW6M6OIH9+iHs8QlGSYU2XCAXFsxYyLqDavcgyjEGQkQo8gpFOYG1U5g0RaxTpLlFrHMkpsC4qrFcrDCfLZFVFY6rFd7tX+F8/AP0wVN0L6+x99e/SB89wqDfAw8+ojYwvoWycCO19RK2XsBOF7CzBYzOMFMlRiKFnB0hP/4e5bfPEO0f9DtU27/HPorkRtonDwIFnfTCFs3yLuqm20hNNoYaZZCRhulOUT+5xOzXK8QPjjCgTHnKlWdceh4oH4jIh2HsI6V9pCKfjgo/azrfzDvfLDs/b1c+zSufpYXXsfFmb+3Lx2fenl34+PArP9glCySCIIIMY0QqhtEaWRKjyAuM6xXsdIXJbIVJ0yIvKuR5jkQbmPYE5foc9vkviL98sEnoGFeOB8oJETmlYpfEscuNdjbTri5Hblplblqlm96WI5ePEqcj5aRUTgTSMSYcJcIRKt1/lwdtg0liJTEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Astro 하이브리드 렌더링\"\n        title=\"Astro 하이브리드 렌더링\"\n        src=\"/static/55c0090855b97cfdb97bd1315e7615ff/37523/astro-hybrid-rendering.png\"\n        srcset=\"/static/55c0090855b97cfdb97bd1315e7615ff/e9ff0/astro-hybrid-rendering.png 180w,\n/static/55c0090855b97cfdb97bd1315e7615ff/f21e7/astro-hybrid-rendering.png 360w,\n/static/55c0090855b97cfdb97bd1315e7615ff/37523/astro-hybrid-rendering.png 720w,\n/static/55c0090855b97cfdb97bd1315e7615ff/302a4/astro-hybrid-rendering.png 1080w,\n/static/55c0090855b97cfdb97bd1315e7615ff/07a9c/astro-hybrid-rendering.png 1440w,\n/static/55c0090855b97cfdb97bd1315e7615ff/71c1d/astro-hybrid-rendering.png 1536w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><em>Astro 2.0 하이브리드 렌더링의 작동 방식</em></p>\n<p>위의 그림은 Astro 2.0 하이브리드 렌더링의 작동 방식에 관한 도식으로, 정적 분석을 통해 페이지를 사전 렌더링과 서버 렌더링 청크로 분리하여 각각 최적화된 방식으로 처리하는 기술을 설명하고 있습니다.</p>\n<p>사전 렌더링을 위한 결과물로는 HTML이 생성되며, <strong>interactive 하게 하기 위한 JS(prerenderer.js) 또는 CSR용 컴포넌트 관련 JS(client manifest)들은 따로 번들화되어 브라우저로 전송</strong>됩니다. <a href=\"https://docs.astro.build/ko/reference/configuration-reference/#adapter\">어댑터(adapter)</a>는 server.js를 Netlify, Vercel과 같은 특정 호스팅 제공업체와 연결하여 SSR을 처리할 수 있게 합니다.</p>\n<p>이러한 하이브리드 렌더링 방식은 SSG와 SSR의 유연성을 모두 활용할 수 있게 해줍니다.</p>\n<p>Astro에서는 위와 같이 서버 우선 접근 방식을 사용하면서 <strong>필요한 경우에 클라이언트 사이드 렌더링(CSR)을 선택할 수 있습니다.</strong> 이는 Astro 아일랜드에서 더 자세히 알아보도록 하겠습니다.</p>\n<h3 id=\"uncanny-valley\" style=\"position:relative;\"><a href=\"#uncanny-valley\" aria-label=\"uncanny valley permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Uncanny Valley</h3>\n<blockquote>\n<p>서버 렌더링..! 정말 모든 문제를 해결해주는 최고의 솔루션일까?<br>\n🙅🏻‍♀️ Nope!</p>\n</blockquote>\n<p>서버 렌더링은 더 빠른 First Contentful Paint를 제공하지만 항상 더 빠른 Time To Interactive를 제공하지는 않습니다. <strong>웹사이트와 상호 작용하기 위해 필요한 JavaScript 번들이 로드되고 처리된 후에야</strong> 핸들러가 연결 됩니다. 버튼은 상호 작용이 가능해 보일 수 있지만 hydration 전까진 상호 작용이 불가능합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYUlEQVQoz3WSW25cMQiGz/5X1FX0LY9t2vSiVJkkM8bG3Oy/sn3OTBOllhBYwAcGb2bW3R1Dmxl2+yrH3c2gZqi6xHef+7JXvGPbE/ty+hXy/h7uqOr4kQzfk+MiDhpwc9gRbzaBPSLQe++ttQ+Bqooww6UannjBiygeiyPLaEjfdjiA4/Tep2OAh30UyDlDuOBUFL+5Ab2hiuIhB14zg0sGVwH/Dzj0OAewigAt8MyOn2XFNgDfcuDCMru3CGS1G/Dfjt48eepAj8C5Bv5woEVAPPCrDIgjYsXoPkN8LHrTWhFWUUTwmAWnUvHMFS8sING5dd1/wvb+m4wFHKAZpAX29Bl0/wnycgenewR9QdDXKSY0lzHyBmurtYJSgoggpYRMBGa+PrlkgpQzlF9RmVDLZRURAp1PyJRWXCmTsanIBIwKlGhulMsNSEQQMUTrEHVQLnNeY6spEVTXzEfu4PwFIbcNTf5awnIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Uncanny Valley\"\n        title=\"Uncanny Valley\"\n        src=\"/static/c1b37271ee729da8820d056b69a83209/37523/uncanny-valley.png\"\n        srcset=\"/static/c1b37271ee729da8820d056b69a83209/e9ff0/uncanny-valley.png 180w,\n/static/c1b37271ee729da8820d056b69a83209/f21e7/uncanny-valley.png 360w,\n/static/c1b37271ee729da8820d056b69a83209/37523/uncanny-valley.png 720w,\n/static/c1b37271ee729da8820d056b69a83209/302a4/uncanny-valley.png 1080w,\n/static/c1b37271ee729da8820d056b69a83209/07a9c/uncanny-valley.png 1440w,\n/static/c1b37271ee729da8820d056b69a83209/4a10c/uncanny-valley.png 2219w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<em>Hydration 작동 방식</em></p>\n<p>사용자가 화면에서 non-interactive UI를 보는 시간을  <strong>Uncanny Valley(불편한 골짜기)</strong> 라고 합니다. UI가 화면에 보이기에, 사용자는 웹사이트와 상호 작용할 수 있다고 생각하지만 아직 구성 요소에 핸들러가 연결되어 있지 않아 정지된 것처럼 보일 수 있어 실망스러운 경험이 될 수 있습니다.</p>\n<p>Uncanny Valley 문제를 해결하기 위해 <strong>Selective(Partial) Hydration, Progressive Hydration</strong> 개념이 등장하게 되었습니다.</p>\n<h3 id=\"selectivepartial-hydration\" style=\"position:relative;\"><a href=\"#selectivepartial-hydration\" aria-label=\"selectivepartial hydration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Selective(Partial) Hydration</h3>\n<p>Selective Hydration은 페이지의 <strong>특정 부분만</strong> 하이드레이션하는 기술입니다.</p>\n<ul>\n<li><strong>무엇(WHAT)을 하이드레이션 할 것인가</strong>에 초점을 맞춥니다.</li>\n<li>개발자나 컴파일러가 애플리케이션의 구조를 분석하여 JavaScript가 필요한 부분만 선별적으로 하이드레이션합니다.</li>\n<li>정적인 부분과 동적인 부분을 구분하여 필요한 부분(동적인 부분)만 하이드레이션함으로써 전체적인 JavaScript 사용량을 줄일 수 있습니다.</li>\n</ul>\n<p>Astro에서는 컴포넌트 수준에서 Partial Hydration을 구현합니다. <code>client:*</code> 지시어를 사용하여 특정 컴포넌트만 클라이언트 사이드에서 하이드레이션 되도록 지정할 수 있습니다.</p>\n<h3 id=\"progressive-hydration\" style=\"position:relative;\"><a href=\"#progressive-hydration\" aria-label=\"progressive hydration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Progressive Hydration</h3>\n<p>Progressive Hydration은 페이지의 하이드레이션을 <strong>점진적으로 수행</strong>하는 기술입니다.</p>\n<ul>\n<li><strong>언제(WHEN) 하이드레이션을 수행할 것인가</strong>에 초점을 맞춥니다.</li>\n<li>애플리케이션을 한 번에 완전히 하이드레이션하지 않고, 데이터의 일부분씩 클라이언트로 전송하여 부분적으로 하이드레이션합니다.</li>\n<li>특정 이벤트(예: 버튼 클릭)나 컴포넌트가 뷰포트에 들어올 때 등 특정 조건에 따라 하이드레이션이 진행됩니다.</li>\n</ul>\n<p>Astro에서는 <code>client:visible</code>이나 <code>client:idle</code> 등의 지시어를 사용하여 Progressive Hydration을 구현합니다. 이를 통해 컴포넌트가 화면에 표시될 때나 브라우저가 유휴 상태일 때 하이드레이션을 수행할 수 있습니다.</p>\n<p>Astro는 <a href=\"https://twitter.com/ksylor\">Katie Sylor-Miller</a>가 처음 만든 <a href=\"https://docs.astro.build/ko/concepts/islands/\">컴포넌트 아일랜드</a> 아키텍처 패턴을 사용하여 Selective Hydration 기능이 내장된 최초의 주류 JavaScript 웹 프레임워크로 인기를 얻었습니다.</p>\n<p>Selective Hydration과 Progressive Hydration을 제어할 수 있는 기본 단위인 <a href=\"https://docs.astro.build/ko/concepts/islands/\">Astro 아일랜드</a>의 개념을 살펴보면서 어떠한 Hydration 제어기능이 있는지 살펴보도록 합시다.</p>\n<h2 id=\"astro-아일랜드\" style=\"position:relative;\"><a href=\"#astro-%EC%95%84%EC%9D%BC%EB%9E%9C%EB%93%9C\" aria-label=\"astro 아일랜드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Astro 아일랜드</h2>\n<p>Astro 아일랜드는 <code>서버 측에서 렌더링된 static HTML</code> 바다 위에 떠있는 <code>대화형 UI 컴포넌트 섬(island)</code>으로 생각하면 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABnElEQVQY002R3UtTcRjH9x/FAm8kvCwQJbrQXm688KKF4EVeSSQIp6QwBdFQiHKWc+mWB3WzcE6X+QYLdeDLNpzsiDPP0m1sc+d4dn4fOVtIX3h4vnzh8zw8PDZTCEwB2WIOTS/xvwzNpP/rADMbPkCgljLogoq3yuLUnMlNIgQ2qAZjC6N8Dk5VfLqgVHsyxuy8myM1zWrCyWzsG3kTDPMfJQQffljcK3TtvMLY9rJXyH/KjAf8zMleesJ+ns8/pGs9zPDSGu5IlL59g57FNwyuyPTulun+rSBtpejdSSJ9akP66CCkRCtLbEPxAnXBNA3+OA+8Ue553tHivE+Tt5OW0ClPl1I4Qme8Dq7zNrSBYzlB/fsXNLr7aFpI0OZZ4dn0L+7+vMCjXFonw86FzpPNHDWBHM1f5miXBmmdcHHHd4rdFeO264BbE4fYJxUavyfpcI7x2CVjn1GoXSzyaLPIyGGBeN6oDrRUNEwi2SsCioq8m2b5OIMvpTF1ouM+1pk+0ZhMXvJyO0PXlooUOWMgnif8t4RmlG8eeQ20RJG9tSbGxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Astro 아일랜드\"\n        title=\"Astro 아일랜드\"\n        src=\"/static/c4e6302b667d6ce0631c217cc3098fb5/37523/astro-island-1.png\"\n        srcset=\"/static/c4e6302b667d6ce0631c217cc3098fb5/e9ff0/astro-island-1.png 180w,\n/static/c4e6302b667d6ce0631c217cc3098fb5/f21e7/astro-island-1.png 360w,\n/static/c4e6302b667d6ce0631c217cc3098fb5/37523/astro-island-1.png 720w,\n/static/c4e6302b667d6ce0631c217cc3098fb5/302a4/astro-island-1.png 1080w,\n/static/c4e6302b667d6ce0631c217cc3098fb5/07a9c/astro-island-1.png 1440w,\n/static/c4e6302b667d6ce0631c217cc3098fb5/d38ac/astro-island-1.png 1744w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<em>다양한 프레임워크 컴포넌트가 존재하는 Astro 아일랜드</em></p>\n<p>아일랜드는 항상 페이지의 다른 아일랜드와 별개로 실행됩니다.위에서 설명한 <strong>Selective(Partial) Hydration</strong> 덕분에 페이지에 여러 아일랜드가 존재할 수 있습니다. 각 아일랜드는 독립적이기 때문에 <a href=\"https://ko.react.dev/\">React</a>, <a href=\"https://preactjs.com/\">Preact</a>, <a href=\"https://svelte.dev/\">Svelte</a>, <a href=\"https://ko.vuejs.org/\">Vue</a>, <a href=\"https://www.solidjs.com/\">SolidJS</a>와 같은 여러 UI 프레임워크를 혼합하여 사용할 수 있습니다.</p>\n<h3 id=\"astro에서-selective-hydration\" style=\"position:relative;\"><a href=\"#astro%EC%97%90%EC%84%9C-selective-hydration\" aria-label=\"astro에서 selective hydration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Astro에서 Selective Hydration</h3>\n<p>기본적으로 Astro는 서버 우선 렌더링을 하기 때문에, 컴포넌트의 <strong>모든 클라이언트 측 JS를 제거하고</strong> HTML 및 CSS로 렌더링 합니다. 그러나 Selective Hydration을 통해 CSR이 필요한 기존 SPA 프레임워크 또한 선택적으로 클라이언트 렌더링이 가능하도록 지원하고 있습니다.</p>\n<ul>\n<li>\n<p>src/pages/index.astro</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">MyReactComponent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">client</span><span class=\"mtk1\">:</span><span class=\"mtk12\">load</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span></code></pre>\n</li>\n</ul>\n<p>즉, Astro에서 선택적 하이드레이션은 CSR을 지원하는데 초점을 맞추고 있다고 이해하면 됩니다. 따라서 대화형 아일랜드로 바꾸려면 <code>client:*</code> 지시어를 사용하여 클라이언트 측에서 렌더링 및 hydration 되도록 수 있도록 표시가 필요합니다. 만약 표시하지 않는다면, <a href=\"https://docs.astro.build/ko/guides/framework-components/\">UI 프레임워크 컴포넌트</a>는 <strong>클라이언트에서 수화되지 않으며,</strong> HTML이 JavaScript 없이 페이지에 렌더링됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsklEQVQY0z2Q3UtTAQDF/V96sh5EEzYSqTT7EoxZk6WuNFCbezBxmoMe6qEPqEEmPmRvJtNoX7o2b6W36V4aXqamOac3t+uSPQSVmmtf+Ys53Hk4D+fAD84pAogoCnaXg4nJCXZ2djlSJvmPQdsQI8Ion2ameet2IG9GCn00GsXm8iII71le+XqYFeVMWQtR36qhob0JUZzB/1lkZTVMXF7lg+hkLijRadbR3NOIf365AAwuLFLXokFzq4p3bnseuJ6AATGI3tCO0XCbS91tqG4Uc9FkZlCYxhZWuO+LUNtxmWvGFtqGPZi8Ev1CkM7hcWobVJyvL+OFdSQPHJL3qRRinLFKnHu9SFmfEfX1E6i7tOg/Khj8P7g5GUL34CnNjwc4a7ZQfLWa4/o6yk3PuHDvOVV9Tyh/5cMZz+YmH7D0K02TtEeFbx9170NUNVeoMHZxyqVQOrbBSesapWMyKlcctcVJpVZLiU7PsUd2TvtTNAb2eLmZYGM3k/8wpz/pLF9+p/CEtxgNyEyFYni2E9i2U4zHUji+J3mzlaR/9ht33AHuegNY5qNIP9P8zWQLv/4HLqBph4IzrWUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Astro 아일랜드 내의 UI 프레임워크\"\n        title=\"Astro 아일랜드 내의 UI 프레임워크\"\n        src=\"/static/735baf9bb577d08778b09cfe8bc0f4cd/37523/astro-island-2.png\"\n        srcset=\"/static/735baf9bb577d08778b09cfe8bc0f4cd/e9ff0/astro-island-2.png 180w,\n/static/735baf9bb577d08778b09cfe8bc0f4cd/f21e7/astro-island-2.png 360w,\n/static/735baf9bb577d08778b09cfe8bc0f4cd/37523/astro-island-2.png 720w,\n/static/735baf9bb577d08778b09cfe8bc0f4cd/302a4/astro-island-2.png 1080w,\n/static/735baf9bb577d08778b09cfe8bc0f4cd/07a9c/astro-island-2.png 1440w,\n/static/735baf9bb577d08778b09cfe8bc0f4cd/d38ac/astro-island-2.png 1744w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><em>클라이언트에서 렌더링 되는 아일랜드들</em></p>\n<h3 id=\"템플릿-지시어\" style=\"position:relative;\"><a href=\"#%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%A7%80%EC%8B%9C%EC%96%B4\" aria-label=\"템플릿 지시어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>템플릿 지시어</h3>\n<p>위에서 소개한 <code>client:*</code> 지시어는 Astro의 <a href=\"https://docs.astro.build/ko/reference/directives-reference/\">템플릿 지시어</a> 중 하나로, 요소나 컴포넌트의 동작을 제어하는 데 사용 됩니다. 기타 지시어에 대한 내용은 생략하고, <a href=\"https://docs.astro.build/ko/reference/directives-reference/#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%A7%80%EC%8B%9C%EC%96%B4\">클라이언트 지시어</a>만 중점적으로 살펴 보도록 하겠습니다.</p>\n<p><a href=\"https://docs.astro.build/ko/reference/directives-reference/#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%A7%80%EC%8B%9C%EC%96%B4\">클라이언트 지시어</a>는 컴포넌트가 페이지에서 hydration되는 방식을 제어합니다. 위에서 Selective 하이드레이션의 케이스만 이야기했는데, <code>client:visible</code>이나 <code>client:idle</code>를 통해 Progressive 하이드레이션을 제어 할 수 있습니다.</p>\n<table>\n<thead>\n<tr>\n<th>지시어</th>\n<th>우선순위</th>\n<th>로드 시점</th>\n<th>사용 상황</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>client:load</code></td>\n<td>높음</td>\n<td>페이지 로드 시 즉시</td>\n<td>즉시 표시되는 대화형 UI 요소</td>\n</tr>\n<tr>\n<td><code>client:media</code></td>\n<td>낮음</td>\n<td>특정 CSS 미디어 쿼리 충족 시</td>\n<td>특정 화면 크기에서만 표시되는 요소</td>\n</tr>\n<tr>\n<td><code>client:only</code></td>\n<td>-</td>\n<td>클라이언트에서만 렌더링</td>\n<td>서버 렌더링을 건너뛰어야 하는 컴포넌트</td>\n</tr>\n<tr>\n<td><code>client:visible</code></td>\n<td>낮음</td>\n<td>컴포넌트가 뷰포트에 들어갈 때</td>\n<td>페이지 하단의 리소스 집약적 요소</td>\n</tr>\n<tr>\n<td><code>client:idle</code></td>\n<td>중간</td>\n<td>페이지 초기 로드 완료 후</td>\n<td>즉시 상호작용이 불필요한 낮은 우선순위 UI</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h2>\n<p>Astro는 콘텐츠 중심의 정적 사이트 빌더로, 여러 UI 프레임워크를 혼합하여 사용할 수 있는 유연성을 제공합니다. 서버 우선 렌더링을 통해 SSG와 SSR의 장점을 결합하며, Selective 및 Progressive Hydration을 통해 효율적인 클라이언트 렌더링을 지원합니다. 이러한 기능들은 개발자가 대화형 UI 컴포넌트를 효과적으로 관리할 수 있도록 하고, 웹사이트의 성능을 향상시켜 빠른 로딩 시간과 우수한 사용자 경험을 제공합니다.</p>\n<p>이 글이 Astro와 Selective(Partial) / Progressive Hydration을  이해하는데 도움이 되었길 바랍니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.patterns.dev/react/progressive-hydration\">https://www.patterns.dev/react/progressive-hydration</a></li>\n<li><a href=\"https://www.patterns.dev/react/react-selective-hydration\">https://www.patterns.dev/react/react-selective-hydration</a></li>\n<li><a href=\"https://ajcwebdev.com/what-is-partial-hydration/\">https://ajcwebdev.com/what-is-partial-hydration/</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk14 { color: #F44747; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"date":"October 13, 2024","title":"Astro로 알아보는 Selective & Progressive Hydration","categories":"framework","author":"soobing"},"fields":{"slug":"/astro-hydration/"}},"prev":{"id":"c7c3d0a3-b722-541d-af79-dfa5fd9d9425","html":"<h2 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR;</h2>\n<p>Next.js에서 React 18 라이브러리를 사용하면서 <code>'use client'</code> 디렉티브 문제를 해결하기 위해 <a href=\"https://www.npmjs.com/package/rollup-plugin-preserve-use-client\"><strong>rollup-plugin-preserve-use-client</strong></a> 플러그인을 개발한 과정을 공유합니다.  <a href=\"https://github.com/Ephem/rollup-plugin-preserve-directives\">rollup-plugin-preserve-directives</a> 을 사용할 수 없었던 이유와, <code>preserveModules</code> 옵션을 <code>false</code>로 사용하면서 <em>클라이언트 컴포넌트</em>에만 <code>'use client'</code> 디렉티브를 유지할 수 있는 방법을 찾는 과정을 설명합니다.</p>\n<h2 id=\"1-개발하게-된-배경\" style=\"position:relative;\"><a href=\"#1-%EA%B0%9C%EB%B0%9C%ED%95%98%EA%B2%8C-%EB%90%9C-%EB%B0%B0%EA%B2%BD\" aria-label=\"1 개발하게 된 배경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 개발하게 된 배경</h2>\n<p>저는 React 18을 활용한 UI 라이브러리를 개발하여 npm 모듈을 만들었습니다. 이 UI 라이브러리를 활용하여 Next.js 프로젝트에서 사용하려던 중 아래와 같은 문제를 마주치게 되었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSUlEQVQoz21S246CUAw8n2CiEgVFUAwXEQgXN+Emifro/3/ObKab7rKbfWimFDpMpzVJHGMcR7Rti2EY8Hg80DQNsixDnue4XC6IoghpmiJJEsRxLO+YHw4H7HY77Pd7uK4Lx3Fg4igSoufzib7vhZgE+hFRm+ahNaLmtm3DVGWJru+/yaiuqirUdY2yLEUl1RVFIcqu16vUicfjUX7qeZ4ESY3tOOi6Dvf7XUjf7zfCMMRiscBqtcJyufyF83y9XsOyLMGvsGA+mkaIpmkShVRDJaqIz/SNSD/pnXoYBIEoo9LT6SRqzfl8FoUkJb5eL2nwfV8+ItJ8NrF5nm+3W2w2GwnNTZ5l4iGJSEj/ODKJ1BuSKGqu3tE3rXM5Zn42VMmzud1usgyOrSNzCTqynpMSkpyEDgnpA5XxbIj0kjUa/2P2/8GF/I1PUIwFwgf1bI0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"에러발생\"\n        title=\"에러발생\"\n        src=\"/static/5361149a6fd5a2d4037a692aa242033a/37523/1_error.png\"\n        srcset=\"/static/5361149a6fd5a2d4037a692aa242033a/e9ff0/1_error.png 180w,\n/static/5361149a6fd5a2d4037a692aa242033a/f21e7/1_error.png 360w,\n/static/5361149a6fd5a2d4037a692aa242033a/37523/1_error.png 720w,\n/static/5361149a6fd5a2d4037a692aa242033a/940c5/1_error.png 772w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<em>useState only works in Client Components… 에러 발생</em></p>\n<p>문제의 원인을 파악하다가, 처음에는 UI 라이브러리에 클라이언트 컴포넌트와 서버 컴포넌트를 분리하여 번들링하지 않아서 발생하는 문제라고 생각했습니다. 관련해서 아래와 같은 글을 참고했었습니다.</p>\n<ul>\n<li><a href=\"https://www.bekk.christmas/post/2023/19/keep-up-with-react-server-components-how-to-support-it-in-your-library\">How to support React Server Components in your library</a></li>\n</ul>\n<p>그러나 UI 라이브러리는 파일마다 청크를 생성하고 있었기 때문에 이는 잘못된 접근임을 알 수 있었습니다. 다시한번 에러 로그에 집중해서 문제의 원인을 찾기 위한 삽질을 하다보니, 아래와 같은 이슈를 확인할 수 있었습니다.</p>\n<ul>\n<li><a href=\"https://github.com/rollup/rollup/issues/4699\">‘use client’ directive for Client Components #4699</a></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVQ4y32SW48cNRCF5///HxQtQogovIB4IAglmiCyMz19m56++m53uz9k78yyeYAjHZVtWaeqTtVBKIMSmmmcWaRmnEWO0yKZhXo9p/d0T+fHm9QW6wPGeZR1OR7CuvLpdKSsStr2SlU3tNeOum5o2itN09J1N279iHWOhBh3YoyZCTY4vj9+YLGSg/GGd3/+RNHViFTBvCCERCqFkBJrLd4HUuJti+z7Ttx3dl6w7xD3iAk2x4MUgtOXZ5QydwGH84GYP75wiztbjFlw3SJh3XDO4ZRMkrzFIaVwwXOpa/4+V1wnjdSaRSYPEwWLEEzSMCub734NqBD5dNP0JrCGkCtPPGRPnKc5Hmm+nugvFWNZMl7e8kKfYllxOxeYumIYBe+Lha+DQmt1b/8uuBlD8/EPrscvuKYmdB3hemXtujtvxL5nH3riMBDbK+s8s6/+tdVvKkzeyGVhmabsy2YUXmusUhgpcVqnT/8yxuzzImR28EXs4eF9DZwzeQ30Bq2J6LCxxS1P9DHV/c0IvPdM05yH86jutcKknnZQLjPPs+XpLHnuF4xW+BBY1/WbthLSpFOF8yJQ2qCNzZ0eHp+SYFrkeRwx85jbn+YZbQzGWtbU6h3ql99wZY2PMe+pti4nyC1LsfDX589Mi2AYZ8YUZ4EyNmfVxmGsz575sOazGmeGYeTn9z/y9N07Pjz9wMfff8UE91Jh8qG4lBRFwbm4UBQXqqqmLKv8nmK6X8qK87ngNowY5zidztRVza1t6W8dIYT7UJKo1QRv2Lbtf7ne43/hH5mLNX7MorYcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이슈\"\n        title=\"이슈\"\n        src=\"/static/42ca8f13087fc5264b04b12e26e9ed90/37523/2_issue.png\"\n        srcset=\"/static/42ca8f13087fc5264b04b12e26e9ed90/e9ff0/2_issue.png 180w,\n/static/42ca8f13087fc5264b04b12e26e9ed90/f21e7/2_issue.png 360w,\n/static/42ca8f13087fc5264b04b12e26e9ed90/37523/2_issue.png 720w,\n/static/42ca8f13087fc5264b04b12e26e9ed90/302a4/2_issue.png 1080w,\n/static/42ca8f13087fc5264b04b12e26e9ed90/07a9c/2_issue.png 1440w,\n/static/42ca8f13087fc5264b04b12e26e9ed90/081ff/2_issue.png 2182w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<em>‘use client’ directive for Client Components issue #4699</em></p>\n<p><a href=\"https://github.com/0xcadams\"><strong>@0xcadams</strong></a>가 제기한 이슈 내용을 살펴보면,</p>\n<ul>\n<li><a href=\"https://nextjs.org/blog/next-13\">Next.js 13</a>의 클라이언트 컴포넌트는 React의 <a href=\"https://github.com/reactjs/rfcs/blob/main/text/0227-server-module-conventions.md#basic-example\">RFC 227</a>을 기반으로 클라이언트 전용 컴포넌트임을 표시하기 위해 <code>use client</code> 디렉티브가 필요합니다. 그러나 현재, Rollup을 사용한 빌드에서 모듈 수준의 디렉티브가 지원되지 않아 빌드 오류가 발생하고 있음을 이슈 제기하고 있습니다.</li>\n</ul>\n<p>이에 대해 <a href=\"https://github.com/lukastaegert\"><strong>@lukastaegert</strong></a>는,</p>\n<ul>\n<li><strong>번들링 시 여러 모듈이 경계 없이 하나의 청크로 합쳐지기 때문</strong>에 모듈 수준 디렉티브를 금지하고 있다고 설명합니다. <strong>모듈 수준 디렉티브를 허용할 경우, 청크 내 모든 모듈에 해당 디렉티브가 적용</strong>되어 문제가 발생할 수 있다는 점도 지적했습니다. 만약 이러한 디렉티브가 출력에 꼭 필요하다면, <strong>배너 옵션</strong>이나 <strong>플러그인 훅</strong>을 통해 추가할 것을 권장합니다.</li>\n</ul>\n<p>이 쓰레드를 쭉 읽다보면 <a href=\"https://github.com/Ephem\"><strong>@Ephem</strong></a>는 <a href=\"https://github.com/Ephem/rollup-plugin-preserve-directives\">ollup-plugin-preserve-directives</a> 플러그인을 만들어서 소개했고, 저도 이 플러그인을 통해 문제를 해결될 것이라는 부푼 기대감으로 시도를 해보았습니다.</p>\n<p>그러나, 위 플러그인은 Rollup의  <code>preserveModules: true</code> 설정을 필수로 요구하고 있습니다. 해당 옵션을 <code>true</code>로 설정하는 경우 directive는 정상적으로 보존되지만, <a href=\"https://www.npmjs.com/package/vite-plugin-lib-inject-css\">vite-plugin-lib-inject-css</a> 플러그인과 충돌이 일어나 모든 module.css의 링크가 끊기고 스타일이 제대로 적용되지 않는 새로운 이슈를 발생시켰습니다.</p>\n<p><a href=\"https://www.npmjs.com/package/vite-plugin-lib-inject-css\">vite-plugin-lib-inject-css</a>의 공식문서를 살펴보면 <code>preserveModules</code>가 <code>true</code>인 경우, <strong>청크와 참조된 CSS 간의 연관성이 어떤 이유로 인해 손실되며, 이 경우에도 스타일 주입이 생략</strong>된다고 설명하고 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAADYElEQVRIx41V2Y7aQBDc//+sPERRVqsERcTGNrAGfB/j8QkGXFE1jJfNbanU7WPKfdT0PEVRhOXyOyzLhm07sFcOXNeD43pwvbX4vr9DEMaIohhhGIFriJsfI7q/I5622y1s24ZuGgyRjzJNUGmNoihQ1zXSNEWeFwiyHEkSQ9c1yrJEWZTwCh9hEqHUBZIsRppmeLper8iyDJZtw7FtfF8u0fc9zDVN0w2YwG8vl8uM8XLG+XwWn5Z44iJGwkiDMMThcJD74/EoxMQwDOi6DqfTCf+6hLCqKqzXa+x2OwF9/oDWsix4nidlYfq8GOkc+U8QwnEcobWWyEhufH7wv9c7QqailBIiErLotEzT/MTYx/eEaR6jnlPmTdM0Qti2rdSNjQqCQORBf7/fC9HfIpwJmXKe57KQBHEcv0MYhvKeYB3ZOP6AoM8of4nQLGL6TJWdNR021vjMhN+SyKwxUQoh9cPomBJTZk0I+vyYGVBG9A3+lPbclK5t0TS1EBNJksjfSWzqS99YrjFiNuKeU75czlB1h1K3EgkjIriI97+DET3xKPp7DS8oVA0/quDHGllZC5S6yaIslYAyUZSNUsiLUvY8Lb9jAO8Ic1XjNeuwy1qUdYv+OOA4jhjGEwaxI4bTaW7Oz3gjnIDLNKFXCvsPzzh8fEH86QvUywL581fUXxbQLy/Qn59RWxZ0c2uakh1VS5SMmGm/1fB6Ra1K6EOAKkpRBgl0mKAKYzRRgiaK0IQh2jRF23XSfTbqZm8/6IfhgfB8Rtf1GK9XnA2mK66YxOfz/08ZkK5Rg0aw9PP71ivyHKosRRbcAH/DTFhrDcdx8Pr6Knaz2cB1XSwWC7ieJ8/Pd51N/5g4N2GPoxS5UupW5KKAolwYLfdwmiJLkhlJGIqNggAJz5fDAcf7lL8Rti10lknqXd+jJpllQa1WKCwLhW2jtO35njZbLpF8+wbtukhp9/sHwqGHLop5uMr2altU3Grcdo+Wc5Gy4Xd3+TRtK0qZCSmBzXYro561o1173nwvdV2vxbqOI8dDyFkZhjKlOOLIMRNST77vyxlCsCnenZBniQHPl9VqNTeO73lP0nfClgg3m/lw4gIOTk6cx4FLn8+MTyJac1K+1fB0mpXPP7GGnCJ/mjS/gxH2D8BXDPtW0MikAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vite-plugin-lib-inject-css\"\n        title=\"vite-plugin-lib-inject-css\"\n        src=\"/static/b8a3c70b09d8dffc8559f24da5f5d09a/37523/3_injectcss.png\"\n        srcset=\"/static/b8a3c70b09d8dffc8559f24da5f5d09a/e9ff0/3_injectcss.png 180w,\n/static/b8a3c70b09d8dffc8559f24da5f5d09a/f21e7/3_injectcss.png 360w,\n/static/b8a3c70b09d8dffc8559f24da5f5d09a/37523/3_injectcss.png 720w,\n/static/b8a3c70b09d8dffc8559f24da5f5d09a/302a4/3_injectcss.png 1080w,\n/static/b8a3c70b09d8dffc8559f24da5f5d09a/d4b10/3_injectcss.png 1394w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<em>vite-plugin-lib-inject-css 플러그인 옵션</em></p>\n<p>결국 모든 파일을 entry로 설정하여 preserveModules를 우회하는 방법을 설명하며, 해당 옵션은 필수적으로 <code>false</code>로 설정해야 정상적으로 css가 연결됨을 확인 할 수 있었습니다.</p>\n<p>이에 <code>preserveModules</code> 옵션을 <code>false</code>로 사용하면서 클라이언트 컴포넌트에 한해 <code>\"use client\"</code> 디렉티브를 주입하는 플러그인을 직접 개발하기로 결심했습니다.</p>\n<h2 id=\"2-rollup-플러그인-개발을-위한-지식\" style=\"position:relative;\"><a href=\"#2-rollup-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%A7%80%EC%8B%9D\" aria-label=\"2 rollup 플러그인 개발을 위한 지식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Rollup 플러그인 개발을 위한 지식</h2>\n<h3 id=\"플러그인-개념과-컨벤션\" style=\"position:relative;\"><a href=\"#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EA%B0%9C%EB%85%90%EA%B3%BC-%EC%BB%A8%EB%B2%A4%EC%85%98\" aria-label=\"플러그인 개념과 컨벤션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://rollupjs.org/plugin-development/#plugins-overview\"><strong>플러그인 개념과 컨벤션</strong></a></h3>\n<p>Rollup 플러그인은 properties, build hooks, output generation hooks 중 하나 이상을 포함하는 <strong>객체</strong>입니다. 그래서 작성한 코드를 살펴보면 Plugin 객체를 리턴하는 간단한 함수임을 확인할 수 있습니다.</p>\n<p>또한, 작성한 플러그인은 공식문서에서 제공하는 <a href=\"https://rollupjs.org/plugin-development/#conventions\">컨벤션</a>을 따라야 합니다. 간략하게 소개하면 아래와 같습니다.</p>\n<ul>\n<li>플러그인 이름은 <code>rollup-plugin-</code> 접두사를 사용하여 명확하게 지어야 합니다.</li>\n<li><code>package.json</code>에 <code>rollup-plugin</code> 키워드를 포함해야 합니다.</li>\n<li>플러그인은 테스트되어야 하며 mocha 또는 ava 사용을 권장합니다.</li>\n<li>문서는 영어로 작성해야 합니다.</li>\n</ul>\n<h3 id=\"build-hooks\" style=\"position:relative;\"><a href=\"#build-hooks\" aria-label=\"build hooks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://rollupjs.org/plugin-development/#build-hooks\"><strong>Build Hooks</strong></a></h3>\n<p>Rollup은 번들링 과정에서 여러 단계에 걸쳐 다양한 빌드 훅을 제공합니다. 빌드 훅은 Rollup이 번들링을 시작하고 종료하는 과정의 특정 지점에서 호출되며, 플러그인을 통해 이 단계들을 커스터마이징할 수 있습니다. 주요 빌드 훅은 다음과 같습니다.</p>\n<ul>\n<li><code>buildStart</code>: 번들링이 시작될 때 호출되며, 초기화 작업을 수행할 수 있습니다.</li>\n<li><code>resolveId</code>: 모듈 ID를 해결할 때 호출되며, 사용자 정의 모듈 로딩을 구현할 수 있습니다.</li>\n<li><code>transform</code>: 각 모듈을 번들에 포함하기 전에 호출되어 코드를 수정할 수 있습니다.</li>\n<li><code>moduleParsed</code>: 모듈이 파싱된 후 호출되며, 모듈의 메타데이터를 사용할 수 있습니다.</li>\n<li><code>buildEnd</code>: 번들링이 완료된 후 호출되며, 정리 작업을 수행할 수 있습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 136.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAABYlAAAWJQFJUiTwAAADQ0lEQVRIx41VaW/bOBD1//8XXRRt2qIH9ltaIMAWaIugKJI0CFo3cR3JtmSdpg5SpETpLYY2uT7ibAmMRWrIpzdvhuNRWxaIfB9hFKOVEkkUoaoq0Bj6HsMwHJjxbZ77Y6R4hoV3h2zFoLVGIyVarfHYOAZmAIehX8+0hmYMPWMYlIImy3NjvVToOwVd5ei79nGG1sHnc9y/eoXps2dgkwlEGGJ6coLp8+eo/RnKyMPv0yfgWfhngH3fo1PKGM2H/TWAUggbM44FPfo/TezgQQDvyxfINP0zhg9l01i/1ji/vIT38gXK8dhVwEPAjwKa95ah6jCLcyjdP0pgtO18qDwsE5be4cfFGxS5d8Bs+/xo30G12LatM6UU2k6jXE2x9P7Brx9fkSQZmkZACIGu63bOO4b2MG0gUL1X3LSczSNEcYqmacA5N3vpSeYY0g85tr+0FbQrIalaeLfvEc6ujK68rv+rgA24AyR228mhNecCXAgwViBJUqxYgVV6j7l/CyEapEniQLZDPwCkcMj05oolSYQoCh0bKdfaMsZMEyFpHgSk0OI4xmw2R9c2CKanmP16A+/na/jjt/h98xJL7wxKSfi+j+vrayyXS6P7UYbErCwKDL1GwxOk8RSrzEeW3KMqAvAqRlEUyLIcaZq6aEhDAnaANqP9MEDpdehlWaMo1sKrVptEULgXF5fwPM8BELvFYmHYOkD6aiMVGpZi/v0TFuMrSCndPanrGlVVOo3JR6zofZZlKMtyN+QkjlFWNZoshPfpbyTjbzvFQx+kJBhAIaAIsK6R5zmCIDA+G+XIti47aCYa6XRRm/ZFoRFf4iG6DnITMulPjHcY2kPU56zRmjZa4ZMsw93ZGZYfPiA4PUVbVaAuKTg/XjaOZd+760cbzZXUGsVkgvD8HNOPH8ELBmqzRtOmOQ5IDlrbO73fiWiWMIZ7f4YoSlHVAmXFofVwCEgZC8MQR3ukuddr8dPgHLdXf2F++w7+zxNky6+7SaGwiD5dp+3wj41WMlTMx8K/QVX4Zn3wJ0UhEjDfCE0fMJnmHJIxKBJ/0y87PUAqjRWrsGniu/1wv1NbLYVS8D5/xuTpUyxvboyGVtvtNmf74b9heTMJIBFiZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Build Hooks\"\n        title=\"Build Hooks\"\n        src=\"/static/5e4d92bd1bd610220f9f984938491116/37523/4_build_hooks.png\"\n        srcset=\"/static/5e4d92bd1bd610220f9f984938491116/e9ff0/4_build_hooks.png 180w,\n/static/5e4d92bd1bd610220f9f984938491116/f21e7/4_build_hooks.png 360w,\n/static/5e4d92bd1bd610220f9f984938491116/37523/4_build_hooks.png 720w,\n/static/5e4d92bd1bd610220f9f984938491116/302a4/4_build_hooks.png 1080w,\n/static/5e4d92bd1bd610220f9f984938491116/f213e/4_build_hooks.png 1192w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<em>Build Hooks 과정</em></p>\n<h3 id=\"output-generation-hooks\" style=\"position:relative;\"><a href=\"#output-generation-hooks\" aria-label=\"output generation hooks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://rollupjs.org/plugin-development/#output-generation-hooks\">Output Generation Hooks</a></h3>\n<p>출력 생성 단계는 번들을 생성하고 최종 출력을 준비하는 중요한 과정으로, 이 단계에서도 다양한 훅이 호출됩니다. 출력 생성 훅을 통해 번들이 만들어지는 방식과 최종 결과물을 커스터마이징할 수 있습니다. 주요 출력 생성 훅은 다음과 같습니다.</p>\n<ul>\n<li><code>renderStart</code>: 출력 생성이 시작되기 전에 호출됩니다.</li>\n<li><code>banner</code>: 번들의 맨 앞부분에 배너를 추가할 때 사용됩니다.</li>\n<li><code>renderChunk</code>: 각 청크가 렌더링될 때 호출되며, 청크의 내용을 수정할 수 있습니다.</li>\n<li><code>generateBundle</code>: 번들이 생성된 후 호출되며, 최종 번들에 대한 추가 작업을 수행할 수 있습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 193.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAnCAYAAAAPZ2gOAAAACXBIWXMAABYlAAAWJQFJUiTwAAADu0lEQVRIx6VWa2/bNhT1//8b7Yd2GNoNw7AN27KsC5A2zbp2aOMhSWVHthbJelOkKD6kM5B6QHasuMkIEJJN3sNz7z33UrNGaZRZjoJSaK3BOQdjDE3TwAz73J3tAvaNmRYc66s53JUHYoCjCFEUD2BN/2zqbo4O2gfY1BJx6IFShrqu0dS1fVqjCcMpMAs4tdCyag35zRzJ+99ALk7RCH6AYWe4O8dGIlgi+ecM3L1AI8X9gDgwekOSF6N8tLF9MGAPVlxdYfH0KaJXv6M+mJTRhinXS0pxPZ8jDoK9e8cHdDFsdTXesDvSLIPS+mACZ/t0pbWCEMIKPEkSxHGM5dIFLSiUUpBS2iIwc2xn3gdASkt4ax/+7QYkN0AZ8jxHVVVWl2XJbRWZYX4b4B7czBHDVsQyc+BdvID78RsEl99B5c6WW4axmfsSYpga0G2XRQZVLKCZC0kc1FXalW6XmLK0bPfFzswB8FAp2c1KIktz+LcBlGpdNO5u7bnDcKsBtGEwRpRSy26z2WCxWMB1XeRZG1uz1sdvi+GUoE2W+0ZR1xpJnKIoii01GND+8HsBDaZhRhnHrR9htfZRVcKWXJwQkIIPh6ZpivV6bZMzzbBpwMoKinrYOL8iWhwBmkORhf29WRyBRx9Rdl70CZvtls94lryCZgGS1RvEN6eAriCJi3R9huzfc5TRJRhlrez2JWW3rWdZNrxLZdwrIVUNygQI4aiERtVpc69szNNQF1Vlyy0IQoRhiKIgkFJYo1pr0KJAmmY2ZpOyKTlHkqZ2YROGQ0zMuqnnPCe29LKc7BX3Hdm4r39A8Ok1dMXgHD2DpOlgFHw6RXT1FzSncI6/huR06+bbZtjXapGgSDaoeAmy8VAyOoRClQSCESgpUIS3aGpt5dM3CRuKTq+zcTJ03UAICcYrqy0TP9NxPM+38aSMQSjTCNr2ZsDGLcy2r0NXozG0iSHEXqxT+3Y6djPd2gFsohhxmh28KrYYTrV0Fq5w/epbrP40lSL/30VvRlWkiK4/wJu/A6PF4U+R+8BsK5MCJE0RBT58bz10lQcD2u2CI3nzPW6Pn8M/fobK+TAc9DCXe4adtrRUUFa4zSNdHhmU4QrB/AzR5TvIsriTtF3gg1mOP/+N9fnP8M5/Ac+iOyBfBLi7WdSAaPBF34kHZVOuV/j81XOsfvoRylxWf5xg9fIl2I37MIZDY2AMZLkE8/1Wl1GEzHGgusvpUS7b7h2GSJZLJB3wo13upRO9fQvnyRMEJydb/+8y/A/LPO71AyuImQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Output Generation Hooks\"\n        title=\"Output Generation Hooks\"\n        src=\"/static/03046906712457e720c5efd07ac6f185/37523/5_output_generation_hooks.png\"\n        srcset=\"/static/03046906712457e720c5efd07ac6f185/e9ff0/5_output_generation_hooks.png 180w,\n/static/03046906712457e720c5efd07ac6f185/f21e7/5_output_generation_hooks.png 360w,\n/static/03046906712457e720c5efd07ac6f185/37523/5_output_generation_hooks.png 720w,\n/static/03046906712457e720c5efd07ac6f185/774b6/5_output_generation_hooks.png 738w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<em>Output Generation Hooks 과정</em></p>\n<h2 id=\"3-플러그인-개발\" style=\"position:relative;\"><a href=\"#3-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EA%B0%9C%EB%B0%9C\" aria-label=\"3 플러그인 개발 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 플러그인 개발</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACPklEQVQ4y3WU2ZLbIBBF54fnIb+Wt/mGvGcmS5WTuGxJ1oaExCq4qds2jjxTwXWr20Af6Ab01LUdjFkxz7NYa62I/rr+X8uyIISAt9dXfHp+xueXFwxmxVNKCdY5qElD6xXLukAvK1YbAGSknME5OWfwRx/0b338T3CMUfwnALDrhPr0DUN3xNBe0PcdQspAAlK8BoawIfgNGYCPmyyUYxTtmwC9URiqr1DtAcP5jK46QfU9qkOFsR6QfMYyBSwqwNiI0XisYUNk2tOEtF0X4sIC7IcBr2/f8ev3HwzDgHEcoZQSy3ruG9ML3sM5B+c9vPfXMuyBDLpcGqhxfCi61loOa5omsSll6acIZJx3TkAPQGOM7Kzv+/vu9iKYEDaOc15ZiGMfgJx0PB4lyN/SkJScu//nbpgaAeznXEJZgg9ADpxOJ1RVhfP5fLfso+hzQWZCcYFt2wRWQB9SbpoGXddJOhR9lqFtWxF9QqRuN2DZdYHdgTyEuq4lkGAC9wdCn2Kwu51q2eF+dw8pHw4HCS6TaYvKZDY9z1Lz0vZjd6CzVmAsdLkixfKUy+Ew4MvPHzDO/buYGQ91FOAwjqib5v4uqVKb963VCiZaLEZjdQt88kj53cWO3mORlzGIlBpheblXg3m5Wr0YhMB3mxDtiuXSwM4Km7fIaXsEemPRnRt0dYu+Uxj7CWqYoKYZ06wxa41pmiXt26PdpZyvX5+bL8AQI4zjBY7wLoic84ghYItRPk3l81TKVg4jlzLe/L8+NidMRAromgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rollup-plugin-preserve-use-client\"\n        title=\"rollup-plugin-preserve-use-client\"\n        src=\"/static/d0c95547c5236d2c39cee927df0989e1/37523/6_rollup_plugin_preserve_use_client.png\"\n        srcset=\"/static/d0c95547c5236d2c39cee927df0989e1/e9ff0/6_rollup_plugin_preserve_use_client.png 180w,\n/static/d0c95547c5236d2c39cee927df0989e1/f21e7/6_rollup_plugin_preserve_use_client.png 360w,\n/static/d0c95547c5236d2c39cee927df0989e1/37523/6_rollup_plugin_preserve_use_client.png 720w,\n/static/d0c95547c5236d2c39cee927df0989e1/302a4/6_rollup_plugin_preserve_use_client.png 1080w,\n/static/d0c95547c5236d2c39cee927df0989e1/07a9c/6_rollup_plugin_preserve_use_client.png 1440w,\n/static/d0c95547c5236d2c39cee927df0989e1/f291a/6_rollup_plugin_preserve_use_client.png 2258w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<em>rollup-plugin-preserve-use-client 플러그인 완성✨</em></p>\n<p>플러그인을 개발하기 전, <code>preserveModules</code> 옵션을 <code>false</code>로 사용하면서 클라이언트 컴포넌트에만 <code>'use client'</code> 디렉티브를 유지하는 것이 목표로 삼았습니다. 이를 위해 Rollup의 훅을 어떻게 활용할지, 그리고 디렉티브를 탐지하고 유지하는 방법과 위에서 살펴본 <a href=\"https://github.com/rollup/rollup/issues/4699\">#4699</a> 이슈의 <a href=\"https://github.com/lukastaegert\"><strong>@lukastaegert</strong></a> <strong>우려를 최소화 할 수 있는 방법</strong>이 무엇일지 고민했습니다.</p>\n<p>이에 적용한 방법은 아래와 같습니다.</p>\n<p><strong>1. <code>moduleParsed</code> 훅을 통한 초기 모듈 식별</strong></p>\n<ul>\n<li><code>moduleParsed</code> 훅을 통해 Rollup이 각 모듈을 파싱할 때 <code>'use client'</code> 디렉티브가 포함된 모듈을 식별하고, 해당 모듈의 ID를 <code>useClientFiles</code>라는 집합(Set)에 저장합니다.</li>\n<li>이렇게 하면 <code>'use client'</code> 디렉티브가 필요한 모듈들을 미리 식별하여 저장합니다.</li>\n</ul>\n<p><strong>2. <code>generateBundle</code> 훅을 통한 청크별 모듈 검사</strong></p>\n<ul>\n<li><code>generateBundle</code> 훅에서는 최종 생성된 각 청크를 순회하며, 청크에 포함된 모든 모듈의 ID를 검사합니다. 여기서 청크에 포함된 모듈 ID 중 하나라도 <code>useClientFiles</code>에 포함된 ID가 있다면, 그 청크 상단에만 <code>'use client';</code> 지시문을 추가합니다.</li>\n<li>이 방식은 <strong>필요한 청크에만</strong> <code>'use client'</code>를 삽입하므로, 불필요하게 모든 청크에 일괄적으로 지시문이 추가되는 일을 방지합니다.</li>\n</ul>\n<p>제가 작성한 플러그인 코드는 아래와 같으며, <a href=\"https://tsup.egoist.dev/\"><code>tsup</code></a>을 사용해 빠르게 번들링하고 npm에 배포해 보았습니다.</p>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/rollup-plugin-preserve-use-client\"><strong>rollup-plugin-preserve-use-client</strong></a></li>\n<li><a href=\"https://github.com/soobing/rollup-plugin-preserve-use-client#readme\"><strong>github repo</strong></a></li>\n</ul>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">type</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">Plugin</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;rollup&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">preserveUseClientDirective</span><span class=\"mtk1\">(): </span><span class=\"mtk10\">Plugin</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">useClientFiles</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Set</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">string</span><span class=\"mtk1\">&gt;();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">name:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;preserve-use-client-directive&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">moduleParsed</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">ast</span><span class=\"mtk1\">, </span><span class=\"mtk12\">id</span><span class=\"mtk1\"> }) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">ast</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">ast</span><span class=\"mtk1\">.</span><span class=\"mtk12\">body</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">ast</span><span class=\"mtk1\">.</span><span class=\"mtk12\">body</span><span class=\"mtk1\">[</span><span class=\"mtk7\">0</span><span class=\"mtk1\">]?.</span><span class=\"mtk12\">type</span><span class=\"mtk1\"> === </span><span class=\"mtk8\">&#39;ExpressionStatement&#39;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">expression</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">ast</span><span class=\"mtk1\">.</span><span class=\"mtk12\">body</span><span class=\"mtk1\">[</span><span class=\"mtk7\">0</span><span class=\"mtk1\">].</span><span class=\"mtk12\">expression</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">expression</span><span class=\"mtk1\">.</span><span class=\"mtk12\">type</span><span class=\"mtk1\"> === </span><span class=\"mtk8\">&#39;Literal&#39;</span><span class=\"mtk1\"> &amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">expression</span><span class=\"mtk1\">.</span><span class=\"mtk12\">value</span><span class=\"mtk1\"> === </span><span class=\"mtk8\">&#39;use client&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">useClientFiles</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk12\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">generateBundle</span><span class=\"mtk1\">(</span><span class=\"mtk12\">options</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bundle</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [, </span><span class=\"mtk12\">fileData</span><span class=\"mtk1\">] </span><span class=\"mtk4\">of</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Object</span><span class=\"mtk1\">.</span><span class=\"mtk11\">entries</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bundle</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">fileData</span><span class=\"mtk1\">.</span><span class=\"mtk12\">type</span><span class=\"mtk1\"> === </span><span class=\"mtk8\">&#39;chunk&#39;</span><span class=\"mtk1\"> &amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">fileData</span><span class=\"mtk1\">.</span><span class=\"mtk12\">moduleIds</span><span class=\"mtk1\">.</span><span class=\"mtk11\">some</span><span class=\"mtk1\">((</span><span class=\"mtk12\">id</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">useClientFiles</span><span class=\"mtk1\">.</span><span class=\"mtk11\">has</span><span class=\"mtk1\">(</span><span class=\"mtk12\">id</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">fileData</span><span class=\"mtk1\">.</span><span class=\"mtk12\">code</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">`&#39;use client&#39;;</span><span class=\"mtk6\">\\n</span><span class=\"mtk4\">${</span><span class=\"mtk12\">fileData</span><span class=\"mtk1\">.</span><span class=\"mtk12\">code</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h3 id=\"4-마무리\" style=\"position:relative;\"><a href=\"#4-%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"4 마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 마무리</h3>\n<p>Rollup 플러그인을 직접 개발해보니, 번들링 과정에 대해 깊이 이해할 수 있었습니다. 플러그인 개발이 매우 어렵고 특별한 지식이 필요할 거라 생각했지만, 실제로 플러그인은 간단한 함수이며 Rollup에서 제공하는 다양한 훅을 활용하면 원하는 기능을 쉽게 구현할 수 있음을 경험할 수 있었습니다. 오랜만에 오픈소스에 기여하게 되어 기쁘고, 이 코드가 많은 사람에게 유용하게 쓰이길 바라는 기대감과 테스트 코드도 하루빨리 추가해야겠다는 숙제를 남겨두며 이 글을 마칩니다.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk6 { color: #D7BA7D; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"date":"November 10, 2024","title":"Rollup Plugin 개발기","categories":"bundler","author":"soobing"},"fields":{"slug":"/rollup-plugin-development/"}},"site":{"siteMetadata":{"siteUrl":"https://soobing.github.io","comments":{"utterances":{"repo":"soobing/soobing.github.io"}}}}},"pageContext":{"slug":"/typescript-eslint-handling-intentionally-ignored-variables/","nextSlug":"/astro-hydration/","prevSlug":"/rollup-plugin-development/"}},
    "staticQueryHashes": ["1073350324","2938748437"]}