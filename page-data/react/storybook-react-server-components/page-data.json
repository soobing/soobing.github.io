{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/react/storybook-react-server-components/",
    "result": {"data":{"cur":{"id":"58264c91-e987-58ac-bdca-a1b62261eb7d","html":"<blockquote>\n<p>원문: <a href=\"https://storybook.js.org/blog/storybook-react-server-components/\">https://storybook.js.org/blog/storybook-react-server-components/</a></p>\n</blockquote>\n<blockquote>\n<p>스토리북 8.0 알파 업그레이드를 통한 스토리북에서 RSC 사용</p>\n</blockquote>\n<p><a href=\"https://nextjs.org/docs/app/building-your-application/rendering/server-components?ref=storybookblog.ghost.io\">리액트 서버 컴포넌트 (RSC)</a>는 리액트 기반 웹 UI의 새로운 프로그래밍 모델입니다.  기존의 전통적인 리액트 “클라이언트” 컴포넌트와 달리, 서버에서만 렌더링됩니다. 이는 다양한 성능 및 보안 이점을 가져오지만, 기존의 리액트 도구 및 라이브러리와는 크게 다릅니다.</p>\n<p>가장 크게 영향을 받는 부분 중 하나는 컴포넌트 기반 개발 및 테스트입니다. 스토리북, 테스팅 라이브러리 및 Playwright/Cypress와 같은 컴포넌트 테스팅과 같은 도구들은 사용자의 컴포넌트가 브라우저 (또는 JSDom)에서 렌더링되고 있다고 가정합니다. 그러나 서버 컴포넌트의 경우, 이러한 가정이 성립하지 않습니다.</p>\n<p>이로 인해, 서버를 위한 격리된 컴포넌트 개발 및 테스트를 수행하는 것이 무엇을 의미하는가? 라는 의문이 생깁니다.</p>\n<p>오늘은 이 질문에 대한 실험적인 답변으로 Next.js 프레임워크에서 스토리북의 RSC 지원을 공식적으로 발표하게 되어 기쁩니다. 이것은 완전히 클라이언트 측 구현이므로, 스토리북 애드온과 인테그레이션의 모든 생태계와 호환이 가능합니다.</p>\n<p>이것이 어떻게 작동하는지, 사용하는지, 그리고 지금 바로 사용해 볼 수 있는 방법에 대해 알아보고 싶다면 계속 읽어보세요!</p>\n<h2 id=\"화성에서-온-서버-금성에서-온-클라이언트\" style=\"position:relative;\"><a href=\"#%ED%99%94%EC%84%B1%EC%97%90%EC%84%9C-%EC%98%A8-%EC%84%9C%EB%B2%84-%EA%B8%88%EC%84%B1%EC%97%90%EC%84%9C-%EC%98%A8-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8\" aria-label=\"화성에서 온 서버 금성에서 온 클라이언트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>화성에서 온 서버, 금성에서 온 클라이언트</h2>\n<p>RSC는 기존의 클라이언트 컴포넌트와 두 가지 주요 차이점이 있으며, 다음 예제에서 이에 대해 보여주고 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// ApiCard.tsx</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">ComponentProps</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">Card</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./Card&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">findById</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./db&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">DbCard</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">id</span><span class=\"mtk1\"> }: {</span><span class=\"mtk12\">id</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">props</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">contact</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">findById</span><span class=\"mtk1\">(</span><span class=\"mtk12\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">props</span><span class=\"mtk1\"> = { </span><span class=\"mtk12\">state:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;success&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">contact</span><span class=\"mtk1\"> };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk15\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">props</span><span class=\"mtk1\"> = { </span><span class=\"mtk12\">state:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;error&#39;</span><span class=\"mtk1\"> };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Card</span><span class=\"mtk1\"> </span><span class=\"mtk4\">{</span><span class=\"mtk1\">...</span><span class=\"mtk12\">props</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ol>\n<li>첫 번째 차이점은 컴포넌트가 <code>async</code> 라는 점인데, 이것은 클라이언트에서는 지원되지 않는 기능입니다.</li>\n<li>두 번째 차이점은 컴포넌트가 Node 코드에 직접 액세스할 수 있다는 것인데, 위의 경우에서는 인증된 데이터베이스 연결을 래핑하는 <code>findById</code> 함수에 액세스하고 있습니다.</li>\n</ol>\n<p>RSC는 이러한 두 가지 차이점을 구현하기 위해 내부적으로 많은 작업을 수행합니다. 이 코드는 서버에서만 실행되며 클라이언트로 스트리밍되는 정적 JSON과 유사한 구조를 생성합니다.</p>\n<p>Storybook은 순수 클라이언트 애플리케이션입니다. Node가 전혀 없는 순수한 HTML/CSS/JS의 정적 빌드를 생성합니다! 따라서 RSC를 지원하려면 RSC를 클라이언트에서 렌더링하거나 Storybook을 서버용으로 다시 설계하는 방법을 찾아야 합니다.</p>\n<p>우리는 먼저 클라이언트 접근 방식에 중점을 두어 시작했습니다. 현재 아키텍처를 기반으로 수백 개의 애드온과 수백만 개의 스토리를 작성한 사용자에게 미치는 영향을 최소화하고 싶습니다.</p>\n<p>어떻게 클라이언트에서 동작하게 할 수 있었을까요?</p>\n<h2 id=\"비동기로-처리하기\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EB%8F%99%EA%B8%B0%EB%A1%9C-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"비동기로 처리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>비동기로 처리하기</h2>\n<p>RSC를 클라이언트에서 렌더링하는 데, 첫 번째 과제는 async 컴포넌트를 지원하는 방법을 알아내는 것입니다. 이미 Next.js의 canary 리액트 버전에서 <a href=\"https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md?ref=storybookblog.ghost.io#why-cant-client-components-be-async-functions\">비공식적으로</a> 지원되고 있습니다. 이 간단한 솔루션에 기여한  <a href=\"https://github.com/JamesManningR?ref=storybookblog.ghost.io\">JamesManningR</a> 및 <a href=\"https://github.com/julRuss?ref=storybookblog.ghost.io\">julRuss</a>에게 특별한 감사를 전합니다!</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"jsx\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">Suspense</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ClientContact</span><span class=\"mtk1\"> = ({ </span><span class=\"mtk12\">id</span><span class=\"mtk1\"> }) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Suspense</span><span class=\"mtk17\">&gt;&lt;</span><span class=\"mtk10\">DbCard</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">id</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;&lt;/</span><span class=\"mtk10\">Suspense</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">);</span></span></span></code></pre>\n<p>Storybook 8에서부터 <code>@storybook/nextjs</code>는 <code>.storybook/main.js</code> 파일에서 <code>experimentalNextRSC</code> 기능 플래그를 사용하여 스토리를 <code>Suspense</code>로 감싸줄 수 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"jsx\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// .storybook/main.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">features:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">experimentalNextRSC:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>7.x 버전의 <code>@storybook/nextjs</code>에서도 RSC 스토리를 <a href=\"https://storybook.js.org/docs/writing-stories/decorators/?ref=storybookblog.ghost.io\">데코레이터</a>로 래핑하여 수동으로 이 작업을 수행할 수도 있습니다.</p>\n<p><strong>참고</strong>: 이 솔루션은 Next.js의 canary 버전 이외의 다른 Storybook React 프레임워크 (예: <code>react-vite</code>, <code>react-webpack5</code>)에서는 아직 작동하지 않습니다. 다음 버전에서는 이러한 제한이 해제되기를 바랍니다.</p>\n<h2 id=\"모킹-및-로딩\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%ED%82%B9-%EB%B0%8F-%EB%A1%9C%EB%94%A9\" aria-label=\"모킹 및 로딩 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모킹 및 로딩</h2>\n<p>비동기 문제를 해결하는 것은 절반의 성공에 불과합니다. <code>DbCard</code> 컴포넌트는 데이터를 가져와 컴포넌트를 채우는 Node 코드를 참조합니다. 이것은 브라우저에서 Node 코드를 실행할 수 없는 문제가 있습니다!</p>\n<p>차선책으로 이 문제를 해결하기 위해서는, 깔끔한 데이터 액세스 계층 구축이 필요합니다. 이것은 또한 <a href=\"https://nextjs.org/blog/security-nextjs-server-components-actions?ref=storybookblog.ghost.io\">RSC의 설계자가 추천하는 최상의 권장 방법</a>입니다.</p>\n<p>데이터 액세스 계층이 있으면, 브라우저에서 실행할 수 있도록 모킹할 수 있고 데이터를 정확하게 제어하여 다양한 UI 상태(로딩, 오류, 성공, 등)를 테스트할 수 있습니다.</p>\n<p>데이터 액세스 계층을 모킹하기 위해서는 Storybook에서 지원하는 <strong>모듈 모킹</strong> 또는 <strong>네트워크 모킹</strong>를 사용할 수 있습니다.</p>\n<p><strong>모듈:</strong> <code>jest.mock</code> 스타일의 목을 제공하는 <a href=\"https://storybook.js.org/addons/storybook-addon-module-mock?ref=storybookblog.ghost.io\">storybook-addon-module-mock</a> 커뮤니티 애드온이 있습니다(웹팩 프로젝트에서만 지원). 더 간단하지만 더 제한적인 해결책으로 <a href=\"https://webpack.js.org/configuration/resolve/?ref=storybookblog.ghost.io#resolvealias\">webpack</a>/<a href=\"https://vitejs.dev/config/shared-options?ref=storybookblog.ghost.io#resolve-alias\">vite</a> 별칭을 사용할 수도 있습니다. 향후 버전의 Storybook에서 모듈 모킹을 더 효율적으로 제공할 계획입니다.</p>\n<p><strong>네트워크 API:</strong> 네트워크 요청을 모킹하기 위해 <a href=\"https://storybook.js.org/addons/msw-storybook-addon?ref=storybookblog.ghost.io\">Mock Service Worker (msw)</a>를 추천합니다. Storybook은 다양한 <a href=\"https://storybook.js.org/integrations/tag/mocking/?ref=storybookblog.ghost.io\">네트워크</a>와 <a href=\"https://storybook.js.org/integrations/tag/graphql?ref=storybookblog.ghost.io\">GraphQL</a> 모킹 애드온을 지원합니다.</p>\n<p>우리의 예제로 돌아와서, <code>storybook-addon-module-mock</code>을 사용한 스토리는 다음과 같습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"jsx\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// DbCard.stories.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">StoryObj</span><span class=\"mtk1\">, </span><span class=\"mtk12\">Meta</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@storybook/react&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">createMock</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;storybook-addon-module-mock&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">DbCard</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./DbCard&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">*</span><span class=\"mtk1\"> </span><span class=\"mtk15\">as</span><span class=\"mtk1\"> </span><span class=\"mtk12\">db</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./db&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">component:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">DbCard</span><span class=\"mtk1\"> };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Success</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  args: { id: </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  parameters: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    moduleMock: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      mock: () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">mock</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">createMock</span><span class=\"mtk1\">(</span><span class=\"mtk12\">db</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;findById&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">mock</span><span class=\"mtk1\">.</span><span class=\"mtk11\">mockReturnValue</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">.</span><span class=\"mtk11\">resolve</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">name:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;Beyonce&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">img:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;https://blackhistorywall.files.wordpress.com/2010/02/picture-device-independent-bitmap-119.jpg&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">tel:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;+123 456 789&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">email:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;b@beyonce.com&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">mock</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2 id=\"api--모듈-모킹의-전체-데모\" style=\"position:relative;\"><a href=\"#api--%EB%AA%A8%EB%93%88-%EB%AA%A8%ED%82%B9%EC%9D%98-%EC%A0%84%EC%B2%B4-%EB%8D%B0%EB%AA%A8\" aria-label=\"api  모듈 모킹의 전체 데모 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API + 모듈 모킹의 전체 데모</h2>\n<p>데이터베이스의 모듈 모킹 버전과 MSW2로 모킹된 API 버전을 포함한 위의 전체 예제에 대한 전체 내용은 <a href=\"https://6578430567214463f1df4629-htkembgskw.chromatic.com/?path=%2Fdocs%2Foverview--docs&#x26;ref=storybookblog.ghost.io\">우리의 전체 RSC 데모 Storybook</a> 또는 <a href=\"https://github.com/shilman/storybook-rsc-demo?ref=storybookblog.ghost.io\">GitHub 레포지토리</a>를 확인하십시오.</p>\n<p><img src=\"https://storybookblog.ghost.io/content/images/2023/12/CleanShot-2023-12-13-at-10.02.38@2x.png\" alt=\"\"></p>\n<h2 id=\"주의사항\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD\" aria-label=\"주의사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주의사항</h2>\n<p>이 글에서는, Storybook에서 첫 번째 RSC에 대한 스토리를 성공적으로 작성했으며 이 모든 것이 내부적으로 어떻게 구현되었는지 보여주었습니다.</p>\n<p>이 모든 것은 꽤 간단한 과정이었지만, 이 접근 방식에는 제한 사항이 있습니다.</p>\n<ol>\n<li><strong>일치성.</strong> 순수한 클라이언트 구현은 애플리케이션에서 실행되는 서버측 스트리밍 RSC 구현과 크게 다릅니다.</li>\n<li><strong>편의성.</strong> 여기서 제공하는 모킹 솔루션은 개선될 여지가 있습니다. 현재의 모듈 모킹 솔루션은 장황할 뿐만 아니라 Storybook의 <a href=\"https://storybook.js.org/docs/writing-stories/args?ref=storybookblog.ghost.io\">args</a>/<a href=\"https://storybook.js.org/docs/api/doc-block-controls?ref=storybookblog.ghost.io\">controls</a>와 잘 호환되지 않습니다.</li>\n</ol>\n<p>우리는 이러한 제한 사항을 향후에 해결할 계획이므로, 이 솔루션을 실험 단계로 표시했습니다.</p>\n<h2 id=\"오늘부터-rsc를-위한-storybook-사용하기-\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%8A%98%EB%B6%80%ED%84%B0-rsc%EB%A5%BC-%EC%9C%84%ED%95%9C-storybook-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-\" aria-label=\"오늘부터 rsc를 위한 storybook 사용하기  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오늘부터 RSC를 위한 Storybook 사용하기 🎊</h2>\n<p>RSC를 위한 Storybook을 사용하려면 Storybook을 8.0-alpha로 업그레이드하십시오.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">npx storybook@next upgrade --prerelease</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p>그런 다음 <code>.storybook/main.ts</code>에서 실험적 기능을 활성화하세요.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"jsx\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// .storybook/main.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">features:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">experimentalNextRSC:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p>더 많은 정보를 원하시면, <code>@storybook/nextjs</code> <a href=\"https://github.com/storybookjs/storybook/blob/next/code/frameworks/nextjs/README.md?ref=storybookblog.ghost.io#experimental-react-server-components-rsc\">README</a>를 참조하세요.</p>\n<p>이것은 다음 메이져 버전인 Storybook 8.0의 내용을 자세히 설명하는 첫 번째 게시물이며, 앞으로 몇 달 안에 더 많은 내용이 추가될 예정입니다. 다음 릴리스에 대한 모든 소식을 확인하려면 <a href=\"https://twitter.com/storybookjs?ref=storybookblog.ghost.io\">소셜 미디어에서 팔로우</a>하거나 <a href=\"https://storybook.us18.list-manage.com/subscribe?u=06a6fce3ab1327784d4342396&#x26;id=18b5cea6e6&#x26;ref=storybookblog.ghost.io\">Storybook 뉴스레터에 가입</a>하세요!</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","excerpt":"원문: https://storybook.js.org/blog/storybook-react-server-components/ 스토리북 8.0 알파 업그레이드를 통한 스토리북에서 RSC 사용 리액트 서버 컴포넌트 (RSC)는 리액트 기반 웹 UI의 새로운 프로그래밍 모델입니다.  기존의 전통적인 리액트 “클라이언트” 컴포넌트와 달리, 서버에서만 렌더링됩니다. 이는 다양한 성능 및 보안 이점을 가져오지만, 기존의 리액트 도구 및 라이브러리와는 크게 다릅니다. 가장 크게 영향을 받는 부분 중 하나는 컴포넌트 기반 개발 및 테스트입니다. 스토리북, 테스팅 라이브러리 및 Playwright/Cypress와 같은 컴포넌트 테스팅과 같은 도구들은 사용자의 컴포넌트가 브라우저 (또는 JSDom)에서 렌더링되고 있다고 가정합니다. 그러나 서버 컴포넌트의 경우, 이러한 가정이 성립하지 않습니다. 이로 인해, 서버를 위한 격리된 컴포넌트 개발 및 테스트를 수행하는 것이 무엇을 의미하는가? 라는 의문이 …","frontmatter":{"date":"February 02, 2024","title":"(번역) 리액트 서버 컴포넌트를 위한 스토리북","categories":"translate react","author":"soobing"},"fields":{"slug":"/react/storybook-react-server-components/"}},"next":{"id":"49f5131d-8aee-5af5-881d-92b49dd0bd9c","html":"<p>지난 글에서 react-query의 hydrate, dehydrate을 통해 서버에서 prefetching 한 데이터 사용하는 방법에 대해서 살펴보았습니다.</p>\n<blockquote>\n<p><a href=\"https://soobing.github.io/react/server-rendering-and-react-query/\">서버에서 prefetching 한 데이터 사용하기</a></p>\n</blockquote>\n<p>오늘은 조금 실용적으로 Next.js 13, 14 버전의 app router에서 react-query를 어떻게 사용하고 세팅하면 좋을지 고민했던 내용에 대해서 이야기해보도록 하겠습니다.</p>\n<blockquote>\n<p>해당 글은 23년 10월에 메이저 버전 업데이트된, <a href=\"https://nextjs.org/blog/next-14\">Next.js 14</a>와 <a href=\"https://tanstack.com/blog/announcing-tanstack-query-v5\">React-Query 5</a> 를 기준으로 작성된 글입니다.</p>\n</blockquote>\n<blockquote>\n<p>예시로 보여주는 코드는 저의 <a href=\"https://github.com/soobing/next-14-react-query\">next-14-react-query</a> repo에서 확인 할 수 있습니다.</p>\n</blockquote>\n<p>제가 크게 고민했던 문제는 아래 세 가지입니다.</p>\n<ul>\n<li><code>Hydrate</code> vs <code>ReactQueryStreamedHydration</code> 두 가지 API 중에 어떤 것을 채택할까?</li>\n<li>Hydration API 사용 시에 RSC, RCC 모두에서 깔끔한 코드를 유지하려면 queryOption은 어떻게 정의하는 게 좋을까?</li>\n<li><code>dehydrate(queryClient).queries</code>에는 현재 기준 prefetch 된(?) 모든 쿼리들이 다 따라온다 😱</li>\n</ul>\n<p><a href=\"https://jsonplaceholder.typicode.com/\">jsonplaceholder API</a> 서버의 photo 서비스를 사용하는 것을 예시로 프로젝트 구조를 어떻게 설계했는지, 그리고 위에서 했던 고민들에 대한 이야기를 나눠 보도록 하겠습니다.</p>\n<h2 id=\"초기-환경-세팅\" style=\"position:relative;\"><a href=\"#%EC%B4%88%EA%B8%B0-%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85\" aria-label=\"초기 환경 세팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>초기 환경 세팅</h2>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/** hooks/useReactQuery.tsx */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">&#39;use client&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">useState</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">QueryClient</span><span class=\"mtk1\">, </span><span class=\"mtk12\">QueryClientProvider</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@tanstack/react-query&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">ReactQueryDevtools</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@tanstack/react-query-devtools&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ReactQueryProviders</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">children</span><span class=\"mtk1\"> }: </span><span class=\"mtk10\">React</span><span class=\"mtk1\">.</span><span class=\"mtk10\">PropsWithChildren</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">queryClient</span><span class=\"mtk1\">] = </span><span class=\"mtk11\">useState</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    () </span><span class=\"mtk4\">=&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">QueryClient</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">defaultOptions:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">queries:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">// With SSR, we usually want to set some default staleTime</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">// above 0 to avoid refetching immediately on the client</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">staleTime:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">60</span><span class=\"mtk1\"> * </span><span class=\"mtk7\">1000</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">QueryClientProvider</span><span class=\"mtk1\"> </span><span class=\"mtk12\">client</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">queryClient</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">{</span><span class=\"mtk12\">children</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">ReactQueryDevtools</span><span class=\"mtk1\"> </span><span class=\"mtk12\">initialIsOpen</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{false}</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">QueryClientProvider</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/** app/layout.tsx */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ReactQueryProviders</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/hooks/useReactQuery&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">RootLayout</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">children</span><span class=\"mtk1\"> }: </span><span class=\"mtk10\">React</span><span class=\"mtk1\">.</span><span class=\"mtk10\">PropsWithChildren</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">html</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lang</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;en&quot;</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">head</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">body</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">ReactQueryProviders</span><span class=\"mtk17\">&gt;</span><span class=\"mtk4\">{</span><span class=\"mtk12\">children</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">ReactQueryProviders</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">body</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">html</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2 id=\"클라이언트-서버-모두에서-사용될-수-있도록-서비스-설계하기\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%91%90%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EB%90%A0-%EC%88%98-%EC%9E%88%EB%8F%84%EB%A1%9D-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%84%A4%EA%B3%84%ED%95%98%EA%B8%B0\" aria-label=\"클라이언트 서버 모두에서 사용될 수 있도록 서비스 설계하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라이언트, 서버 모두에서 사용될 수 있도록 서비스 설계하기</h2>\n<p><a href=\"https://jsonplaceholder.typicode.com/\">jsonplaceholder API</a> 페이지를 가보면, 서비스 별로 다음과 같은 라우터 구조를 가지고 있다고 명세되어 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXUlEQVQ4y6VTy26DMBDk/z8qyiWHXCmKI4JoK97hZV41EMhUY4mojXqAdKWVV7Z3vOOdNXa7HY7HIw6HA/b7Pdq2BW2eZ9zv981uBEEA13XhOI72aZrwHzPquoaUEk3ToCgKpGmKLMuQJAniONZxnuePs+v1qveiKNL7jOlhGEIpBaOqKk2TK0GYSGciAfhgWZbaub/EBGMhy33m9n0Po+s6jU6bphmO+4EvpV6nTKr8RxqBTEvAD6NflzY15SegUj3E+QLbcRGEMd4/PZSyeoCurnChzArPtoOTsGGdznizhAZfwNaAGmwIZXO73fSn2pcL0jRD03aQVY26brYDLhUSkFpkF59tNWV22fd9jOOIYRgghNAae27G6gqpM9M0tY5U3+vY87zXAXmJAiVdGumqP3S4mjLpcnRKKeEH0UP9rJiTQvr8itUVcl6ZnOcFojhBXhT6gWVmebYF8BtlF4wWzsFQogAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/360e9dafd9cbae4c0b206e41fb05ed71/37523/1.png\"\n        srcset=\"/static/360e9dafd9cbae4c0b206e41fb05ed71/e9ff0/1.png 180w,\n/static/360e9dafd9cbae4c0b206e41fb05ed71/f21e7/1.png 360w,\n/static/360e9dafd9cbae4c0b206e41fb05ed71/37523/1.png 720w,\n/static/360e9dafd9cbae4c0b206e41fb05ed71/302a4/1.png 1080w,\n/static/360e9dafd9cbae4c0b206e41fb05ed71/84bf8/1.png 1162w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>저는 photo 서비스를 기준으로 아래와 같이 폴더를 생성해 보았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 642px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8ElEQVQoz52S226FIBRE/QcV8AZSq1LjpV5AjfH/P2tO4DQnbfpQ7cPAflrMDNuL4xhFUaDveyc7E0LAGPuXPHsUxTvmeXYqy/IXkFJ6D5ilKaZpgtYaeZ7D930HDcPwBbfQK2CPEoJISKhugNEay7Jg33f3wLqu6LruVgUOGAuJt0rhcxigjXEwG11KCSHED2d/ufQofQKrpnUO52VxXVpYEAS3YF8OQ0Q8h6wUVqNhjME4jjjPE8dxuNjbtoFzfim6x6IYvPxwMW1/9rbrk2UZ7EolSYI0Ta87ZCxCIiSapkFd12jbFkqp169+15UOH3Y/8kt4v2AQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/a594c1531d9f0cb51f3dc6c58dbf115b/1bba8/2.png\"\n        srcset=\"/static/a594c1531d9f0cb51f3dc6c58dbf115b/e9ff0/2.png 180w,\n/static/a594c1531d9f0cb51f3dc6c58dbf115b/f21e7/2.png 360w,\n/static/a594c1531d9f0cb51f3dc6c58dbf115b/1bba8/2.png 642w\"\n        sizes=\"(max-width: 642px) 100vw, 642px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>API의 서비스별로 따로 관리하면 가독성과 유지 보수에 좋습니다. 그래서 PhotoService를 작성하면 아래와 같습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/** service/photo/PhotoService.ts */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Service</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/service/Service&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> {</span><span class=\"mtk12\">Photo</span><span class=\"mtk1\">} </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/model/photo&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">PhotoService</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Service</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">getPhotos</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">http</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Photo</span><span class=\"mtk1\">[]&gt;(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">`/photos`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">getPhoto</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">http</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Photo</span><span class=\"mtk1\">&gt;(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">`/photo/</span><span class=\"mtk4\">${</span><span class=\"mtk12\">photoId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">getComments</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">http</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Comment</span><span class=\"mtk1\">[]&gt;(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">`/photo/</span><span class=\"mtk4\">${</span><span class=\"mtk12\">photoId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/comments`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">getComment</span><span class=\"mtk1\">({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">}: {</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">http</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Comment</span><span class=\"mtk1\">[]&gt;(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">`/photo/</span><span class=\"mtk4\">${</span><span class=\"mtk12\">photoId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/comments/</span><span class=\"mtk4\">${</span><span class=\"mtk12\">commentId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">PhotoService</span><span class=\"mtk1\">();</span></span></span></code></pre>\n<p>그리고 react-query의 useQuery를 사용 할 때, 필요한 곳에서 직접적으로 호출해서 사용하기보다는 이 또한 서비스별로 Colocate 시켜서 가독성과 유지 보수하기 좋도록 설계했습니다.</p>\n<blockquote>\n<p>관련해서 유명한 글인 <a href=\"https://kentcdodds.com/blog/colocation\">Maintainability through colocation</a> by <a href=\"https://twitter.com/kentcdodds\">Kent C. Dodds</a>를 읽어보는 것을 추천합니다.</p>\n</blockquote>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/** service/photo/usePhotoService.ts */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">useQuery</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@tanstack/react-query&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/service/photo/queries&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">usePhotos</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">useQuery</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">all</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">usePhoto</span><span class=\"mtk1\">({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">}: {</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">useQuery</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">detail</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">useComments</span><span class=\"mtk1\">({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">}: {</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">useQuery</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">comments</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">useComment</span><span class=\"mtk1\">({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">}: {</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">useQuery</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">comment</span><span class=\"mtk1\">({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">}));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>여기서 queries라는 파일에서 queryOption을 빼오고 있는데, 해당 파일에서는 QueryKey와 QueryOption을 모두 관리하고 있습니다. 이것은 react-query의 메인테이너인 TkDodo’s blog에서 효율적으로 <a href=\"https://tkdodo.eu/blog/effective-react-query-keys\">React Query Key 관리하는  법</a> 이라는 글을 참고하여 작성했습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">PhotoService</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/service/photo/PhotoService&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryKeys</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">all:</span><span class=\"mtk1\"> [</span><span class=\"mtk8\">&#39;photos&#39;</span><span class=\"mtk1\">] </span><span class=\"mtk15\">as</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">detail</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> [...</span><span class=\"mtk12\">queryKeys</span><span class=\"mtk1\">.</span><span class=\"mtk12\">all</span><span class=\"mtk1\">, </span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">] </span><span class=\"mtk15\">as</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">detailComments</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> [...</span><span class=\"mtk12\">queryKeys</span><span class=\"mtk1\">.</span><span class=\"mtk11\">detail</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">), </span><span class=\"mtk8\">&#39;comments&#39;</span><span class=\"mtk1\">] </span><span class=\"mtk15\">as</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">detailComment</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> ({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">}: {</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> [...</span><span class=\"mtk12\">queryKeys</span><span class=\"mtk1\">.</span><span class=\"mtk11\">detailComments</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">), </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">] </span><span class=\"mtk15\">as</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">all</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> ({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">queryKey:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryKeys</span><span class=\"mtk1\">.</span><span class=\"mtk12\">all</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">queryFn</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">PhotoService</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPhotos</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">detail</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> ({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">queryKey:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryKeys</span><span class=\"mtk1\">.</span><span class=\"mtk11\">detail</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">queryFn</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">PhotoService</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPhoto</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">comments</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> ({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">queryKey:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryKeys</span><span class=\"mtk1\">.</span><span class=\"mtk11\">detailComments</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">queryFn</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">PhotoService</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getComments</span><span class=\"mtk1\">(</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">comment</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> ({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">}: {</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> ({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">queryKey:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryKeys</span><span class=\"mtk1\">.</span><span class=\"mtk11\">detailComment</span><span class=\"mtk1\">({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">}),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">queryFn</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">PhotoService</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getComment</span><span class=\"mtk1\">({</span><span class=\"mtk12\">photoId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">commentId</span><span class=\"mtk1\">}),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p>위의 글에서는 queryKey 관리에 대한 이야기만 나와있지만, SSR이나 RSC에서 Hydrate API를 사용하는 경우가 많아져서, queryKey와 비슷하게 queryOption도 함께 관리하도록 추가했습니다.</p>\n<h2 id=\"서버에서-prefetching-하고-데이터-dehydration-하기\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84%EC%97%90%EC%84%9C-prefetching-%ED%95%98%EA%B3%A0-%EB%8D%B0%EC%9D%B4%ED%84%B0-dehydration-%ED%95%98%EA%B8%B0\" aria-label=\"서버에서 prefetching 하고 데이터 dehydration 하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버에서 Prefetching 하고 데이터 de/hydration 하기</h2>\n<p>hydration에 대한 개념적인 설명은 지난 글을 참고해 주시면 좋을것 같습니다. 서버에서 prefetch 한 쿼리들을 dehydrate 시켰다가 클라이언트에서 hydration 시켜줘야 합니다. 이렇게 해주면 서버에서 prefetch 하여 react-query로 캐싱 한 쿼리들을 클라이언트에서 사용할 때도 유지되어서 refetch 하지 않습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">HydrationBoundary</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">QueryClient</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">dehydrate</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">QueryState</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">QueryKey</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">} </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@tanstack/react-query&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">cache</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">isEqual</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/utils&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">getQueryClient</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">cache</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">QueryClient</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">UnwrapPromise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">T</span><span class=\"mtk1\">&gt; = </span><span class=\"mtk10\">T</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk4\">infer</span><span class=\"mtk1\"> </span><span class=\"mtk10\">U</span><span class=\"mtk1\">&gt; ? </span><span class=\"mtk10\">U</span><span class=\"mtk1\"> : </span><span class=\"mtk10\">T</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">QueryProps</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">ResponseType</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">unknown</span><span class=\"mtk1\">&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">: </span><span class=\"mtk10\">QueryKey</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">queryFn</span><span class=\"mtk1\">: () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">ResponseType</span><span class=\"mtk1\">&gt;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">DehydratedQueryExtended</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">TData</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">unknown</span><span class=\"mtk1\">, </span><span class=\"mtk10\">TError</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">unknown</span><span class=\"mtk1\">&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">state</span><span class=\"mtk1\">: </span><span class=\"mtk10\">QueryState</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">TData</span><span class=\"mtk1\">, </span><span class=\"mtk10\">TError</span><span class=\"mtk1\">&gt;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getDehydratedQuery</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Q</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">QueryProps</span><span class=\"mtk1\">&gt;({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}: </span><span class=\"mtk10\">Q</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryClient</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">getQueryClient</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryClient</span><span class=\"mtk1\">.</span><span class=\"mtk11\">prefetchQuery</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">queries</span><span class=\"mtk1\"> } = </span><span class=\"mtk11\">dehydrate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryClient</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">dehydratedQuery</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">queries</span><span class=\"mtk1\">.</span><span class=\"mtk11\">filter</span><span class=\"mtk1\">((</span><span class=\"mtk12\">query</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">isEqual</span><span class=\"mtk1\">(</span><span class=\"mtk12\">query</span><span class=\"mtk1\">.</span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">dehydratedQuery</span><span class=\"mtk1\"> </span><span class=\"mtk15\">as</span><span class=\"mtk1\"> </span><span class=\"mtk10\">DehydratedQueryExtended</span><span class=\"mtk1\">&lt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">UnwrapPromise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">ReturnType</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Q</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;queryFn&#39;</span><span class=\"mtk1\">]&gt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &gt;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Hydrate</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">HydrationBoundary</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> {};</span></span></span></code></pre>\n<p>위의 코드에서는 <code>getQueryClient</code>와 <code>getDehydratedQuery</code> 두 가지 함수를 유틸로 export 하고 있습니다. <code>getQueryClient</code> 유틸은 <a href=\"https://tanstack.com/query/latest/docs/react/guides/advanced-ssr#alternative-use-a-single-queryclient-for-prefetching\">공식 문서에서 권장</a> 하고 있듯이, 서버에서 데이터를 fetching 할 때 마다 필요한 queryClient를 cache 해서 사용할 수 있도록 했습니다.</p>\n<p><code>getDehydratedQuery</code>는 queryClient를 이용하여 서버에서 데이터를 prefetching 하고 dehydrate 한 결과물을 리턴하는 코드입니다.</p>\n<p>위 유틸을 사용하여 SSR을 수행하고 있는 page.tsx 파일에서 서버에서 prefeching 한 데이터를 hydration 시켰을 때 아래와 같이 inactive 상태로 보이는 것을 볼 수 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Image</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next/image&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">styles</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./page.module.css&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">PhotoList</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/components/PhotoList&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/service/photo/queries&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">Hydrate</span><span class=\"mtk1\">, </span><span class=\"mtk12\">getDehydratedQuery</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/utils/react-query&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Home</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> } = </span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">all</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">query</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getDehydratedQuery</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">main</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">styles</span><span class=\"mtk1\">.</span><span class=\"mtk12\">main</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">{</span><span class=\"mtk3\">/* 서버 사이드 렌더링 &amp; 서버 컴포넌트 */</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Hydrate</span><span class=\"mtk1\"> </span><span class=\"mtk12\">state</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk1\">{ </span><span class=\"mtk12\">queries:</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">query</span><span class=\"mtk1\">] }</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">{</span><span class=\"mtk3\">/* Client Component 잠시 주석처리 */</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">{</span><span class=\"mtk3\">/* &lt;PhotoList/&gt; */</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">Hydrate</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">main</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAArUlEQVQY01WOSw7DIAwFc/8DdtNtqxDAQMCYTxevwpGqdDGyZT2PvT0fD9jDwLiI/SAYG1Clo/eJWAosRfjI2G3AbgkUGK/dg+IJ5zwsJfiQYH0E14aNDoPKjHheLKGjhFIbUmEVsnQNL6QNFBZI6xBpyCygmOHDqfPtbTwOdy2tz1JmhJQ1uKRnqWh9oI/5R1t1flSci2heP6yyLssvOOZH+VvuU6UX935c4htfIGszoYYKzU0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/9e8685c928e2c32961adbe8d393c2250/37523/3.png\"\n        srcset=\"/static/9e8685c928e2c32961adbe8d393c2250/e9ff0/3.png 180w,\n/static/9e8685c928e2c32961adbe8d393c2250/f21e7/3.png 360w,\n/static/9e8685c928e2c32961adbe8d393c2250/37523/3.png 720w,\n/static/9e8685c928e2c32961adbe8d393c2250/302a4/3.png 1080w,\n/static/9e8685c928e2c32961adbe8d393c2250/07a9c/3.png 1440w,\n/static/9e8685c928e2c32961adbe8d393c2250/7db30/3.png 1494w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code>Hydrate</code> 내부의 <code>&#x3C;PhotoList/></code>를 주석 해제해 보면, Client 컴포넌트에서 동일한 쿼리를 요청했을 때 active 상태로 바뀌는 것을 볼 수 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Home</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> } = </span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">all</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">query</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getDehydratedQuery</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">main</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">styles</span><span class=\"mtk1\">.</span><span class=\"mtk12\">main</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">{</span><span class=\"mtk3\">/* 서버 사이드 렌더링 &amp; 서버 컴포넌트 */</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Hydrate</span><span class=\"mtk1\"> </span><span class=\"mtk12\">state</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk1\">{ </span><span class=\"mtk12\">queries:</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">query</span><span class=\"mtk1\">] }</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">{</span><span class=\"mtk3\">/* Client Component 잠시 주석처리 */</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">PhotoList</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">Hydrate</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">main</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAm0lEQVQY04WOyQrDMAxE8/+/WHooDdSJF3nfepgiOwk9FHp4iBEzIy2P+w1CKKyrxPqUsBSRS0Uq9ZqSLIQ12MnjtSmQjRA7QRuC0gRlHKS20OSxeOcRYoYLaSw3aeAPTS6gtj5KJw0xFZTaEPM8yLCXS0fhthOs56+m2YeEmMsgHOFS+wUf4N2cU3PpmVlYlNbR+vsnHPjHt/8D5Mo0vXjyLjUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/f2dc2c528da71e3981f0b7264934b25d/37523/4.png\"\n        srcset=\"/static/f2dc2c528da71e3981f0b7264934b25d/e9ff0/4.png 180w,\n/static/f2dc2c528da71e3981f0b7264934b25d/f21e7/4.png 360w,\n/static/f2dc2c528da71e3981f0b7264934b25d/37523/4.png 720w,\n/static/f2dc2c528da71e3981f0b7264934b25d/302a4/4.png 1080w,\n/static/f2dc2c528da71e3981f0b7264934b25d/07a9c/4.png 1440w,\n/static/f2dc2c528da71e3981f0b7264934b25d/27f8b/4.png 1730w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>hydration이 제대로 된 것을 확인할 수 있습니다.</p>\n<p>사실 hydration 목적 이외에도 prefetching 한 response 데이터를 미리 접근해서 사용할 수도 있습니다. <code>query.state.data</code>  형태로 직접 접근하여 사용할 수 있습니다.</p>\n<p><code>dehydrate</code> 함수를 보면 queryClient로 prefetch된 모든 데이터를 전부 반환하므로 만약 필터링 없이 다음과 같이 모든 query를 리턴한다면 SSR을 하는 페이지 단에서, 그리고 내부에 서버 컴포넌트가 존재하는 경우 각각 dehydrate를 한다면해당 데이터를 미리 접근해서 사용하는 경우 순서를 알기 어려워 아래와 같이 유틸을 작성하지 않고 필터링하도록 구현했습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// [참고용] filtering 하지 않고 모든 dehydrated query를 반환하는 함수</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getDehydratedQueries</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Q</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">QueryProps</span><span class=\"mtk1\">[]&gt;(</span><span class=\"mtk12\">queries</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Q</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryClient</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">getQueryClient</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">.</span><span class=\"mtk11\">all</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">queries</span><span class=\"mtk1\">.</span><span class=\"mtk11\">map</span><span class=\"mtk1\">(({ </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> }) </span><span class=\"mtk4\">=&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">queryClient</span><span class=\"mtk1\">.</span><span class=\"mtk11\">prefetchQuery</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">dehydrate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryClient</span><span class=\"mtk1\">).</span><span class=\"mtk12\">queries</span><span class=\"mtk1\"> </span><span class=\"mtk15\">as</span><span class=\"mtk1\"> </span><span class=\"mtk10\">DehydratedQueryExtended</span><span class=\"mtk1\">&lt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">UnwrapPromise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">ReturnType</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Q</span><span class=\"mtk1\">[</span><span class=\"mtk10\">number</span><span class=\"mtk1\">][</span><span class=\"mtk8\">&#39;queryFn&#39;</span><span class=\"mtk1\">]&gt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &gt;[];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>위의 유틸을 사용한 <code>Comments</code> 컴포넌트를 살펴보면 아래 첨부한 이미지처럼 두 개의 데이터가 들어오고 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> {</span><span class=\"mtk12\">Photo</span><span class=\"mtk1\">} </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/model/photo&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> {</span><span class=\"mtk12\">Hydrate</span><span class=\"mtk1\">, </span><span class=\"mtk12\">getDehydratedQueries</span><span class=\"mtk1\">} </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/utils/react-query&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/service/photo/queries&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Comments</span><span class=\"mtk1\">({</span><span class=\"mtk12\">id</span><span class=\"mtk1\">}: </span><span class=\"mtk10\">Pick</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Photo</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;id&#39;</span><span class=\"mtk1\">&gt;) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> } = </span><span class=\"mtk12\">queryOptions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">comments</span><span class=\"mtk1\">(</span><span class=\"mtk12\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queries</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getDehydratedQueries</span><span class=\"mtk1\">([{ </span><span class=\"mtk12\">queryKey</span><span class=\"mtk1\">, </span><span class=\"mtk12\">queryFn</span><span class=\"mtk1\"> }]);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Hydrate</span><span class=\"mtk1\"> </span><span class=\"mtk12\">state</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk1\">{ </span><span class=\"mtk12\">queries</span><span class=\"mtk1\"> }</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      comments</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">{</span><span class=\"mtk10\">JSON</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stringify</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queries</span><span class=\"mtk1\">[</span><span class=\"mtk7\">0</span><span class=\"mtk1\">].</span><span class=\"mtk12\">state</span><span class=\"mtk1\">.</span><span class=\"mtk12\">data</span><span class=\"mtk1\">)</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">Hydrate</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 138.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsTAAALEwEAmpwYAAAESklEQVRIx42WS3vaVhRFPW+d2JLuQyCwECAQoIcFQjzD09hJ3I466KT//2esfleQxG0Sx4PzXSGJxbk6e29xVWs2mOU5H3c7trMZ+XBIFkWMh0PSXo95nlfnVpMJsywj9H2klGit0Uqd1xd1tWw22biae8tiYttMHYfScc6rlF9rrhSFUhwch76UOD8Dzs0NrRaTsiSOY1yvgVPzcNwajhBIpVBaVV+2tCIRgpEQ2D8DToWg7jgU0ykf1iv6+YRgXBIWc9pBG8/TSOkiHMWN0MRCMJSvAGdCULNtirLk+fmZz58/8/R4Yr8/kCRtDgfJeq3Y7wSztSKvKQavdVgKgWe2EcfM53OKouDx8bHafhC06HRc2m3NXVPhNjWpUgzfBEySCmhgx+OR3W5PUSSMRi5KSWxLYKnLln8FNM8wzTJ2ux37/Z7lcsnhcGC73VAUQ7IsJGi1vw7lTcAkTdlsNhwfHpiMx+w2W/bbPUHQZjQaMRoOK0gFlPLXwDhNq67W6zWz9YL5dkM2DSkmFkGgcGyB7eq3d2iGYjqcFgXdbEQ9DnHyEC9q47oaV+tvHb6qQ9um63n0ej36psKQUTTAbzbRrQa1oElNaWpKVe5IL8I2x646C15X4j//wFV+e0s/ipgdDiyPR+Ki4PauwXU54Hoxwo5DVDvgRil+c116Ulb1TusKajr9AjPr1U5K/vR9TkHAcxjyqdNhqRVz32PebjD36yyUZGmf/f2HZbG17crPRkKmvJcdHpXiY7PJ3vP4oDVzy2Jh6uaWxY3F0rJYOjZL4ZzLccgu2zZQAx+8mPpVaduIep3xek1WltidHtfhgPfdPjdujd+Fey5HV/Vea6zLdt+5bjWg6CVwKQTKtimNlz994uHpI+vDke3pifH9iLJQjAaa0VAyiBR19zwEMxADyf4PXDgOWohK2EaD89mM0/HAfZpxd6cpCsV0KilLyXis8LwaygD1GZh+BxTiDEwSVqtVZb+npyfKckaWpXS7NVzXxbI0jqMr2Je0fh146fB0OrHdbnl4OLFY5IzHLXzfRUoDOsPURXuvAk04GKeYyvO8CobD4bHy8XR6Txwn37p7S4dxklRJY+JrvVpVwbBa5AwiSRA08bzGt+5+BVSXtDFAkzRRkdGd5TTHbeL7WrVlISTaPbvC1Bdvpz+ack0aSUQUkwnTSUGa3+MHLcSgjQzbSHGWiWsLXEfgmtfo5c33nWxKy6IdhgzznH6ScNfpoBoNrH6AFQU4foNm4GL7DW7TLrejDlbQpOG3uP6RsI3Vjp0Of69W/LPb8VdZMmnWScc90vmA+0FA0fGqNdkkpEWfrOczdd3Kxwfb/i+w5/vE9TpdE2O2TSjEOVEcQc92quNQqsq3fduh7wj6Qlb3VeekrKLtazgor0Z3OCCfThkkCd0oYpimRHFMJ4qqz4HJyCyjNxoRJUl1Pc5zkjznrt1GXP6amPj6F35XELJ5fBz9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/2d804deab0f591d646cbc8ed0d21f159/37523/5.png\"\n        srcset=\"/static/2d804deab0f591d646cbc8ed0d21f159/e9ff0/5.png 180w,\n/static/2d804deab0f591d646cbc8ed0d21f159/f21e7/5.png 360w,\n/static/2d804deab0f591d646cbc8ed0d21f159/37523/5.png 720w,\n/static/2d804deab0f591d646cbc8ed0d21f159/64d87/5.png 818w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"덜-복잡한-코드를-작성할-순-없을까-reactquerystreamedhydration\" style=\"position:relative;\"><a href=\"#%EB%8D%9C-%EB%B3%B5%EC%9E%A1%ED%95%9C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%A0-%EC%88%9C-%EC%97%86%EC%9D%84%EA%B9%8C-reactquerystreamedhydration\" aria-label=\"덜 복잡한 코드를 작성할 순 없을까 reactquerystreamedhydration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>덜 복잡한 코드를 작성할 순 없을까? (ReactQueryStreamedHydration)</h2>\n<p>끝으로, 이렇게 dehydrate, hydrate 직접 시켜줘야 하는 코드가 심플하지 못하다고 생각하여 더 좋은 방법이 없는가 검색하던 중에 <a href=\"https://tanstack.com/query/v5/docs/react/guides/advanced-ssr#experimental-streaming-without-prefetching-in-nextjs\">ReactQueryStreamedHydration</a>을 발견했습니다. prefetching 없이도 streaming SSR을 작동 시키는 방법인데, 이 패키지를 사용하면 초기 요청 동안 서버에서 데이터를 가져오고 (useQuery 훅에서의 API 호출이 서버에서 이루어짐) 데이터가 준비되면 QueryClient에 전달하여 root에서 hydration을 수행하기 때문에 컴포넌트에서 useSuspenseQuery를 호출하기만 하면 됩니다. CSR에서 react-query를 사용하듯이 코드가 엄청나게 간단해집니다. 이는 놀라운 개발 경험(DX)과 낮은 코드 복잡성을 제공합니다.</p>\n<p>그러나 이 방법을 선택하지 않은 이유는, 실험 단계 인점이 가장 컸고 깊게 중첩된 쿼리가 없고 요청 최적화를 잘 관리하고 있는 경우 사용하기를 권장하고 있는데 따로 잘 관리할 자신이 없었던 점이 제일 컸습니다. 조금 더 자세히 알아보고 싶으신 분들은 공식 문서와 라이브러리 코드를 참고하시면 좋을 것 같습니다 :)</p>\n<h2 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h2>\n<ul>\n<li>(공식문서) <a href=\"https://tanstack.com/query/latest/docs/react/guides/advanced-ssr\">Advanced Server Rendering</a></li>\n<li>(공식문서) <a href=\"https://tanstack.com/query/v5/docs/react/guides/advanced-ssr#experimental-streaming-without-prefetching-in-nextjs\">Experimental streaming without prefetching in Next.js</a></li>\n<li>예제 코드 구현: <a href=\"https://github.com/soobing/next-14-react-query\">https://github.com/soobing/next-14-react-query</a> by soobing</li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"date":"January 07, 2024","title":"Next.js app router에서 React Query 사용하면서 고민했던 것들","categories":"react react-query","author":"soobing"},"fields":{"slug":"/react/next-app-router-react-query/"}},"prev":{"id":"043f141a-41bf-5b90-88f4-15d2b2590516","html":"<blockquote>\n<p>원글: <a href=\"https://medium.com/@matuzo/writing-css-with-accessibility-in-mind-8514a0007939\">https://medium.com/@matuzo/writing-css-with-accessibility-in-mind-8514a0007939</a></p>\n</blockquote>\n<p><em>CSS를 사용하여 웹사이트와 앱의 접근성을 향상시키는 데 도움이 되는 팁에 대한 소개입니다.</em></p>\n<p>이 글은  <a href=\"https://medium.com/@ABatickaya/%D0%B4%D1%83%D0%BC%D0%B0%D1%8F-%D0%BE-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D0%BF%D0%B8%D1%88%D0%B5%D0%BC-css-9032d7b64fb2\">러시아어</a>(역자: <a href=\"https://medium.com/@ABatickaya\">Workafrolic</a>), <a href=\"https://maujor.com/tutorial/escrevendo-css-com-acessibilidade-em-mente.php\">포르투갈어</a>(역자: <a href=\"https://maujor.com/\">Maujor</a>), 그리고 <a href=\"https://frasco.io/writing-css-with-accessibility-in-mind-4fc82b26aecb\">일본어</a>(역자: <a href=\"https://twitter.com/nakanishy\">Keita Nakanishi</a>)로 번역되었습니다.</p>\n<p>읽기를 선호하지 않는다면, CSS Conf Budapest에서 이 글의 대부분에 대해 이야기한 <a href=\"https://www.youtube.com/watch?v=EOiC2M47GBY\">녹음본</a>을 들을 수 있습니다.</p>\n<p>약 1년 전, 저는 웹 접근성에 좀 더 집중하기 시작했습니다. 저에게 가장 효과적인 학습 방식은 다른 사람들을 가르치는 것입니다. 이것이 바로 제가 <a href=\"https://speakerdeck.com/matuzo/\">밋업과 컨퍼런스</a>에서 발표하고, 이 주제에 대한 글을 쓰는 이유 중 하나입니다. 저는 Smashing Magazine에 <a href=\"https://www.smashingmagazine.com/2017/07/enhancing-css-layout-floats-flexbox-grid/\">점진적인 향상</a>, 그리고 접근성 기초에 대해 Medium에 글을 작성했습니다. 이 글은 접근성 팁 모음 시리즈 중 세 번째 글입니다.  관심이 있다면 특별한 순서 없이, <a href=\"https://medium.com/alistapart/writing-html-with-accessibility-in-mind-a62026493412\">접근성을 고려하여 HTML 작성하기</a>와 <a href=\"https://medium.com/@matuzo/writing-javascript-with-accessibility-in-mind-a1f6a5f467b9\">접근성을 고려하여 자바스크립트 작성하기</a>를 지금이나 나중에 읽어보면 좋습니다.</p>\n<hr>\n<p>제 첫 웹사이트를 만든 것은 약 17년 전이었고, 그때는 <a href=\"https://www.w3.org/Style/CSS20/history.html\">CSS가 아직 상대적으로 새로운 것</a>이었습니다. 그 이후로 많은 것이 변했고, CSS는 이제 우리에게 웹을 스타일링하기 위한 놀라운 도구를 제공합니다. 우리는 <a href=\"http://www.will-harris.com/verdana-georgia.htm\">Verdana</a>에서 웹폰트로, 고정된 너비에서 <a href=\"https://alistapart.com/article/responsive-web-design\">반응형 웹 디자인</a>으로, 테이블 기반 레이아웃에서 <a href=\"https://www.w3.org/TR/css-grid-1/\">그리드</a>로 넘어갔고, 이제는 border와 font 또는 <a href=\"https://alistapart.com/article/cssdropshadows\">shadow</a>에 이미지를 사용할 필요가 없습니다. 우리는 <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/--*\">사용자 정의 속성</a>, <a href=\"https://hacks.mozilla.org/2016/08/using-feature-queries-in-css/\">쿼리</a>, <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/calc?retiredLocale=de\">calc()</a> 및 많은 새로운 <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/length\">단위</a>들을 가지고 있습니다. 물론 이것은 지난 몇 년간의 훌륭한 발전들 중 일부에 불과합니다.</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/1*sFUYq_Kl0pEjvpwzVoquhA.png\" alt=\"\"></p>\n<p><em>접근성을 고려하여 CSS 작성하기</em></p>\n<p>CSS를 사용하여 문제를 해결하는 무한한 방법과 다양한 속성이 우리의 삶을 더 쉽게 만들어주지만, 동시에 사용자의 경험을 악화시킬 수도 있습니다. 사실, <a href=\"http://outlinenone.com/\">단 세 줄의 CSS</a> 만으로 웹사이트에 접근하기 어렵게 만들 수 있습니다.</p>\n<p>이 글에서는 접근성 있는 CSS를 작성하는 데 도움이 될만한 기술과 고려 사항 그리고 접근방식을 모두 모았습니다. 이 컬렉션은 기본 개념과 잘 알려진 속성으로 시작하여, 끝에는 좀 더 새로운 것들을 다룹니다.</p>\n<p>예상했던 것보다 많은 내용을 담게 되어, 가장 관심 있는 섹션으로 바로 이동할 수 있도록 링크가 걸린 목차를 마련했습니다.</p>\n<ul>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EA%B0%80%EB%8F%85%EC%84%B1-%EC%9E%88%EB%8A%94-%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%97%90%EC%84%9C-%EC%9D%BD%EA%B8%B0-%EC%89%AC%EC%9A%B4-%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%A1%9C\">가독성 있는 텍스트에서 읽기 쉬운 텍스트로</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EA%B0%80%EC%83%81-%EC%9A%94%EC%86%8C%EC%97%90-%EC%BD%98%ED%85%90%EC%B8%A0-%EC%8B%A0%EC%A4%91%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">가상 요소에 콘텐츠 신중하게 사용하기</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%ED%99%94%EB%A9%B4%EB%A7%8C%EC%9D%B4-%EC%9C%A0%EC%9D%BC%ED%95%9C-%EB%A7%A4%EC%B2%B4%EA%B0%80-%EC%95%84%EB%8B%88%EB%8B%A4\">화면만이 유일한 매체가 아니다</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EC%99%84%EC%A0%84%ED%9E%88-%EC%A7%80%EC%9B%90%EB%90%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%86%8D%EC%84%B1-%EA%B0%92%EC%97%90-%EB%8C%80%ED%95%9C-%EB%8C%80%EC%95%88\">완전히 지원되지 않는 속성 값에 대한 대안</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EC%BD%98%ED%85%90%EC%B8%A0%EB%A5%BC-%EC%88%A8%EA%B8%B0%EB%8A%94-%EC%97%AC%EB%9F%AC-%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95\">콘텐츠를 숨기는 여러 가지 방법</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EB%82%98%EC%81%9C-%EB%8C%80%EB%B9%84%EB%8A%94-%EC%8B%A0%EB%A2%B0%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4\">나쁜 대비는 신뢰할 수 없다</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EC%83%89%EC%83%81%EC%9D%B4-%EC%A0%95%EB%B3%B4%EC%9D%98-%EC%9C%A0%EC%9D%BC%ED%95%9C-%EB%8B%A8%EC%84%9C%EA%B0%80-%EB%90%98%EC%96%B4%EC%84%9C%EB%8A%94-%EC%95%88-%EB%90%9C%EB%8B%A4\">색상이 정보의 유일한 단서가 되어서는 안 된다</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EC%88%9C%EC%84%9C%EC%97%90-%EC%8B%A0%EA%B2%BD-%EC%93%B0%EA%B8%B0\">순서에 신경 쓰기</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EC%A4%91%EC%9A%94%ED%95%9C-%EA%B2%83%EC%97%90-%EC%A7%91%EC%A4%91%ED%95%98%EA%B8%B0-focus\">중요한 것에 집중하기: focus</a></li>\n<li>🔗 <a href=\"https://soobing.github.io/a11y/writing-css-with-accessibility-in-mind/#%EA%B7%B8%EB%A6%AC%EB%93%9C%EC%99%80-%ED%8F%89%ED%8F%89%ED%95%9C-%EB%AC%B8%EC%84%9C-%EA%B5%AC%EC%A1%B0\">그리드와 평평한 문서 구조</a></li>\n</ul>\n<p>즐겁게 읽어주세요!</p>\n<h1 id=\"가독성-있는-텍스트에서-읽기-쉬운-텍스트로\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EB%8F%85%EC%84%B1-%EC%9E%88%EB%8A%94-%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%97%90%EC%84%9C-%EC%9D%BD%EA%B8%B0-%EC%89%AC%EC%9A%B4-%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%A1%9C\" aria-label=\"가독성 있는 텍스트에서 읽기 쉬운 텍스트로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 가독성 있는 텍스트에서 읽기 쉬운 텍스트로</h1>\n<p>이미지, 아이콘, 동영상은 오늘날 웹 디자인에서 빼놓을 수 없는 요소이지만, 여전히 거의 모든 웹사이트에서는 텍스트가 콘텐츠의 대부분을 차지합니다. 텍스트는 어떤 기기에서든 읽을 수 있어야 하기 때문에, 폰트 속성을 스타일링하고, 테스트하며, 미세 조정하는 데 상당한 시간을 할애하는 것이 중요합니다.</p>\n<h2 id=\"글꼴-크기-확대\" style=\"position:relative;\"><a href=\"#%EA%B8%80%EA%BC%B4-%ED%81%AC%EA%B8%B0-%ED%99%95%EB%8C%80\" aria-label=\"글꼴 크기 확대 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>글꼴 크기 확대</h2>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/1*dHl0fVXbqfbQXE-UG-DFfA.jpeg\" alt=\"\"></p>\n<p><em>사용자가 화면에서 떨어진 거리에 따라 글꼴 크기는 확대해야 합니다 (<a href=\"https://blog.marvelapp.com/body-text-small/\">출처: Marvel</a>)</em></p>\n<p>한때 <a href=\"https://www.smashingmagazine.com/2011/10/16-pixels-body-copy-anything-less-costly-mistake/\">12px 글꼴 크기가 본문(body) 텍스트의 표준이었지만</a>, 해상도가 높은 기기의 등장으로 평균 글꼴 크기는 한동안 15에서 18px 사이에 정착했습니다. 최근 몇 년간, 글꼴 크기는 다시 20px 이상으로 상승했으며, 이는 좋은 일입니다. 텍스트는 스마트폰에서 충분히 커야 하며, TV와 같은 큰 화면에서 멀리서도 읽을 수 있도록 화면 크기에 따라 확대해야 합니다.</p>\n<p>서체의 특성이 매우 다양하기 때문에 표준의 최소 크기를 정의하는 것은 의미가 없지만, 작은 화면 크기에 좋은 시작점은 아마도 18-20px일 것입니다.</p>\n<p>물론 글꼴 크기에 대해 더 많이 말할 수 있지만, 이 글에서 다루기에는 너무 많습니다. 자세한 내용은 <a href=\"https://twitter.com/xtianmiller\">Christian Miller</a>의 <a href=\"https://blog.marvelapp.com/body-text-small/\">당신의 Body 텍스트는 너무 작습니다</a>를 읽어보시길 권장합니다.</p>\n<h2 id=\"라인-높이line-height-설정\" style=\"position:relative;\"><a href=\"#%EB%9D%BC%EC%9D%B8-%EB%86%92%EC%9D%B4line-height-%EC%84%A4%EC%A0%95\" aria-label=\"라인 높이line height 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>라인 높이(line-height) 설정</h2>\n<p>브라우저의 기본 라인 높이는 대략 **<code>1.2</code>**입니다. <a href=\"https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-visual-presentation\">웹 콘텐츠 접근성 지침</a>에 따르면, 텍스트 블록 내의 문단에서는 최소 **<code>1.5</code>**여야 합니다.</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/1*11s0oQqUyiWb3hhk1g5MAw.png\" alt=\"\"></p>\n<p><code>*line-height</code>가 1.2인 문단과 1.5인 문단 비교*</p>\n<p>문단 내 라인 높이가 조정된 텍스트는 가독성이 향상될 뿐만 아니라, 시각적으로도 꽤 더 매력적입니다.</p>\n<h2 id=\"텍스트를-왼쪽-또는-오른쪽으로-정렬\" style=\"position:relative;\"><a href=\"#%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%99%BC%EC%AA%BD-%EB%98%90%EB%8A%94-%EC%98%A4%EB%A5%B8%EC%AA%BD%EC%9C%BC%EB%A1%9C-%EC%A0%95%EB%A0%AC\" aria-label=\"텍스트를 왼쪽 또는 오른쪽으로 정렬 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>텍스트를 왼쪽 또는 오른쪽으로 정렬</h2>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/1*yCJ2EkFtsYyKJ9K2FTDW6g.png\" alt=\"\"></p>\n<p><em>양쪽 정렬된 텍스트의 불규칙한 단어 간격</em></p>\n<p>양쪽 정렬이 왼쪽 또는 오른쪽 정렬된 텍스트보다 보기 좋다고 생각하는 사람들도 있지만, 이는 나쁜 관행으로 간주됩니다. <code>text-align: justify</code>는 같은 길이의 줄을 만들기 위해 단어 간격을 조정합니다. 이러한 불균일한 공백은 가독성을 해칠 수 있으며 매우 산만해질 수 있습니다. 필요한 경우 단어를 구분하는 것도 해결책이 될 수 있지만, <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens?redirectlocale=en-US&#x26;redirectslug=CSS%2Fhyphens#Languages_support_notes\">CSS 하이픈</a>은 잘 지원되지 않고 예상대로 작동하지 않을 수 있습니다.</p>\n<h2 id=\"문단-너비-정의\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EB%8B%A8-%EB%84%88%EB%B9%84-%EC%A0%95%EC%9D%98\" aria-label=\"문단 너비 정의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문단 너비 정의</h2>\n<p>여러 출처에 따르면 디자이너들은 <a href=\"https://www.smashingmagazine.com/2014/09/balancing-line-length-font-size-responsive-web-design/#line-length-measure-and-reading\">줄당 45에서 85자</a>를 유지해야 한다고 합니다. 이상적인 문단 너비는 65자라고 여겨집니다.</p>\n<p>텍스트 블록의 너비를 정의할 때 <a href=\"http://caniuse.com/#feat=ch-unit\">ch 단위</a>가 유용할 수 있습니다. <code>1ch</code>는 숫자 0을 나타내는 문자의 너비와 동일합니다. 또한, <code>font-family</code> 또는 <code>font-size</code>가 변경되면 이에 따라 변경됩니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">p</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 최대 너비 65자 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">max-width</span><span class=\"mtk1\">: </span><span class=\"mtk7\">65ch</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>어떠한 종류의 반응형 타이포그래피 기술을 사용한다면, 매우 큰 화면에서 사이트를 테스트해야 합니다. 글꼴 크기에 제한이 없다면, 특정 뷰포트 크기에서 텍스트가 읽기 어려워질 수 있습니다. 제한을 설정하는 방법이나 반응형 타이포그래피에 익숙하지 않다면, <a href=\"https://twitter.com/MikeRiethmuller\">Mike Riethmullers</a>의 글 <a href=\"https://madebymike.com.au/writing/precise-control-responsive-typography/\">반응형 타이포그래피에 대한 정밀한 제어</a>를 읽어보시기 바랍니다.</p>\n<h1 id=\"가상-요소에-콘텐츠-신중하게-사용하기\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81-%EC%9A%94%EC%86%8C%EC%97%90-%EC%BD%98%ED%85%90%EC%B8%A0-%EC%8B%A0%EC%A4%91%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"가상 요소에 콘텐츠 신중하게 사용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 가상 요소에 콘텐츠 신중하게 사용하기</h1>\n<p>우리는 <code>::before</code>와 <code>::after</code>라는 가상 요소를 사용하여 요소의 맨 처음이나 맨 끝에 CSS를 추가할 수 있습니다. 이것은 디자인 요소를 우리 컴포넌트에 추가하는 매우 일반적이고 편리한 방법을 제공하지만, <code>content</code> 속성을 사용하여 내용을 추가하는 것도 가능합니다. <a href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\">관심사의 분리</a>의 관점에서 보면, 우리는 이렇게 하지 않아야 합니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">h2</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">content</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;DON&#39;T DO THIS&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>우리의 내용은 HTML 파일, 데이터베이스 또는 API에서 오는 것이지, CSS에서 오는 것이 아닙니다. 때때로 우리는 폰트 아이콘 또는 특수 문자와 같은 텍스트가 아닌 콘텐츠를 추가하기 위해 <code>content</code> 속성을 사용합니다. 그렇게 할 때, <a href=\"https://tink.uk/accessibility-support-for-css-generated-content/\">일부 스크린 리더가 생성된 콘텐츠를 인식하고 설명한다는 것을</a> 기억해야 합니다. 생성된 콘텐츠가 순전히 표현적인 경우 보조 기술에서 숨겨야 합니다. 예를 들어 <code>aria-hidden</code>을 사용할 수 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"html\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">span</span><span class=\"mtk1\"> </span><span class=\"mtk12\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;icon icon-key&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">aria-hidden</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;true&quot;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">span</span><span class=\"mtk17\">&gt;</span></span></span></code></pre>\n<h1 id=\"화면만이-유일한-매체가-아니다\" style=\"position:relative;\"><a href=\"#%ED%99%94%EB%A9%B4%EB%A7%8C%EC%9D%B4-%EC%9C%A0%EC%9D%BC%ED%95%9C-%EB%A7%A4%EC%B2%B4%EA%B0%80-%EC%95%84%EB%8B%88%EB%8B%A4\" aria-label=\"화면만이 유일한 매체가 아니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 화면만이 유일한 매체가 아니다</h1>\n<p>우리가 디지털 시대에 살고 있음에도 불구하고, 사람들은 여전히 물건을 인쇄합니다. 당신의 페이지가 인쇄되거나 PDF로 저장될 때도 접근성이 좋고 사용하기 쉬워야 합니다. 우리가 해야 할 일은 CSS에 <code>@media</code> 블록을 추가하여 종이에 어울리지 않거나 의미가 없는 요소(네비게이션 또는 광고)들을 숨기거나 스타일을 조정하는 것입니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">@media</span><span class=\"mtk1\"> </span><span class=\"mtk8\">print</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">.header</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">position</span><span class=\"mtk1\">: </span><span class=\"mtk8\">static</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }  </span><span class=\"mtk6\">nav</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">display</span><span class=\"mtk1\">: </span><span class=\"mtk8\">none</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>인쇄된 웹 페이지의 문제 중 하나는 링크가 완전히 쓸모없다는 것입니다. 왜냐하면 그것들이 어디로 이끄는지 알 수 없기 때문입니다. 다행히도 CSS는 <a href=\"https://alistapart.com/article/goingtoprint\">속성의 값들을 드러내고 화면(이 경우에는 종이)에 표시하는 방법을 제공합니다</a>.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">@media</span><span class=\"mtk1\"> </span><span class=\"mtk8\">print</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">a</span><span class=\"mtk1\">[</span><span class=\"mtk12\">href</span><span class=\"mtk1\">^=</span><span class=\"mtk8\">&quot;http&quot;</span><span class=\"mtk1\">]</span><span class=\"mtk6\">:not</span><span class=\"mtk1\">([</span><span class=\"mtk12\">href</span><span class=\"mtk1\">*=</span><span class=\"mtk8\">&quot;mywebsite.com&quot;</span><span class=\"mtk1\">])</span><span class=\"mtk6\">::after</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">content</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot; (&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">attr</span><span class=\"mtk1\">(</span><span class=\"mtk12\">href</span><span class=\"mtk1\">) </span><span class=\"mtk8\">&quot;)&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>위의 코드는 <code>href</code> 속성이 있고 <em>http</em>로 시작하지만 mywebsite.com이 값에 포함되지 않은 모든 링크 옆에 <code>href</code> 속성의 값을 표시합니다.</p>\n<p>Firefox와 특히 Chrome은 <a href=\"https://uxdesign.cc/i-totally-forgot-about-print-style-sheets-f1e6604cfd6#63e3\">인쇄용 스타일 시트를 테스트하고 디버깅하기 위한 도구를 제공합니다</a>.</p>\n<p>더 깊이 파고들고 싶다면, <a href=\"https://uxdesign.cc/i-totally-forgot-about-print-style-sheets-f1e6604cfd6\">인쇄 스타일 작업을 위한 팁과 트릭들을 모아놓은 것이 있습니다</a>.</p>\n<h1 id=\"완전히-지원되지-않는-속성-값에-대한-대안\" style=\"position:relative;\"><a href=\"#%EC%99%84%EC%A0%84%ED%9E%88-%EC%A7%80%EC%9B%90%EB%90%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%86%8D%EC%84%B1-%EA%B0%92%EC%97%90-%EB%8C%80%ED%95%9C-%EB%8C%80%EC%95%88\" aria-label=\"완전히 지원되지 않는 속성 값에 대한 대안 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 완전히 지원되지 않는 속성 값에 대한 대안</h1>\n<p>가끔 우리는 특정 속성 값을 사용하고 싶지만, 일부 브라우저에서 지원하지 않기 때문에 사용할 수 없는 상황에 처합니다. 하지만 대안을 제공하는 한, 그것을 사용하는 것을 멈출 필요는 없습니다. 종종 <a href=\"https://hacks.mozilla.org/2016/08/using-feature-queries-in-css/\">쿼리</a>나 다른 탐지 기능을 사용하지 않고도 할 수 있습니다.</p>\n<p>예를 들어, IE와 <a href=\"https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/6514497-vmax-unit\">이전 버전의 Edge</a>가 이해하지 못하는 <code>vmax</code> 단위를 사용하고 싶다고 가정해 봅시다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">div</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">width</span><span class=\"mtk1\">: </span><span class=\"mtk7\">50vmax</span><span class=\"mtk1\">; </span><span class=\"mtk3\">/* IE와 Edge 이전 버전에서 작동하지 않음 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>대안을 제공하기 위해서, 덜 이상적이지만 브라우저가 이해할 수 있는 <code>width</code> 속성을 사용하면 됩니다. 예를 들어 <code>width: 50vw</code>처럼. 다음 줄에서 실제 원하는 값을 설정합니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">div</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">width</span><span class=\"mtk1\">: </span><span class=\"mtk7\">50vw</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">width</span><span class=\"mtk1\">: </span><span class=\"mtk7\">50vmax</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><code>vmax</code>를 이해하지 못하는 브라우저는 <code>width: 50vw</code>를 해석하고 <code>width: 50vmax</code>는 무시합니다. 반면에 <code>vmax</code>를 이해하는 브라우저는 먼저 <code>width: 50vw</code>를 해석한 다음 <code>width: 50vmax</code>를 해석합니다. <code>vmax</code> 선언이 <code>vw</code> 선언 다음에 오기 때문에, 유저는 <code>vmax</code> 로 설정한 버전이 적용 됩니다.</p>\n<h1 id=\"콘텐츠를-숨기는-여러-가지-방법\" style=\"position:relative;\"><a href=\"#%EC%BD%98%ED%85%90%EC%B8%A0%EB%A5%BC-%EC%88%A8%EA%B8%B0%EB%8A%94-%EC%97%AC%EB%9F%AC-%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95\" aria-label=\"콘텐츠를 숨기는 여러 가지 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 콘텐츠를 숨기는 여러 가지 방법</h1>\n<p>HTML의 제목들은 문서(document)의 개요를 잡는 데 매우 유용합니다. <code>&#x3C;h1></code>부터 <code>&#x3C;h6></code>까지의 제목을 사용함으로써, 브라우저와 다른 소프트웨어에게 문서가 어떻게 구성되어있고 각 부분들이 어떻게 연관되어 있는지 알려줍니다. <a href=\"https://medium.com/alistapart/writing-html-with-accessibility-in-mind-a62026493412#fd4b\">문서 개요를 가지는 것은 매우 중요합니다</a>, SEO에 좋고 스크린 리더 사용자들이 사이트를 탐색하는 데 도움이 됩니다. 디자인에 제목이 없어도 제목이 있으면 좋을 것 같은 경우가 발생할 수 있습니다. 그것은 종종 디자인 자체가 구조를 전달할 때의 경우입니다. 이런 경우에는 마크업에서 제목을 단순히 제거하지 않고 시각적으로 숨깁니다. CSS가 있든 없든 문서의 구조가 명확해야 합니다.</p>\n<p>이것은 물론 단 하나의 예일 뿐이며, 폼에서 라벨을 시각적으로 숨기는 것은 또 다른 예입니다(UX 관점에서 <a href=\"https://www.nngroup.com/articles/form-design-placeholders/\">라벨을 숨기는 것은 바람직하지 않습니다</a>).</p>\n<p>CSS에서는 콘텐츠를 숨기는 여러 가지 방법이 있으며, 적절한 기술을 올바른 시나리오에 맞게 선택하는 것은 여러분에게 달려 있습니다.</p>\n<h2 id=\"모든-사람으로부터-콘텐츠-숨기기\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%EC%82%AC%EB%9E%8C%EC%9C%BC%EB%A1%9C%EB%B6%80%ED%84%B0-%EC%BD%98%ED%85%90%EC%B8%A0-%EC%88%A8%EA%B8%B0%EA%B8%B0\" aria-label=\"모든 사람으로부터 콘텐츠 숨기기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 사람으로부터 콘텐츠 숨기기</h2>\n<p><code>hidden</code> 속성을 사용하거나 <code>visibility: hidden</code> 또는 <code>display: none</code>을 설정함으로써 콘텐츠를 완전히 숨길 수 있습니다. 사용자는 볼 수 없으며 스크린 리더나 검색 엔진도 읽을 수 없습니다.</p>\n<h2 id=\"시각적으로만-콘텐츠-숨기기\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EA%B0%81%EC%A0%81%EC%9C%BC%EB%A1%9C%EB%A7%8C-%EC%BD%98%ED%85%90%EC%B8%A0-%EC%88%A8%EA%B8%B0%EA%B8%B0\" aria-label=\"시각적으로만 콘텐츠 숨기기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시각적으로만 콘텐츠 숨기기</h2>\n<p>시각적으로만 콘텐츠를 숨기는 것은 간단하지 않습니다. 스크린 리더는 여전히 접근 가능하게 해야 하며, 브라우저의 특이점을 다뤄야 하고 요소가 포커스될 때 무슨 일이 발생하는지 결정해야 합니다. 물론, 이미 다른 사람들이 이를 해냈고 해결책이 있습니다.</p>\n<p>제가 <a href=\"https://codepen.io/matuzo/pen/dRzzGv\">연구</a>를 해본 결과, 많은 다양한 접근 방식이 있다는 것을 알게 되었습니다. 그래서 <a href=\"https://twitter.com/mmatuzo/status/878246196267057152\">전문가들에게 의견을 물어보았고</a>, 추천된 기술을 분석하여 무슨 일이 일어나는지 완전히 이해했습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">.visually-hidden</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 일반적인 흐름에서 항목을 제거 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">position</span><span class=\"mtk1\">: </span><span class=\"mtk8\">absolute</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 잘못 발음되거나 뭉개지는 텍스트를 위한 해결책 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">white-space</span><span class=\"mtk1\">: </span><span class=\"mtk8\">nowrap</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 가능한 가장 작은 크기로 설정 (일부 화면 낭독기는 높이와 너비가 0인 요소를 무시함) */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">width</span><span class=\"mtk1\">: </span><span class=\"mtk7\">1px</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">height</span><span class=\"mtk1\">: </span><span class=\"mtk7\">1px</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 크기 조정 후 넘치는 콘텐츠 숨기기 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">overflow</span><span class=\"mtk1\">: </span><span class=\"mtk8\">hidden</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 요소의 크기를 변경할 수 있는 모든 속성 초기화 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">border</span><span class=\"mtk1\">: </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">padding</span><span class=\"mtk1\">: </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 클리핑은 요소의 어떤 부분이 표시될지 정의함. */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 구식 clip 속성은 구형 브라우저를 위함 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">clip</span><span class=\"mtk1\">: </span><span class=\"mtk11\">rect</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 최신 브라우저를 위한 clip-path. inset(50%)는 콘텐츠를 사라지게 하는 내부 사각형을 정의함. */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">clip-path</span><span class=\"mtk1\">: </span><span class=\"mtk11\">inset</span><span class=\"mtk1\">(</span><span class=\"mtk7\">50%</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 현재 아무도 정확히 왜 margin: -1px이 있는지 확실하지 않음. 게다가 이것이 문제를 일으킬 수 있음 (참조:https://github.com/h5bp/html5-boilerplate/issues/1985). */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">margin</span><span class=\"mtk1\">: </span><span class=\"mtk7\">-1px</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>이 클래스를 어딘가에 저장하고 시각적으로 콘텐츠를 숨기면서 보조 기술과 검색 엔진은 접근 가능하게 하고 싶을 때 사용하세요.</p>\n<p><strong>스킵 링크</strong></p>\n<p>앞의 클래스들은 스킵 링크로 사용하기에도 적합합니다. 스킵 링크는 초기에는 시각적으로 숨겨져 있지만 포커스될 때 보이는 링크입니다. 스크린 리더와 키보드 사용자들이 소개 콘텐츠를 건너뛰고 주요 콘텐츠로 바로 이동할 수 있도록 페이지의 첫 번째 항목 중 하나여야 합니다. 기본적으로 사용자를 페이지의 특정 부분으로 이동시키는 앵커 링크입니다.</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:640/format:webp/0*rHLRgRcCEutpb2bD.gif\" alt=\"\"></p>\n<p><em>“Skip to content” 링크는 포커스될 때 보입니다</em></p>\n<p>이 <a href=\"https://codepen.io/matuzo/pen/RZBNjP#content\">코드 펜</a>에서 직접 시도해보고, <code>Tab</code>을 눌러 건너뛰기 링크를 드러내보세요.</p>\n<h2 id=\"의미론적으로-콘텐츠-숨기기\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EB%AF%B8%EB%A1%A0%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%BD%98%ED%85%90%EC%B8%A0-%EC%88%A8%EA%B8%B0%EA%B8%B0\" aria-label=\"의미론적으로 콘텐츠 숨기기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>의미론적으로 콘텐츠 숨기기</h2>\n<p>때때로 시각적으로 콘텐츠를 표시하되 스크린 리더에서는 숨기는 것이 의미가 있습니다. 예를 들어 아이콘을 사용할 때 그렇습니다. 그런 경우에는 숨기고자 하는 요소에 <code>aria-hidden</code> 속성을 추가하고 <code>true</code>로 설정하세요.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"html\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">button</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">span</span><span class=\"mtk1\"> </span><span class=\"mtk12\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;icon icon-hamburger&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">aria-hidden</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;true&quot;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">span</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">span</span><span class=\"mtk1\"> </span><span class=\"mtk12\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;text&quot;</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Menu</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">span</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">button</span><span class=\"mtk17\">&gt;</span></span></span></code></pre>\n<h2 id=\"기타\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%ED%83%80\" aria-label=\"기타 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기타</h2>\n<p>콘텐츠를 숨기는 다른 방법들도 있습니다. 예를 들어 음수 <code>text-indent</code>나 제로 <code>font-size</code> 또는 <code>height</code> 등입니다. 일부는 작동하지만 특정 주의사항이 있습니다. 자세한 내용은 <a href=\"http://webaim.org/\">webaim.org</a>의 <a href=\"http://webaim.org/techniques/css/invisiblecontent/#techniques\">텍스트 숨기기 기술</a>을 읽어보세요.</p>\n<h1 id=\"나쁜-대비는-신뢰할-수-없다\" style=\"position:relative;\"><a href=\"#%EB%82%98%EC%81%9C-%EB%8C%80%EB%B9%84%EB%8A%94-%EC%8B%A0%EB%A2%B0%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4\" aria-label=\"나쁜 대비는 신뢰할 수 없다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 나쁜 대비는 신뢰할 수 없다</h1>\n<p>우리의 디자인은 가독성을 위해 텍스트와 배경 사이에 충분한 대비를 제공해야 합니다. 저시력자뿐만 아니라 시각 장애가 없는 사람들도 고대비에서 이익을 얻습니다. 맑은 날에 스마트폰을 밖에서 사용하는 것을 생각해 보세요.</p>\n<h2 id=\"색상-대비란-무엇이며-왜-중요한가\" style=\"position:relative;\"><a href=\"#%EC%83%89%EC%83%81-%EB%8C%80%EB%B9%84%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EB%A9%B0-%EC%99%9C-%EC%A4%91%EC%9A%94%ED%95%9C%EA%B0%80\" aria-label=\"색상 대비란 무엇이며 왜 중요한가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>색상 대비란 무엇이며 왜 중요한가</h2>\n<p><a href=\"http://www.who.int/blindness/en/\">세계보건기구(World Health Organization)</a>에 따르면 인구의 약 4%가 시각 장애가 있습니다. 남성의 7~12%와 여성의 1% 미만이 어떤 형태의 색상 시력 결함을 가지고 있습니다. 이러한 장애 중 많은 것이 대비에 대한 민감도를 감소시키고, 일부 경우에는 색상을 구별하는 능력까지 줄입니다.</p>\n<p>두 색상이 색상 휠의 다른 부분에서 올 때, 그 색상들은 대비를 이룹니다. 일반적으로 말해서, 두 색상의 차이가 클수록 대비가 높습니다. 웹 디자이너 및 개발자로서 우리에게는 단순히 대비 자체뿐만 아니라, 텍스트에 적용됐을 때 얼마나 잘 작동하는지가 중요합니다. 텍스트와 그 배경 사이의 대비는 적어도 중등도 저시력을 가진 사람들이 읽을 수 있을 정도로 높아야 합니다. 물론, 이 기준을 충족하는지 고민할 필요는 없습니다. <a href=\"https://www.w3.org/WAI/\">웹 접근성 이니셔티브(Web Accessibility Initiative, WAI)</a>는 이를 측정하기 위한 비율을 정의했습니다.</p>\n<h2 id=\"최소-대비-비율\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%86%8C-%EB%8C%80%EB%B9%84-%EB%B9%84%EC%9C%A8\" aria-label=\"최소 대비 비율 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최소 대비 비율</h2>\n<p>대비 비율은 특정 배경에서 특정 크기와 너비를 가진 텍스트의 대비가 얼마나 높은지를 알려줍니다. 비율은 1:1에서 21:1까지 다양할 수 있습니다. 비교된 두 색상이 동일하면 1:1이고, 검정과 흰색이 대립되는 경우 21:1입니다.</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/0*qtktww4-uNco582P.png\" alt=\"\"></p>\n<p><em>#777777 색상의 텍스트가 #DDDDDD 배경에서 3.3:1 비율을 가집니다. (출처: <a href=\"http://leaverou.github.io/contrast-ratio/\">대비 비율</a>)</em></p>\n<p><a href=\"https://www.w3.org/TR/WCAG20/\">웹 콘텐츠 접근성 지침(WCAG) 2.0</a>에 따르면, 배경과 그 텍스트(또는 텍스트 이미지) 사이에 최소 <a href=\"https://www.w3.org/TR/WCAG20-TECHS/G18.html\">4.5:1의 대비 비율</a>이 존재해야 합니다. 이는 <code>24px</code> 미만(굵지 않은 경우) 및 <code>19px</code> 미만(굵은 경우)인 텍스트에 적용됩니다. 더 큰 텍스트의 경우 3:1 비율이면 충분합니다. 이것들은 레벨 AA 기준을 충족하기 위한 최소 수치입니다. 레벨 AAA를 통과하려면 일반 텍스트의 최소 비율은 <a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast7.html\">7:1이고 굵은 텍스트는 4.5:1</a>입니다. 규정 준수를 위한 필수 사항은 아니지만, 우리가 아이콘을 사용한다면 텍스트 대비 규정을 충족하는 아이콘을 사용해야 합니다.</p>\n<p>저는 제 친구 <a href=\"https://twitter.com/lctdnl\">Daniel</a>에게 비율에 대해 말했고, 우리가 현재 작업 중인 프로젝트에서 그것을 올바르게 가져가는 것이 중요하다고 말했습니다. 다양한 조합을 시도한 후, 그는 이것이 생각했던 것보다 어렵다고 전화로 말했습니다. 문제는 충분히 시각적으로 매력적인 조합이 없는 것이 아니라, 지난 몇 년 동안 디자이너들이 저대비 조합을 사용하는 데 익숙해졌다는 것입니다. 작은 에이전시뿐만 아니라 <a href=\"https://www.wired.com/2016/10/how-the-web-became-unreadable/\">애플이나 구글</a>과 같은 큰 회사들도 이 불리한 디자인 추세를 따르고 있습니다.</p>\n<blockquote>\n<p>나이가 확실히 내 시력에 영향을 미쳤지만, 나는 디자인 트렌드로 고통받고 있다.</p>\n</blockquote>\n<p><a href=\"https://www.wired.com/2016/10/how-the-web-became-unreadable/\">Kevin Marks</a></p>\n<p>대비 비율을 계산하기 위한 <a href=\"https://www.w3.org/TR/WCAG20/#contrast-ratiodef\">공식이 있지만</a>, 오래된 계산기를 꺼내서 계산할 필요는 없습니다. 도구들이 있습니다.</p>\n<h2 id=\"대비-비율-측정\" style=\"position:relative;\"><a href=\"#%EB%8C%80%EB%B9%84-%EB%B9%84%EC%9C%A8-%EC%B8%A1%EC%A0%95\" aria-label=\"대비 비율 측정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>대비 비율 측정</h2>\n<p>Chrome Canary에서는 개발자 도구에서 직접 대비 비율을 표시할 수 있습니다. Remy Sharp가 <a href=\"https://remysharp.com/2017/08/17/contrast-ratio-in-devtools\">블로그 글</a>에서 이를 공유합니다.</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/0*jxW2YgkXxC1bCDBi.png\" alt=\"\"></p>\n<p><em>Chrome 개발자 도구에서의 대비 비율.</em></p>\n<p>색상 대비와 일반적인 접근성을 테스트하기 위한 많은 도구들이 있습니다. 다음 목록은 광범위하지는 않지만, 제가 선호하는 도구들의 작은 모음집 입니다.</p>\n<p><strong>온라인</strong></p>\n<ul>\n<li><a href=\"http://leaverou.github.io/contrast-ratio/#blue-on-red\">대비 비율</a> by <a href=\"http://lea.verou.me/\">Lea Verou</a></li>\n</ul>\n<p>브라우저에서 빠르고 쉬운 대비 체커</p>\n<ul>\n<li><a href=\"https://snook.ca/technical/colour_contrast/colour.html#fg=33FF33,bg=333333\">Colour Contrast Check</a> by <a href=\"https://snook.ca/\">Jonathan Snook</a></li>\n</ul>\n<p>브라우저에서 좀 더 많은 옵션을 가진 대비 체커</p>\n<ul>\n<li><a href=\"http://wave.webaim.org/\">Wave 도구</a></li>\n</ul>\n<p>브라우저 도구로 대비와 더 많은 것들을 체크</p>\n<ul>\n<li><a href=\"http://kevingutowski.github.io/color.html\">Accessible Color Spaces</a> by Kevin Gutowski</li>\n</ul>\n<p>자동 대비 체크가 있는 색상 선택기</p>\n<p><strong>브라우저 확장 프로그램과 개발자 도구</strong></p>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=b0Q5Zp_yKaU&#x26;list=PLNYkxOF6rcICWx0C9LVWWVqvHlYJyqw7g\">Chrome 개발자 도구 감사 패널</a></li>\n</ul>\n<p>Chrome 60은 Lighthouse를 기반으로 한 새로운 감사 패널과 함께 출시되었습니다. 접근성 점수를 부여하고 문제를 나열합니다.</p>\n<ul>\n<li><a href=\"http://khan.github.io/tota11y/\">tota11y</a></li>\n</ul>\n<p>대비, 문서 개요 등을 테스트하기 위한 훌륭한 브라우저 확장 프로그램.</p>\n<ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/axe/lhdoppojpmngadmnindnejefpokejbdd\">aXe</a></li>\n</ul>\n<p>aXe Chrome 확장 프로그램을 사용하여 웹 사이트에서 접근성 결함을 자동으로 찾는 도구.</p>\n<p><strong>기타</strong></p>\n<ul>\n<li><a href=\"https://github.com/getflourish/Sketch-Color-Contrast-Analyser\">Sketch용 색상 대비 분석기</a></li>\n</ul>\n<p>“WCAG에 대한 두 레이어의 색상 대비를 계산하는 Sketch 플러그인.</p>\n<ul>\n<li><a href=\"http://www.webaxe.org/color-contrast-tools/\">더 많은 색상 대비 도구들</a></li>\n</ul>\n<h2 id=\"고대비의-경험\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EB%8C%80%EB%B9%84%EC%9D%98-%EA%B2%BD%ED%97%98\" aria-label=\"고대비의 경험 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>고대비의 경험</h2>\n<p>고대비의 색상을 사용하는 것도 훌륭하지만, 저시력을 가진 사람들은 여전히 웹사이트에서 사용하는 색상을 변경하고 싶어할 수 있습니다. <a href=\"https://www.w3.org/TR/low-vision-needs/#user-needs\">사용자의 요구는 매우 다양하며</a> 그에 따라 <a href=\"https://accessibility.blog.gov.uk/2017/03/27/how-users-change-colours-on-websites/\">색상 변경 방법</a>도 다양합니다. 이 사실은 어느 정도 예측 불가능성을 내포하고 있으며, 우리의 페이지들이 항상 완전한 접근성을 보장하기 어렵게 만듭니다. 그래서 우리는 단지, 대비 수준 AA 또는 AAA 기준을 충족하는 것에만 의존해서는 안 되며, 웹사이트를 철저히 테스트하고 대비가 높은 대안을 제공하는 것도 고려해야 합니다.</p>\n<p><strong>윈도우에서의 고대비 모드</strong></p>\n<p>윈도우에서는 <a href=\"https://support.microsoft.com/en-us/help/4026951/windows-turn-high-contrast-mode-on-or-off-in-windows\">설정에서 고대비 옵션</a>을 사용할 수 있습니다. 사용자는 자신만의 색상 설정을 정의하거나 사전 정의된 테마를 선택할 수 있습니다.</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/0*2aPsF3bwXl5fZuBd.png\" alt=\"\"></p>\n<p><em>윈도우에서의 고대비 설정</em></p>\n<p>간단한 로그인 폼을 만들었고(첫 번째 스크린샷 중 하나. <a href=\"https://dribbble.com/shots/1687064-Simple-Login-Form%EC%9C%BC%EB%A1%9C\">https://dribbble.com/shots/1687064-Simple-Login-Form으로</a> 부터 영감을 받음.) 고대비를 가진 다양한 테마로 테스트해 보았습니다.</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/0*0BWG55TdsZnDBiik.jpg\" alt=\"\"></p>\n<p><em>고대비 설정에서의 다양한 로그인 폼</em></p>\n<p>Anika Henke는 <a href=\"https://accessibility.blog.gov.uk/2017/03/27/how-users-change-colours-on-websites/\">사용자들이 웹사이트에서 색상을 어떻게 변경하는지</a>에 대해 썼습니다. 그녀는 폼을 테스트하던 중 <a href=\"https://github.com/alphagov/govuk_elements/pull/397\">입력 필드가 보이지 않게 되었고</a> <a href=\"https://github.com/alphagov/govuk_frontend_toolkit/pull/377\">버튼이 인식되지 않게 되었다는 것을 발견했습니다</a>. 위 스크린샷에서도 같은 일이 발생하는 것을 볼 수 있습니다. 대체 텍스트가 없었다면, 사용자들은 두 개의 입력 필드가 있다는 것을 알지 못했을 것입니다. 인풋과 버튼에 기본 테두리를 추가하는 것은 빠른 해결책이었습니다(브라우저 간 테스트되지 않음).</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/0*5fii26pptxjctmx1.jpg\" alt=\"\"></p>\n<p><em>고대비 설정에서 인풋과 버튼에 테두리가 있는 개선된 로그인 폼</em></p>\n<p>미디어 쿼리를 사용하여 고대비 모드가 활성화되었는지 감지하고 특정 스타일을 제공할 수 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">/* 고대비 모드 활성화 */</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">@media (-ms-high-contrast:active) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}/* 특정 검정-백색 테마의 고대비 모드 */</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">@media (-ms-high-contrast:black-on-white) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}/* 특정 검정-백색 테마의 고대비 모드 */</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">@media (-ms-high-contrast:white-on-black) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p><a href=\"https://twitter.com/patrick_h_lauke\">Patrick H. Lauke</a> 는 <a href=\"https://www.paciellogroup.com/blog/2016/12/windows-high-contrast-mode-the-limited-utility-of-ms-high-contrast/\">윈도우 고대비 모드: -ms-high-contrast의 제한된 유용성</a>에서 이 미디어 기능에 대한 그의 생각과 우려를 공유했습니다. 이에 응답으로 <a href=\"http://www.gwhitworth.com/blog/2017/04/how-to-use-ms-high-contrast\">Greg Whitworth는 다음과 같이 지적했습니다.</a> “이 기능의 유일한 목적은 대비 민감도를 가진 사용자들에게 더 나은 경험을 제공하는 것입니다. 그러므로, 특정 색상이 무엇인지에 대해 반드시 신경 쓸 필요는 없습니다. 어느 정도까지는, 여러분의 사이트가 어떻게 보이는지보다 어떻게 고대비에서 기능하는지에 대해 신경 써야 합니다.”</p>\n<p>높은 <strong>대비 크롬 확장 프로그램</strong></p>\n<p>구글 크롬을 위한 <a href=\"https://chrome.google.com/webstore/detail/high-contrast/djcfdncoelnlbldjfhinnjlhdjlikmph?hl=en-US\">고대비 확장 프로그램</a>도 있어, 사용자들이 텍스트를 읽기 쉽게 만드는 여러 고대비 색상 필터로 웹을 탐색할 수 있습니다.</p>\n<p><strong>고대비의 대안</strong></p>\n<p>디자인의 일부분이 충분한 대비를 가지고 있지 않더라도, <a href=\"https://www.w3.org/TR/WCAG20-TECHS/G174.html#G174-description\"><em>Alternate Version 조항</em></a>을 사용하여 WCAG 기준을 충족할 수 있습니다. 이에 따르면, 사용자에게 페이지의 고대비 버전으로 연결하는 링크나, 페이지의 모든 측면이 준수하도록 페이지를 변경할 수 있는 페이지 상의 컨트롤을 제공해야 합니다.</p>\n<p>이 대안에 대한 몇 가지 기준이 있습니다.</p>\n<ul>\n<li>링크 또는 컨트롤은 페이지에 눈에 띄게 배치되어야 합니다.</li>\n<li>링크 또는 컨트롤 자체는 대비 요구사항을 충족해야 합니다.</li>\n<li>새 페이지는 원래 페이지와 동일한 정보와 기능을 포함해야 합니다.</li>\n<li>새 페이지는 모든 원하는 기준을 충족해야 합니다.</li>\n</ul>\n<h2 id=\"nocoffee로-테스트하기\" style=\"position:relative;\"><a href=\"#nocoffee%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0\" aria-label=\"nocoffee로 테스트하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoCoffee로 테스트하기</h2>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/0*1vQ04OwDBN6Q9P4x.png\" alt=\"\"></p>\n<p><em>NoCoffee는 저시력, 색상 결핍 및 차단된 시각 영역을 시뮬레이션합니다</em></p>\n<p>기준을 충족하는 것과 실제 사람을 대상으로 테스트하는 것은 별개의 문제입니다. 모든 사람이 전문적인 테스트 수단을 가지고 있는 것은 아닙니다. 다행히도, <a href=\"https://chrome.google.com/webstore/search/NoCoffee%20Vision%20Simulator?hl=en&#x26;gl=US\">NoCoffee</a>는 저시력, 색상 결핍 및 차단된 시각 영역을 쉽게 시뮬레이션할 수 있는 방법을 제공합니다. 이는 경미한~극심한 시력 문제를 가진 사람들이 직면하는 문제를 이해하는 데 도움이 될 수 있습니다.</p>\n<h1 id=\"색상이-정보의-유일한-단서가-되어서는-안-된다\" style=\"position:relative;\"><a href=\"#%EC%83%89%EC%83%81%EC%9D%B4-%EC%A0%95%EB%B3%B4%EC%9D%98-%EC%9C%A0%EC%9D%BC%ED%95%9C-%EB%8B%A8%EC%84%9C%EA%B0%80-%EB%90%98%EC%96%B4%EC%84%9C%EB%8A%94-%EC%95%88-%EB%90%9C%EB%8B%A4\" aria-label=\"색상이 정보의 유일한 단서가 되어서는 안 된다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 <strong>색상이 정보의 유일한 단서가 되어서는 안 된다</strong></h1>\n<p>앞서 언급했듯이, 많은 남성들이 시력 결함을 가지고 있습니다. 유형도 다양합니다. 가장 흔한 유형 중 하나인 중색 이상(Deuteranomaly)은 빨강과 녹색을 구분하기 어렵게 만듭니다. 색상 시력 결함이 있는 사람은 인터페이스를 사용할 수 없게 될 수 있으므로 <a href=\"http://www.particletree.com/features/interfaces-and-color-blindness/\">색상만을 시각적 단서로 사용하는 것을 피해야 합니다.</a></p>\n<p>이전 예시에서 보여준 폼의 입력 필드에 성공 및 오류 상태를 나타내는 테두리를 추가했습니다. 다음 스크린샷은 색상만으로 사용자에게 충분한 피드백을 주지 못한다는 것을 보여줍니다. 테두리 색상이 전혀 보이지 않거나 잘못 보이는 경우가 있습니다.</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:720/format:webp/0*j6Ao9ijKUk5FrDVB.jpg\" alt=\"\"></p>\n<p><em>고대비 모드에서 색상만으로 폼의 성공과 실패를 구별하는 것은 효과적이지 않습니다.</em></p>\n<p><a href=\"https://aerolab.co/blog/web-accessibility/#color\">간단한 아이콘을 추가하면</a> 접근성과 사용자 경험을 개선하는 데 도움이 될 수 있습니다.</p>\n<p>링크도 비슷한 예시 중 하나입니다. 링크는 색상만으로 일반 텍스트와 구별되어서는 안 됩니다. <a href=\"http://adrianroselli.com/2016/06/on-link-underlines.html\">링크에 밑줄을 유지하는 것이</a> 좋습니다.</p>\n<h1 id=\"순서에-신경-쓰기\" style=\"position:relative;\"><a href=\"#%EC%88%9C%EC%84%9C%EC%97%90-%EC%8B%A0%EA%B2%BD-%EC%93%B0%EA%B8%B0\" aria-label=\"순서에 신경 쓰기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 순서에 신경 쓰기</h1>\n<p>아이템들을 배치 순서를 바꾸는 방법은 많이 있습니다. 예를 들어, Flexbox에는 <code>order</code>와 <code>flex-direction</code>이 있고, Grid에는 <code>order</code>, <code>flex-auto-flow</code> 및 명시적 배치가 있습니다. 이러한 속성들은 매우 유용하지만, <a href=\"https://tink.uk/flexbox-the-keyboard-navigation-disconnect/\">콘텐츠의 DOM 순서와 시각적 표현 사이의 연결이 끊어질 수 있습니다</a>.</p>\n<p>다음 예시에서는 여러 그리드 속성을 사용하여 배치된 갤러리의 이미지를 볼 수 있습니다.</p>\n<iframe height=\"300\" style=\"width: 100%;\" scrolling=\"no\" title=\"Grid gallery with jumbled items\" src=\"https://codepen.io/matuzo/embed/yoEXvg?default-tab=html%2Cresult\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\">\nSee the Pen <a href=\"https://codepen.io/matuzo/pen/yoEXvg\">\nGrid gallery with jumbled items</a> by Manuel Matuzovic (<a href=\"https://codepen.io/matuzo\">@matuzo</a>)\non <a href=\"[https://codepen.io](https://codepen.io/)\">CodePen</a>.\n</iframe>\n<p>처음에는 문제가 없어 보이지만, 키보드를 사용하여 이미지에서 이미지로 이동할 때 순서를 전혀 예측할 수 없다는 것을 알 수 있습니다. <code>Tab</code> 키를 눌렀을 때 다음에 어떤 이미지가 강조될지 알 수가 없습니다. 여기에 포커스 스타일이 없으면 최악의 상황이 될 수 있습니다.</p>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/wbvZ9Y0yIcM?si=wQiDof3BePIzeHT4\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>\n<p>예측 불가능하거나 잘못된 순서는 키보드 사용자뿐만 아니라 스크린 리더 사용자에게도 문제가 됩니다. 스크린 리더는 DOM 순서대로 콘텐츠를 표시하므로 소프트웨어는 CSS 순서에 영향을 받지 않지만 사용자는 영향을 받습니다. 스크린 리더 사용자는 콘텐츠의 시각적 표현에 신경 쓰지 않는다고 생각할 수 있지만, <a href=\"http://adrianroselli.com/2017/02/not-all-screen-reader-users-are-blind.html\">모든 스크린 리더의 사용자가 시각 장애가 있는 것은 아닙니다</a>. 일부는 저시력이나 학습 장애가 있어 화면에 표시되는 내용을 보완하기 위해 스크린 리더를 사용합니다.</p>\n<p>이 순서 문제는 플렉스나 그리드 아이템뿐만 아니라 모든 종류의 위치 지정에도 적용됩니다. 스타일 없이도 의미가 있는 방식으로 콘텐츠를 정렬하는 것이 중요하며, 디자인에서의 순서와 일치하는지 확인해야 합니다. 일치하지 않으면 디자인을 다시 생각해야 할 수 있습니다. CSS에서 올바르게 위치시키지 못한다고 해서 마크업에서 요소들을 임의로 재배열하지 마세요.</p>\n<p><a href=\"https://twitter.com/rob_dodson\">Rob Dodson’s</a>의 <a href=\"https://www.youtube.com/watch?v=8MAvH6vYbDo&#x26;feature=em-subs_digest\">콘텐츠 재배열이 접근성에 영향을 미치는가?</a>와 Adrian Roselli의 <a href=\"http://adrianroselli.com/2015/09/source-order-matters.html\">코드의 순서가 중요하다</a> 글을 참고해 더 자세한 내용을 알아보세요.</p>\n<h1 id=\"중요한-것에-집중하기-focus\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EC%9A%94%ED%95%9C-%EA%B2%83%EC%97%90-%EC%A7%91%EC%A4%91%ED%95%98%EA%B8%B0-focus\" aria-label=\"중요한 것에 집중하기 focus permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 중요한 것에 집중하기: focus</h1>\n<p>저는 이미 키보드 탐색 기초와 포커스 가능한 요소들에 대해 <a href=\"https://medium.com/@matuzo/writing-javascript-with-accessibility-in-mind-a1f6a5f467b9#7a0c\">접근성을 고려하여 자바스크립트 작성하기</a>라는 글을 썼습니다. 이 주제가 처음이시라면, 그 글을 빠르게 읽고 오세요.</p>\n<p>키보드를 사용하여 웹사이트를 탐색할 수 있도록 하는 것은 중요합니다. 많은 사용자들이 웹 서핑을 할 때 키보드에 의존합니다. 그들 중에는 운동 장애가 있는 사람들, 시각 장애가 있는 사람들, 손이 없거나 어떤 이유로든 마우스나 트랙패드를 사용할 수 없는 사람들이 있습니다.</p>\n<p>CSS를 사용해서 포커스 가능한 요소들에 스타일을 적용할 수 있는 몇 가지 방법이 있습니다.</p>\n<h2 id=\"포커스된-아이템-선택하기\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%EC%BB%A4%EC%8A%A4%EB%90%9C-%EC%95%84%EC%9D%B4%ED%85%9C-%EC%84%A0%ED%83%9D%ED%95%98%EA%B8%B0\" aria-label=\"포커스된 아이템 선택하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>포커스된 아이템 선택하기</strong>**</h2>\n<p><code>:focus</code> 의사 클래스를 사용하여 <a href=\"https://allyjs.io/data-tables/focusable.html\">포커스 가능한 아이템들</a>이 포커스 되었을때 스타일을 적용할 수 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">a:focus</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">background-color</span><span class=\"mtk1\">: </span><span class=\"mtk8\">#000000</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">color</span><span class=\"mtk1\">: </span><span class=\"mtk8\">#FFFFFF</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>기본 포커스 스타일은 브라우저마다 일관성이 없으며 보기 좋지 않은 경우가 많으며, 때로는 <a href=\"http://adrianroselli.com/2017/02/avoid-default-browser-focus-styles.html\">디자인과 잘 어울리지 않습니다</a>. 사용자 경험을 개선하고 디자인에 맞는 맞춤 포커스 스타일을 제공하는 것이 좋습니다.</p>\n<p>하지만 무엇을 하든, 대체 스타일을 제공하지 않고 기본 윤곽선(점선 윤곽, 파란색 또는 주황색 반지)만 <a href=\"http://www.outlinenone.com/\">제거하지 마세요</a>. 주로 키보드로 탐색하는 사용자들은 포커스 위치를 알 수 없다면 사이트를 사용할 수 없게 됩니다.</p>\n<p><img src=\"!https://miro.medium.com/v2/resize:fit:720/format:webp/0*87H0RkGyYO7cT-hf.png\" alt=\"\"></p>\n<p><em>대안 없이 기본 포커스 스타일을 제거하지 마세요 (출처: <a href=\"http://www.outlinenone.com/\">outlinenone.com</a>)</em></p>\n<p>이것은 단순한 팁이 아니라 <a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-focus-visible.html\">레벨 AA 기준</a> 기준입니다.</p>\n<h2 id=\"키보드와-마우스-사용자-구분하기\" style=\"position:relative;\"><a href=\"#%ED%82%A4%EB%B3%B4%EB%93%9C%EC%99%80-%EB%A7%88%EC%9A%B0%EC%8A%A4-%EC%82%AC%EC%9A%A9%EC%9E%90-%EA%B5%AC%EB%B6%84%ED%95%98%EA%B8%B0\" aria-label=\"키보드와 마우스 사용자 구분하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>키보드와 마우스 사용자 구분하기</h2>\n<p>이미 언급했듯이, 디자이너들이 좌절하는 것 중 하나는 <a href=\"https://allyjs.io/tests/focus-outline-styles/index.html#style=focus&#x26;key=text,radio,checkbox,textarea,button,link,div&#x26;browser=firefox,chrome,safari,ie11\">브라우저 간 포커스 스타일의 일관성이 부족하다는 것입니다</a>. 또한 마우스를 사용할 때도 일부 포커스 가능한 요소들에서 포커스 스타일이 보이는 점도 문제입니다. 때로는 마우스 사용자에게는 포커스 스타일을 보여줄 필요가 없으며, 심지어 방해가 되거나 미학적으로 불쾌할 수 있습니다.</p>\n<p><img src=\"!https://miro.medium.com/v2/resize:fit:720/format:webp/0*gZJRNP6GtlghkOn2.png\" alt=\"\"></p>\n<p><em>컨텐츠 영역이 클릭되었을 때 크롬에서 파란색 윤곽선이 보이는 맞춤 탭 컴포넌트 (출처: <a href=\"https://frend.co/components/tabs/\">frend.co</a>)</em></p>\n<p>웹 페이지의 특정 요소에 포커스가 가 있을 때 <code>outline</code> 속성을 제거해서는 안됩니다. 왜냐하면 컴포넌트가 더 이상 키보드 사용자에게 접근 불가능하기 때문입니다. 우리에게 필요한 것은 키보드와 마우스 사용을 구별하는 방법입니다. 이것은 <a href=\"https://drafts.csswg.org/selectors-4\">CSS Level 4 선택자</a> 명세의 일부인 <code>:focus-ring</code> 가상 클래스를 사용하여 가능 합니다. ”<code>:focus-ring</code> 가상 클래스는 요소가 <code>:focus</code> 가상 클래스와 일치하고, 사용자 에이전트(브라우저)가 휴리스틱(규칙이나 패턴)을 통해 요소에 특별히 표시되어야 함을 결정할 때 (일반적으로 ‘focus-ring’을 통해) 적용됩니다.” (출처: <a href=\"https://drafts.csswg.org/selectors-4/#the-focusring-pseudo\">CSS 선택자 레벨 4 초안</a>)</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/* 기본 윤곽선 제거 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">:focus</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">outline</span><span class=\"mtk1\">: </span><span class=\"mtk8\">none</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/* 윤곽선이 보여야 할 때만 추가 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">:</span><span class=\"mtk4\">focus-ring</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">outline</span><span class=\"mtk1\">: </span><span class=\"mtk7\">2px</span><span class=\"mtk1\"> </span><span class=\"mtk8\">solid</span><span class=\"mtk1\"> </span><span class=\"mtk8\">blue</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>아쉽게도 현재 어떤 브라우저도 <code>:focus-ring</code>의 표준 구현을 지원하지 않습니다. (Firefox는 <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/%3A-moz-focusring\">-moz-focus-ring</a>을 지원함), 하지만 적절할 때 <code>.focus-ring</code> 클래스를 추가하는 <a href=\"https://github.com/WICG/focus-ring\">경량 폴리필</a>이 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/* 자바스크립트가 활성화되어 작동하고, .focus-ring 클래스가 없는 </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">모든 포커스 가능한 요소를 선택하여 윤곽선을 제거합니다 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">.js-focus-ring</span><span class=\"mtk1\"> </span><span class=\"mtk6\">:focus:not</span><span class=\"mtk1\">(</span><span class=\"mtk6\">.focus-ring</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">outline-width</span><span class=\"mtk1\">: </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>자세한 내용은 Rob Dodson의 <a href=\"https://www.youtube.com/watch?v=ilj2P5-5CjI&#x26;index=5&#x26;list=PLNYkxOF6rcICWx0C9LVWWVqvHlYJyqw7g\">a11ycasts 에피소드, Focus Ring!</a>을 시청하세요.</p>\n<h2 id=\"포커스된-자식이-있는-요소에-대한-스타일링\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%EC%BB%A4%EC%8A%A4%EB%90%9C-%EC%9E%90%EC%8B%9D%EC%9D%B4-%EC%9E%88%EB%8A%94-%EC%9A%94%EC%86%8C%EC%97%90-%EB%8C%80%ED%95%9C-%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81\" aria-label=\"포커스된 자식이 있는 요소에 대한 스타일링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포커스된 자식이 있는 요소에 대한 스타일링</h2>\n<p><code>:focus-within</code>는 상대적으로 새로운 가상 클래스로, 이미 대부분의 주요 브라우저에서 <a href=\"http://caniuse.com/#feat=css-focus-within\">지원되고 있습니다</a>. 이 클래스를 사용하면 현재 포커스된 자식 요소를 가진 요소를 선택할 수 있습니다.</p>\n<p><img src=\"!https://miro.medium.com/v2/resize:fit:640/format:webp/0*LCxl7Sx7ostMw4ZG.gif\" alt=\"\"></p>\n<p>자식 항목 중 하나가 포커스되면 그림자가 표시되는 예시입니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">form:focus-within</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">box-shadow</span><span class=\"mtk1\">: </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> </span><span class=\"mtk7\">4px</span><span class=\"mtk1\"> </span><span class=\"mtk7\">6px</span><span class=\"mtk1\"> </span><span class=\"mtk11\">rgba</span><span class=\"mtk1\">(</span><span class=\"mtk7\">80</span><span class=\"mtk1\">,</span><span class=\"mtk7\">88</span><span class=\"mtk1\">,</span><span class=\"mtk7\">156</span><span class=\"mtk1\">,</span><span class=\"mtk7\">0.2</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>이 기능을 <a href=\"https://s.codepen.io/matuzo/debug/MvPddP\">CodePen</a>에서 확인할 수 있습니다.</p>\n<p>포커스에 대한 자세한 내용은 YouTube에서 <a href=\"https://www.youtube.com/watch?v=EFv9ubbZLKw&#x26;index=18&#x26;list=PLNYkxOF6rcICWx0C9LVWWVqvHlYJyqw7g\">포커스란 무엇인가요?</a> 영상을 참조하세요.</p>\n<h1 id=\"그리드와-평평한-문서-구조\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%A6%AC%EB%93%9C%EC%99%80-%ED%8F%89%ED%8F%89%ED%95%9C-%EB%AC%B8%EC%84%9C-%EA%B5%AC%EC%A1%B0\" aria-label=\"그리드와 평평한 문서 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔗 그리드와 평평한 문서 구조</h1>\n<p>새로운 사이트를 만들 때, 우리는 보통 HTML 작성부터 시작합니다. 적절한 마크업을 선택하고 요소들을 논리적 순서에 맞게 배치합니다. 문서가 올바르게 작성되어 있고 잘 구조화되어 있으며 순서가 의미 있게 되면 CSS를 추가합니다. CSS Grid Layout이 나오기 전에는, 특히 DOM 순서와 디자인 순서가 일치하지 않은 경우에 레이아웃을 만드는 것이 매우 까다로웠습니다. <code>float</code>, <code>position</code> 그리고 때때로 Flexbox조차도 어떤 상황에서는 충분히 유연하지 않았고, 우리는 DOM 순서를 변경하고 싶은 유혹에 빠지곤 했습니다. Grid의 명시적 배치와 해당 영역 덕분에 아이템을 위치시키는 데 필요한 모든 유연성을 갖게 되었습니다. 이것은 훌륭하지만, Grid는 문서 구조를 해칠 수 있는 새로운 유혹을 도입합니다.</p>\n<p>다음과 같은 디자인을 가지고 있고, 그 아이템들에 <code>h2</code>와 <code>ul</code>을 사용한다고 가정해 봅시다. 왜냐하면 그것이 당신에게 가장 의미가 있기 때문입니다.</p>\n<p><img src=\"!https://miro.medium.com/v2/resize:fit:720/format:webp/0*m7b7MyTjSmcPTa0U.png\" alt=\"\"></p>\n<p><em>제목과 목록이 있는 레이아웃</em></p>\n<pre class=\"grvsc-container default-dark\" data-language=\"html\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;wrapper&quot;</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">h2</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Heading</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">h2</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">ul</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;&lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;#&quot;</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Element 1</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;&lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;#&quot;</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Element 2</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;&lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;#&quot;</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Element 3</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;&lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;#&quot;</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Element 4</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;&lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;#&quot;</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Element 5</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;&lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;#&quot;</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Element 6</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">ul</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk17\">&gt;</span></span></span></code></pre>\n<p>이러한 요소들을 열에 넣고 <code>&#x3C;h2></code>를 위치시키는 것은 꽤 쉽습니다… 또는 적어도 그렇게 보입니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">.wrapper</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">display</span><span class=\"mtk1\">: </span><span class=\"mtk8\">grid</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">grid-template-columns</span><span class=\"mtk1\">: </span><span class=\"mtk7\">120px</span><span class=\"mtk1\"> </span><span class=\"mtk11\">repeat</span><span class=\"mtk1\">(</span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk7\">1fr</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">grid-gap</span><span class=\"mtk1\">: </span><span class=\"mtk7\">20px</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span><span class=\"mtk6\">h2</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">grid-column</span><span class=\"mtk1\">: </span><span class=\"mtk7\">2</span><span class=\"mtk1\"> / </span><span class=\"mtk7\">-1</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><img src=\"!https://miro.medium.com/v2/resize:fit:720/format:webp/0*7ShmPNm7Y6qYovRM.png\" alt=\"\"></p>\n<p><em>제목과 목록이 있는 레이아웃. 그리드 컨테이너의 직접적인 자식만 그리드에 배치됩니다.</em></p>\n<p>하지만 예상과는 달리 보입니다. 문제는 그리드 컨테이너의 직접적인 자식만이 그리드에 배치된다는 것인데, 이 경우에는 <code>&#x3C;h2></code>와 <code>&#x3C;ul></code>이 해당됩니다. 하지만 여러분은 <code>&#x3C;li></code>들을 그리드 아이템으로 만들고 싶습니다. 이 문제에 대한 최악의 해결책은 구조를 단순화시켜 <code>&#x3C;ul></code>을 제거하고 <code>&#x3C;li></code>를 <code>&#x3C;div></code>로 변환하여 그리드 컨테이너의 직접적인 자식으로 만드는 것입니다.</p>\n<p>가장 좋은 해결책은 <code>&#x3C;ul></code>의 <code>display</code> 속성을 <code>subgrid</code>로 설정하는 것이지만, 불행히도 <code>subgrid</code>는 명세의 레벨 1에 포함되지 않았고 우리는 그것이 출시될 때까지 더 기다려야 합니다.</p>\n<p><code>&#x3C;ul></code>에 <code>display: contents</code>를 사용할 수 있지만, 현재 Firefox만이 <a href=\"http://caniuse.com/#feat=css-display-contents\">이를 지원합니다</a>. <code>display: contents</code>는 요소의 자식들이 마치 요소의 부모의 직접적인 자식인 것처럼 보이게 만듭니다.</p>\n<p>결국, **<code>&#x3C;ul></code>**에 다른 그리드를 정의해야 합니다. 이것은 이상적이지 않지만, 문서의 구조를 단순화시키고 의미를 해치는 것보다는 낫습니다. 이것은 매우 기본적인 예제이며 목록이 전체 그리드를 차지하기 때문에 부모 그리드에서 일부 값을 상속받을 수 있습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">ul</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* 전체 그리드를 차지함 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">grid-column</span><span class=\"mtk1\">: </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> / </span><span class=\"mtk7\">-1</span><span class=\"mtk1\">;  </span><span class=\"mtk3\">/* 다른 그리드를 생성하고 부모 그리드에서 값을 상속받음 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">display</span><span class=\"mtk1\">: </span><span class=\"mtk8\">inherit</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">grid-template-columns</span><span class=\"mtk1\">: </span><span class=\"mtk8\">inherit</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">grid-gap</span><span class=\"mtk1\">: </span><span class=\"mtk8\">inherit</span><span class=\"mtk1\">;  </span><span class=\"mtk3\">/* display: contents를 이해하는 브라우저를 위해 display 덮어쓰기 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">display</span><span class=\"mtk1\">: </span><span class=\"mtk8\">contents</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><a href=\"https://codepen.io/matuzo/pen/zdarLX\">CodePen</a>에서 두 가지 솔루션을 볼 수 있습니다.</p>\n<h1 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h1>\n<p>이 글에서 꽤 많은 내용을 다루고 있지만 CSS와 접근성에 대해 알아야 할 모든 것을 다루지는 않습니다. 그러나 이것은 단순한 출발점 그 이상입니다. DOM 및 포커스 순서를 올바르게 설정하고 고대비에 신경 쓰고 일반적으로 접근성을 고려하여 디자인 하는 것만으로도 이미 훌륭한 작업을 하고 있는 것입니다. 새로운 페이지나 사이트를 만들 때마다 접근성을 약간만 더 고려한다면 웹을 더 나은 곳으로 만들 수 있습니다.</p>\n<blockquote>\n<p>제약사항을 고려하여 디자인하는 것은 단순히 잘 디자인하는 것이다.</p>\n</blockquote>\n<p><em><a href=\"https://channel9.msdn.com/Events/WebPlatformSummit/edgesummit2016/ES1612\">Aaron Gustafson</a></em></p>\n<p>이 글을 즐겁게 읽으셨고 새로운 것을 배우셨기를 바랍니다. 질문이나 피드백이 있으시면 댓글을 남겨주시거나 <a href=\"http://twitter.com/mmatuzo\">트위터</a>를 통해 연락해 주시기 바랍니다.</p>\n<p>이 글을 작성하는 데 도움을 주신 멘토 <a href=\"https://twitter.com/AaronGustafson\">Aaron Gustafson</a>에게 감사드립니다.</p>\n<h1 id=\"더-많은-접근성-팁\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EB%A7%8E%EC%9D%80-%EC%A0%91%EA%B7%BC%EC%84%B1-%ED%8C%81\" aria-label=\"더 많은 접근성 팁 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>더 많은 접근성 팁</h1>\n<p>이 글은 네 부분 시리즈 중 세 번째입니다. 마지막 글은 준비 중이며 곧 공개될 예정입니다.</p>\n<ol>\n<li><a href=\"https://medium.com/@matuzo/writing-html-with-accessibility-in-mind-a62026493412#.3d2vtbp80\">접근성을 고려한 HTML 작성하기</a></li>\n<li><a href=\"https://medium.com/@matuzo/writing-javascript-with-accessibility-in-mind-a1f6a5f467b9\">접근성을 고려한 JavaScript 작성하기</a></li>\n<li><strong>접근성을 고려한 CSS 작성하기</strong></li>\n<li>다음 글: 접근성을 고려한 디자인 및 개발 방법 배우기</li>\n</ol>\n<p>독자 여러분의 독서와 이 글을 좋아하시고 공유해 주시면 감사하겠습니다.</p>\n<p>제가 작성한 다른 글도 확인해보실 수 있습니다.</p>\n<p><a href=\"https://www.smashingmagazine.com/2017/07/enhancing-css-layout-floats-flexbox-grid/?source=post_page-----8514a0007939--------------------------------\">Progressively Enhancing CSS Layout: From Floats To Flexbox To Grid</a></p>\n<p><a href=\"https://css-tricks.com/difference-explicit-implicit-grids/?source=post_page-----8514a0007939--------------------------------\">The Difference Between Explicit and Implicit Grids</a></p>\n<h1 id=\"추가적인-읽을-거리와-자료들\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80%EC%A0%81%EC%9D%B8-%EC%9D%BD%EC%9D%84-%EA%B1%B0%EB%A6%AC%EC%99%80-%EC%9E%90%EB%A3%8C%EB%93%A4\" aria-label=\"추가적인 읽을 거리와 자료들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가적인 읽을 거리와 자료들</h1>\n<h2 id=\"가독성-있는-텍스트-작성법\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EB%8F%85%EC%84%B1-%EC%9E%88%EB%8A%94-%ED%85%8D%EC%8A%A4%ED%8A%B8-%EC%9E%91%EC%84%B1%EB%B2%95\" aria-label=\"가독성 있는 텍스트 작성법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가독성 있는 텍스트 작성법</h2>\n<ul>\n<li><a href=\"https://blog.marvelapp.com/body-text-small/\">Your Body Text Is Too Small</a> by Christian Miller</li>\n<li><a href=\"https://www.wired.com/2016/10/how-the-web-became-unreadable/\">How the Web Became Unreadable</a> by Kevin Marks</li>\n<li><a href=\"https://zellwk.com/blog/why-vertical-rhythms/\">Why is Vertical Rhythm an Important Typography Practice?</a> by Zell Liew</li>\n<li><a href=\"https://madebymike.com.au/writing/precise-control-responsive-typography/\">Precise control over responsive typography</a> by Mike Riethmuller</li>\n</ul>\n<h2 id=\"가상-요소에-콘텐츠-신중하게-사용하기-1\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81-%EC%9A%94%EC%86%8C%EC%97%90-%EC%BD%98%ED%85%90%EC%B8%A0-%EC%8B%A0%EC%A4%91%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-1\" aria-label=\"가상 요소에 콘텐츠 신중하게 사용하기 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가상 요소에 콘텐츠 신중하게 사용하기</h2>\n<ul>\n<li><a href=\"https://tink.uk/accessibility-support-for-css-generated-content/\">Accessibility support for CSS generated content</a> by Léonie Watson</li>\n</ul>\n<p><strong>화면만이 유일한 매체가 아니다</strong></p>\n<ul>\n<li><a href=\"https://uxdesign.cc/i-totally-forgot-about-print-style-sheets-f1e6604cfd6\">I totally forgot about print style sheets</a> by Manuel Matuzović</li>\n</ul>\n<p><strong>완전히 지원되지 않는 속성 값에 대한 대안</strong></p>\n<ul>\n<li><a href=\"https://justmarkup.com/log/2017/02/css-and-progressive-enhancement/\">CSS and progressive enhancement</a> by Michael Scharnagl</li>\n</ul>\n<p><strong>콘텐츠를 숨기는 여러 가지 방법</strong></p>\n<ul>\n<li><a href=\"http://webaim.org/techniques/css/invisiblecontent/#techniques\">Techniques for hiding text</a></li>\n<li><a href=\"https://medium.com/@jessebeach/beware-smushed-off-screen-accessible-text-5952a4c2cbfe\">Beware smushed off-screen accessible text</a> by J. Renée Beach</li>\n<li><a href=\"https://allyjs.io/tutorials/hiding-elements.html#2017-edition-of-visuallyhidden\">a11y.js: Hiding DOM elements</a></li>\n<li><a href=\"https://www.filamentgroup.com/lab/bulletproof_icon_fonts.html\">Bulletproof Accessible Icon Fonts</a> by Zach Leatherman</li>\n</ul>\n<p><strong>나쁜 대비는 신뢰할 수 없다</strong></p>\n<ul>\n<li><a href=\"https://accessibility.blog.gov.uk/2017/03/27/how-users-change-colours-on-websites/\">How users change colours on websites</a> by Anika Henke</li>\n<li><a href=\"https://www.smashingmagazine.com/2014/10/color-contrast-tips-and-tools-for-accessibility/\">Color Contrast And Why You Should Rethink It</a> by Cathy O’ Connor</li>\n<li><a href=\"http://a11yproject.com/posts/what-is-color-contrast/\">What is Color Contrast?</a> by Rachel R. Vasquez</li>\n<li><a href=\"https://www.thoughtco.com/contrasting-colors-in-design-1078274\">A Beginner’s Guide to Contrasting Colors</a> by Jacci Howard Bear</li>\n</ul>\n<p><strong>색상이 정보의 유일한 단서가 되어서는 안 된다</strong></p>\n<ul>\n<li><a href=\"http://www.particletree.com/features/interfaces-and-color-blindness/\">Be Kind to the Color Blind</a> by Chris Champbell</li>\n<li><a href=\"http://adrianroselli.com/2016/06/on-link-underlines.html\">On Link Underlines</a> by Adrian Roselli</li>\n</ul>\n<p><strong>순서에 신경 쓰기</strong></p>\n<ul>\n<li><a href=\"http://adrianroselli.com/2017/02/not-all-screen-reader-users-are-blind.html\">Not All Screen Reader Users Are Blind</a> by Adrian Roselli</li>\n<li><a href=\"http://adrianroselli.com/2015/09/source-order-matters.html\">Source Order Matters</a> by Adrian Roselli</li>\n</ul>\n<p><strong>중요한 것에 집중하기: focus</strong></p>\n<ul>\n<li><a href=\"https://allyjs.io/tests/focus-outline-styles/index.html#style=focus&#x26;key=text,radio,checkbox,textarea,button,link,div&#x26;browser=firefox,chrome,safari,ie11\">a11y.js: Default Browser Focus Outline Styles</a></li>\n<li><a href=\"http://kizu.ru/en/blog/keyboard-only-focus/#x\">Keyboard-Only Focus</a> by Roman Komarov</li>\n</ul>\n<p><strong>그리드와 평평한 문서 구조</strong></p>\n<ul>\n<li><a href=\"https://rachelandrew.co.uk/archives/2015/07/28/modern-css-layout-power-and-responsibility/\">Modern CSS Layout, power and responsibility</a> by Rachel Andrew</li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk6 { color: #D7BA7D; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"date":"February 18, 2024","title":"(번역) 접근성을 고려하여 CSS 작성하기","categories":"translate a11y","author":"soobing"},"fields":{"slug":"/a11y/writing-css-with-accessibility-in-mind/"}},"site":{"siteMetadata":{"siteUrl":"https://soobing.github.io","comments":{"utterances":{"repo":"soobing/soobing.github.io"}}}}},"pageContext":{"slug":"/react/storybook-react-server-components/","nextSlug":"/react/next-app-router-react-query/","prevSlug":"/a11y/writing-css-with-accessibility-in-mind/"}},
    "staticQueryHashes": ["1073350324","2938748437"]}